# BOXガシャ マスタデータ設定 - クイックスタート

このディレクトリには、BOXガシャのマスタデータ設定に関する2つの詳細ガイドがあります。

## 📚 ドキュメント一覧

### 1. [BOXガシャのマスタデータ設定ガイド](./BOXガシャのマスタデータ設定ガイド.md)
**推奨**: まずこちらを読んでください

**内容**:
- BOXガシャの仕組み（ゲーム体験ベース）
- 必要なテーブル3つの詳細説明
- ステップバイステップの設定手順
- 実例（100カノイベント）
- よくある質問（Q&A）

**こんな人におすすめ**:
- BOXガシャのマスタデータを初めて設定する方
- テーブルの役割を理解したい方
- 具体的な設定手順を知りたい方

---

### 2. [BOXガシャ テーブル関係図](./BOXガシャ_テーブル関係図.md)
**推奨**: 設定ガイドを読んだ後、こちらで視覚的に理解を深めてください

**内容**:
- テーブル同士の関係を図で表現
- データの流れ（プレイヤー視点）
- マスタデータとユーザーデータの違い
- ループタイプ別の動作パターン

**こんな人におすすめ**:
- テーブルの関係性を視覚的に理解したい方
- データの流れを確認したい方
- ループタイプの動作を知りたい方

---

## 🚀 最速で理解する3ステップ

### ステップ1: BOXガシャとは何かを理解する（5分）
→ [設定ガイド - BOXガシャとは？](./BOXガシャのマスタデータ設定ガイド.md#boxガシャとは)

### ステップ2: 必要なテーブルを知る（10分）
→ [設定ガイド - 必要なテーブル一覧](./BOXガシャのマスタデータ設定ガイド.md#必要なテーブル一覧)
→ [設定ガイド - テーブルの詳細説明](./BOXガシャのマスタデータ設定ガイド.md#テーブルの詳細説明)

### ステップ3: 実例を見ながら設定する（15分）
→ [設定ガイド - 設定の流れ](./BOXガシャのマスタデータ設定ガイド.md#設定の流れステップバイステップ)
→ [設定ガイド - 実例で理解する](./BOXガシャのマスタデータ設定ガイド.md#実例で理解する)

---

## 📝 要点まとめ

### 必要なテーブルは3つだけ

| テーブル | 役割 | レコード数の目安 |
|---------|------|----------------|
| **MstBoxGacha** | BOXガシャ全体のルール | 1件 |
| **MstBoxGachaGroup** | 箱の段階（BOX1、BOX2...） | 3〜5件 |
| **MstBoxGachaPrize** | 各箱の中身 | 箱1つあたり数件〜数十件 |

### 設定のポイント

1. **箱の中身は合計100個**: 各箱の景品の`stock`を合計して100個にする
2. **目玉報酬を設定**: `is_pickup=1`で目玉報酬を指定
3. **ループタイプは`Last`**: 迷ったら`loop_type="Last"`を選ぶ
4. **箱レベルは1から**: `box_level`は1から順番に設定

### テーブルの関係

```
MstEvent（イベント）
  ↓
MstBoxGacha（1件: ルール全体）
  ↓
MstBoxGachaGroup（複数件: BOX1、BOX2、BOX3、無限BOX）
  ↓
MstBoxGachaPrize（各箱ごとに複数件: 中身）
```

---

## ❓ よくある質問トップ3

### Q1: 箱の中身は必ず100個ですか？
**A**: はい、1つの箱あたり100個が推奨です。`MstBoxGachaPrize`の`stock`を合計して100個になるように設定してください。

### Q2: 無限BOXは本当に無限ですか？
**A**: はい、イベント期間内であれば何度でもリセットして引けます。

### Q3: `loop_type`は何を選べばいいですか？
**A**: ほとんどのケースで`Last`（最後の箱を繰り返す）を使います。

---

## 🔗 関連ドキュメント

- サーバーAPI要件書: `projects/glow-server/docs/sdd/features/BOXガシャ/05_サーバーAPI要件書.md`
- ゲーム体験仕様: `projects/glow-server/docs/sdd/features/BOXガシャ/04_ゲーム体験仕様確認結果まとめ.md`
- DBスキーマ: `projects/glow-server/api/database/schema/exports/master_tables_schema.json`

---

## 📞 困ったときは

- **設定方法が分からない**: [設定ガイド - 設定の流れ](./BOXガシャのマスタデータ設定ガイド.md#設定の流れステップバイステップ)を参照
- **テーブルの意味が分からない**: [設定ガイド - テーブルの詳細説明](./BOXガシャのマスタデータ設定ガイド.md#テーブルの詳細説明)を参照
- **関係性が分からない**: [テーブル関係図](./BOXガシャ_テーブル関係図.md)を参照
- **よくある質問を見る**: [設定ガイド - よくある質問](./BOXガシャのマスタデータ設定ガイド.md#よくある質問)を参照

それでも解決しない場合は、エンジニアに相談してください！
