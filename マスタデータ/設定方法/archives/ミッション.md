# ミッション マスタデータ設定方法

## 目次

1. [概要](#概要)
2. [ミッションで使用するテーブル](#ミッションで使用するテーブル)
3. [各テーブルの設定方法](#各テーブルの設定方法)
4. [設定例](#設定例)
5. [注意事項とチェックポイント](#注意事項とチェックポイント)

---

## 概要

ミッションは、プレイヤーに様々なタスクを提示し、達成時に報酬を付与する機能です。GLOWでは以下の6種類のミッションタイプがあります。

### ミッションタイプ一覧

| タイプ | 説明 | リセット周期 | 主な用途 |
|-------|------|------------|---------|
| **デイリーミッション** | 毎日リセットされるミッション | 毎日 | 日々のログイン促進、プレイ習慣の形成 |
| **ウィークリーミッション** | 毎週リセットされるミッション | 毎週 | 週間目標の設定 |
| **アチーブメントミッション** | 一度達成すれば完了する永続的なミッション | なし | 長期的な達成目標 |
| **初心者ミッション** | 新規プレイヤー向けのチュートリアル的ミッション | なし | 新規プレイヤーのオンボーディング |
| **イベントミッション** | 特定のイベントに紐づくミッション | イベント終了時 | イベント期間中の目標設定 |
| **期間限定ミッション** | 開催期間が設定された期間限定ミッション | 期間終了時 | 期間限定キャンペーン |

### ミッションの構成要素

ミッションは以下の3つの要素で構成されます：

1. **達成条件** (criterion): プレイヤーが達成すべき目標
2. **報酬** (reward): 達成時にプレイヤーが獲得できるアイテムやリソース
3. **開放条件** (unlock): ミッションが表示・挑戦可能になる条件（一部のミッションタイプのみ）

### 達成条件・開放条件の詳細

達成条件タイプ（criterion_type）と開放条件タイプ（unlock_criterion_type）の詳細な設定値については、以下のスプレッドシートを参照してください：

**参考資料**: [ミッション達成条件・開放条件 設定値一覧](https://docs.google.com/spreadsheets/d/1_1XT-Gf60_0wF8fUScpuzYPBURB7LYiq9IcKXxGwzfE/edit?gid=1968140068#gid=1968140068)

---

## ミッションで使用するテーブル

ミッションの設定には以下の**シート**を使用します。

| シート | 対応するDBテーブル | 用途 |
|-------|------------------|------|
| **MstMissionDaily** | `mst_mission_dailies`<br>`mst_mission_dailies_i18n` | デイリーミッション設定 |
| **MstMissionWeekly** | `mst_mission_weeklies`<br>`mst_mission_weeklies_i18n` | ウィークリーミッション設定 |
| **MstMissionAchievement** | `mst_mission_achievements`<br>`mst_mission_achievements_i18n` | アチーブメントミッション設定 |
| **MstMissionBeginner** | `mst_mission_beginners`<br>`mst_mission_beginners_i18n` | 初心者ミッション設定 |
| **MstMissionEvent** | `mst_mission_events`<br>`mst_mission_events_i18n` | イベントミッション設定 |
| **MstMissionLimitedTerm** | `mst_mission_limited_terms`<br>`mst_mission_limited_terms_i18n` | 期間限定ミッション設定 |
| **MstMissionReward** | `mst_mission_rewards` | ミッション報酬の詳細設定 |
| **MstMissionDailyBonus** | `mst_mission_daily_bonuses` | デイリーミッションボーナス報酬 |

---

## 各テーブルの設定方法

### 1. MstMissionDaily（デイリーミッション）

毎日リセットされるミッションを定義します。

#### 列の説明

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | ミッションID（一意キー） | `daily_1` |
| **criterion_type** | 文字列 |  | 達成条件タイプ（キャメルケース） | `LoginCount`, `StageClearCount`, `UnitLevelUpCount` など |
| **criterion_value** | 文字列 | ○ | 達成条件値（条件タイプに応じた値、不要な場合は空欄） | ステージ番号`1`, `2`、アイテムID、ユニットIDなど |
| **criterion_count** | 整数 |  | 達成必要回数 | `1`, `3`, `5` |
| **group_key** | 文字列 | ○ | 分類キー（グループ化用） | `Daily1`, `Daily2` |
| **bonus_point** | 整数 |  | ミッションボーナスポイント量 | `10`, `20`, `30` |
| **mst_mission_reward_group_id** | 文字列 |  | 報酬グループID（外部参照：MstMissionReward.group_id）、空欄の場合は報酬なし | `achievement_reward_1` |
| **sort_order** | 整数 |  | 並び順（表示順序） | `1`, `2`, `3` |
| **destination_scene** | 文字列 |  | ミッションから遷移する画面 | `Home`, `StageSelect`, `UnitList`, `IdleIncentive`, `Gacha` など |
| **description.ja** | 文字列 |  | ミッション説明文（日本語） | `クエストを3回クリアしよう！` |

#### 達成条件タイプの例

`criterion_type`と`criterion_value`の組み合わせ例：

| criterion_type | criterion_value | criterion_count | 意味 |
|---------------|-----------------|-----------------|------|
| `LoginCount` | （空欄） | `1` | ログインを1回する |
| `StageClearCount` | （空欄） | `3` | 任意のステージを3回クリア |
| `SpecificStageClearCount` | `1` | `1` | ステージ1を1回クリア |
| `UnitLevelUpCount` | （空欄） | `1` | ユニットを1回レベルアップ |
| `DefeatBossEnemyCount` | （空欄） | `3` | ボスエネミーを3体撃破 |
| `IdleIncentiveCount` | （空欄） | `1` | 放置収益を1回受け取る |
| `GachaDrawCount` | （空欄） | `1` | ガチャを1回引く |

**Note**: 詳細なcriterion_typeの一覧は、[参考資料のスプレッドシート](https://docs.google.com/spreadsheets/d/1_1XT-Gf60_0wF8fUScpuzYPBURB7LYiq9IcKXxGwzfE/edit?gid=1968140068#gid=1968140068)を参照してください。

---

### 2. MstMissionWeekly（ウィークリーミッション）

毎週リセットされるミッションを定義します。設定項目は**MstMissionDaily**と同じです。

---

### 3. MstMissionAchievement（アチーブメントミッション）

一度達成すれば完了する永続的なミッションを定義します。

#### 列の説明

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | ミッションID（一意キー） | `achievement_1` |
| **criterion_type** | 文字列 |  | 達成条件タイプ（キャメルケース） | `LoginCount`, `SpecificStageClearCount`, `UnitAcquiredCount` など |
| **criterion_value** | 文字列 | ○ | 達成条件値（条件タイプに応じた値、不要な場合は空欄） | ステージ番号`1`, ユニットID`mst_unit_fire_001`など |
| **criterion_count** | 整数 |  | 達成必要回数 | `1`, `10`, `100` |
| **unlock_criterion_type** | 文字列 | ○ | 開放条件タイプ（未設定の場合は`__NULL__`） | `UserLevel`, `SpecificQuestClear`, `__NULL__` |
| **unlock_criterion_value** | 文字列 | ○ | 開放条件値 | プレイヤーレベル`10`, クエストID`mst_quest_001` |
| **unlock_criterion_count** | 整数 |  | 開放条件の達成回数（デフォルト: 0） | `1`, `5` |
| **group_key** | 文字列 | ○ | 分類キー（mission_full_completeのカウント対象）、空欄も可 | `achievement_battle`, `achievement_collection` |
| **mst_mission_reward_group_id** | 文字列 |  | 報酬グループID（外部参照） | `achievement_reward_1` |
| **sort_order** | 整数 |  | 並び順 | `1`, `2`, `3` |
| **destination_scene** | 文字列 |  | ミッションから遷移する画面 | `Home`, `StageSelect`, `UnitList`, `Web` など |
| **description.ja** | 文字列 |  | ミッション説明文（日本語） | `クエストを累計100回クリアしよう！` |

#### 開放条件について

`unlock_criterion_type`、`unlock_criterion_value`、`unlock_criterion_count`を使って、このミッションが表示される条件を設定できます。

**重要**: 開放条件を設定しない場合は、`unlock_criterion_type`に`__NULL__`を指定し、`unlock_criterion_count`を`0`に設定します。

**例**：
- 開放条件なし（最初から表示）: `unlock_criterion_type = "__NULL__"`, `unlock_criterion_value = （空欄）`, `unlock_criterion_count = 0`
- プレイヤーレベル10以上で開放: `unlock_criterion_type = "UserLevel"`, `unlock_criterion_value = "10"`, `unlock_criterion_count = 1`
- 特定ステージクリアで開放: `unlock_criterion_type = "SpecificStageClearCount"`, `unlock_criterion_value = "1"`, `unlock_criterion_count = 1`

---

### 4. MstMissionBeginner（初心者ミッション）

新規プレイヤー向けのチュートリアル的ミッションを定義します。

#### 列の説明

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | ミッションID（一意キー） | `beginner_11` |
| **criterion_type** | 文字列 |  | 達成条件タイプ（キャメルケース） | `LoginCount`, `UnitLevelUpCount`, `FollowCompleted`, `OutpostEnhanceCount` など |
| **criterion_value** | 文字列 | ○ | 達成条件値（不要な場合は空欄） | URL（FollowCompletedの場合）、ステージIDなど |
| **criterion_count** | 整数 |  | 達成必要回数 | `1`, `3`, `5` |
| **unlock_day** | 整数 |  | 開始からの開放日（0=初日） | `1`, `2`, `3` |
| **group_key** | 文字列 | ○ | 分類キー | `Beginner1`, `Beginner2` |
| **bonus_point** | 整数 |  | ミッションボーナスポイント量 | `10`, `20` |
| **mst_mission_reward_group_id** | 文字列 |  | 報酬グループID（外部参照） | `mission_reward_beginner_1` |
| **sort_order** | 整数 |  | 並び順 | `1`, `2`, `3` |
| **destination_scene** | 文字列 |  | ミッションから遷移する画面 | `Home`, `UnitList`, `Web`, `OutPostEnhance` など |
| **title.ja** | 文字列 |  | ミッションタイトル（日本語） | `チュートリアルクエストをクリア` |
| **description.ja** | 文字列 |  | ミッション説明文（日本語） | `最初のクエストをクリアしよう！` |

#### unlock_day（開放日数）について

`unlock_day`は、プレイヤーがゲームを開始してからの経過日数です。
- `1`: 初日（アカウント作成日）から表示
- `2`: 2日目から表示
- `7`: 7日目から表示

**Note**: unlock_dayは1始まりです（0ではありません）。

---

### 5. MstMissionEvent（イベントミッション）

特定のイベントに紐づくミッションを定義します。

#### 列の説明（主要項目のみ）

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | ミッションID（一意キー） | `mission_event_summer_001` |
| **mst_event_id** | 文字列 |  | イベントID（外部参照：MstEvent.id） | `event_summer_2025` |
| **criterion_type** | 文字列 |  | 達成条件タイプ | `advent_battle_clear`, `event_item_collect` |
| **criterion_value** | 文字列 | ○ | 達成条件値 | `advent_summer_stage` |
| **criterion_count** | 整数 |  | 達成必要回数 | `5`, `10` |
| **unlock_criterion_type** | 文字列 | ○ | 開放条件タイプ | `mission_complete` |
| **unlock_criterion_value** | 文字列 | ○ | 開放条件値 | `mission_event_summer_001` |
| **unlock_criterion_count** | 整数 |  | 開放条件の達成回数 | `1` |
| **group_key** | 文字列 | ○ | 分類キー | `event_summer_main`, `event_summer_sub` |
| **mst_mission_reward_group_id** | 文字列 |  | 報酬グループID（外部参照） | `reward_event_summer_001` |
| **sort_order** | 整数 |  | 並び順 | `1`, `2`, `3` |
| **event_category** | 文字列 |  | イベントカテゴリ | `main`, `sub`, `special` |
| **destination_scene** | 文字列 |  | ミッションから遷移する画面 | `EventTop`, `AdventBattleTop` |
| **description.ja** | 文字列 |  | ミッション説明文（日本語） | `降臨バトルを5回クリアしよう！` |

**Note**: イベントミッションは`mst_event_id`で紐づけられたイベント期間中のみ有効です。

---

### 6. MstMissionLimitedTerm（期間限定ミッション）

開催期間が設定された期間限定ミッションを定義します。

#### 列の説明（主要項目のみ）

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | ミッションID（一意キー） | `mission_limited_202507_001` |
| **progress_group_key** | 文字列 |  | 進行グループキー | `limited_july_2025` |
| **criterion_type** | 文字列 |  | 達成条件タイプ | `quest_clear`, `unit_evolution` |
| **criterion_value** | 文字列 | ○ | 達成条件値 | `mst_quest_special_001` |
| **criterion_count** | 整数 |  | 達成必要回数 | `3`, `5` |
| **mission_category** | 文字列 |  | ミッションカテゴリ | `daily`, `weekly`, `total` |
| **mst_mission_reward_group_id** | 文字列 |  | 報酬グループID（外部参照） | `reward_limited_july_001` |
| **sort_order** | 整数 |  | 並び順 | `1`, `2`, `3` |
| **destination_scene** | 文字列 |  | ミッションから遷移する画面 | `QuestTop` |
| **start_at** | 日時 |  | 開催開始日時（JST） | `2025-07-01 15:00:00` |
| **end_at** | 日時 |  | 開催終了日時（JST） | `2025-07-31 14:59:59` |
| **description.ja** | 文字列 |  | ミッション説明文（日本語） | `特別クエストを3回クリアしよう！` |

**Note**: `start_at`から`end_at`の期間中のみミッションが有効です。

---

### 7. MstMissionReward（ミッション報酬）

ミッション達成時に獲得できる報酬の詳細を定義します。

#### 列の説明

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | 報酬ID（一意キー） | `reward_daily_001_1` |
| **group_id** | 文字列 |  | 報酬グルーピングID | `reward_daily_001` |
| **resource_type** | 列挙型 |  | 報酬タイプ | `Exp`, `Coin`, `FreeDiamond`, `Item`, `Emblem`, `Unit` |
| **resource_id** | 文字列 | ○ | 報酬リソースID（ItemやUnitの場合はマスタID） | `mst_item_diamond`, `mst_unit_fire_001` |
| **resource_amount** | 整数 |  | 報酬の個数 | `100`, `500`, `1` |
| **sort_order** | 整数 |  | 並び順（表示順序） | `1`, `2`, `3` |

#### resource_typeと設定の組み合わせ

| resource_type | resource_id | resource_amount | 意味 |
|--------------|-------------|-----------------|------|
| `Exp` | `null` | `100` | 経験値100を付与 |
| `Coin` | `null` | `500` | コイン500を付与 |
| `FreeDiamond` | `null` | `10` | 無償ダイヤ10個を付与 |
| `Item` | `mst_item_potion_001` | `3` | アイテム「ポーション」を3個付与 |
| `Emblem` | `mst_emblem_fire` | `1` | エンブレム「炎」を1個付与 |
| `Unit` | `mst_unit_fire_001` | `1` | ユニット「炎の戦士」を1体付与 |

**Note**: 1つのミッションに複数の報酬を設定する場合は、同じ`group_id`で複数レコードを作成します。

---

### 8. MstMissionDailyBonus（デイリーミッションボーナス）

デイリーミッションのボーナスポイント累積による追加報酬を定義します。

#### 列の説明

| 列名 | 型 | NULL許容 | 説明 | 設定例 |
|------|-----|---------|------|--------|
| **id** | 文字列 |  | ボーナスID（一意キー） | `daily_bonus_001` |
| **mission_daily_bonus_type** | 列挙型 |  | ボーナスタイプ | `DailyBonus` |
| **login_day_count** | 整数 |  | ログイン日数（累積） | `7`, `14`, `30` |
| **mst_mission_reward_group_id** | 文字列 |  | 報酬グループID（外部参照） | `reward_daily_bonus_001` |
| **sort_order** | 整数 |  | 並び順 | `1`, `2`, `3` |

**Note**: デイリーミッションで獲得したボーナスポイントが一定値に達すると、追加報酬が獲得できます。現在、`mission_daily_bonus_type`は`DailyBonus`のみサポートされています。

---

## 設定例

### デイリーミッションの設定例

#### MstMissionDaily

| id | criterion_type | criterion_value | criterion_count | group_key | bonus_point | mst_mission_reward_group_id | sort_order | destination_scene | description.ja |
|-----|----------------|-----------------|-----------------|-----------|-------------|----------------------------|-----------|------------------|----------------|
| daily_1 | LoginCount | （空欄） | 1 | Daily1 | 10 | （空欄） | 1 | Home | ログインしよう！ |
| daily_2 | StageClearCount | （空欄） | 1 | Daily1 | 10 | （空欄） | 2 | StageSelect | ステージを1回クリアしよう！ |
| daily_3 | StageClearCount | （空欄） | 3 | Daily1 | 20 | （空欄） | 3 | StageSelect | ステージを3回クリアしよう！ |
| daily_4 | UnitLevelUpCount | （空欄） | 1 | Daily1 | 10 | （空欄） | 4 | UnitList | ユニットを1回レベルアップしよう！ |
| daily_5 | DefeatBossEnemyCount | （空欄） | 1 | Daily1 | 10 | （空欄） | 5 | Home | ボスエネミーを1体撃破しよう！ |

#### MstMissionReward

| id | group_id | resource_type | resource_id | resource_amount | sort_order |
|-----|----------|---------------|-------------|-----------------|-----------|
| mission_reward_1 | achievement_reward_1 | Exp | （空欄） | 5 | 1 |
| mission_reward_2 | achievement_reward_2 | Exp | （空欄） | 300 | 1 |
| mission_reward_3 | achievement_reward_3 | Coin | （空欄） | 10000 | 1 |

---

### アチーブメントミッションの設定例（開放条件付き）

#### MstMissionAchievement

| id | criterion_type | criterion_value | criterion_count | unlock_criterion_type | unlock_criterion_value | unlock_criterion_count | group_key | mst_mission_reward_group_id | sort_order | destination_scene | description.ja |
|-----|----------------|-----------------|-----------------|----------------------|----------------------|----------------------|-----------|----------------------------|-----------|------------------|----------------|
| achievement_1 | LoginCount | （空欄） | 1 | __NULL__ | （空欄） | 0 | （空欄） | achievement_reward_1 | 1 | Home | 1回ログインしよう！ |
| achievement_2 | LoginCount | （空欄） | 2 | __NULL__ | （空欄） | 0 | （空欄） | achievement_reward_2 | 2 | Home | 2回ログインしよう！ |
| achievement_8 | SpecificStageClearCount | 1 | 1 | __NULL__ | （空欄） | 0 | （空欄） | achievement_reward_8 | 8 | StageSelect | ステージ1をクリアしよう！ |
| achievement_9 | SpecificStageClearCount | 2 | 1 | __NULL__ | （空欄） | 0 | （空欄） | achievement_reward_9 | 9 | StageSelect | ステージ2をクリアしよう！ |

**Note**: 開放条件を設定しない場合は、`unlock_criterion_type`に`__NULL__`、`unlock_criterion_count`に`0`を指定します。

---

### 初心者ミッションの設定例（日数制限付き）

#### MstMissionBeginner

| id | criterion_type | criterion_value | criterion_count | unlock_day | group_key | bonus_point | mst_mission_reward_group_id | sort_order | destination_scene | title.ja | description.ja |
|-----|----------------|-----------------|-----------------|-----------|-----------|-------------|----------------------------|-----------|------------------|----------|----------------|
| beginner_11 | LoginCount | （空欄） | 1 | 1 | Beginner1 | 20 | mission_reward_beginner_1 | 1 | Home | ログイン | ログインしよう！ |
| beginner_12 | UnitLevelUpCount | （空欄） | 1 | 1 | Beginner1 | 20 | mission_reward_beginner_2 | 2 | UnitList | ユニット強化 | ユニットを1回レベルアップしよう！ |
| beginner_13 | FollowCompleted | https://www.google.co.jp/ | 1 | 1 | Beginner1 | 20 | mission_reward_beginner_3 | 3 | Web | フォロー | 公式をフォローしよう！ |
| beginner_21 | LoginCount | （空欄） | 2 | 2 | Beginner2 | 20 | mission_reward_beginner_1 | 1 | Home | 2回ログイン | 2回ログインしよう！ |

---

## 注意事項とチェックポイント

### 必須確認事項

#### 1. IDの一意性

- [ ] すべてのテーブルで`id`フィールドは一意であること
- [ ] 他のミッション・コンテンツとIDが重複しないこと
- [ ] ID命名規則に従っていること（例: `mission_daily_001`, `mission_achievement_battle_001`）

#### 2. 外部キーの整合性

- [ ] `mst_mission_reward_group_id`がMstMissionRewardの`group_id`と一致すること
- [ ] `mst_event_id`（イベントミッションの場合）がMstEventの`id`と一致すること
- [ ] `criterion_value`や`resource_id`に指定したマスタIDが対応するマスタテーブルに存在すること

#### 3. 達成条件の設定

- [ ] `criterion_type`と`criterion_value`の組み合わせが正しいこと
- [ ] `criterion_count`が妥当な値であること（達成不可能な値になっていないか）
- [ ] 開放条件（`unlock_criterion_*`）が設定されている場合、循環参照になっていないこと

#### 4. 報酬設定の確認

- [ ] MstMissionRewardに対応する報酬レコードが存在すること
- [ ] `resource_type`と`resource_id`の組み合わせが正しいこと
  - `Exp`, `Coin`, `FreeDiamond`の場合は`resource_id`がnull
  - `Item`, `Emblem`, `Unit`の場合は`resource_id`に対応するマスタIDを指定
- [ ] `resource_amount`が妥当な値であること（0や負の数になっていないか）

#### 5. 並び順の設定

- [ ] `sort_order`が適切に設定されていること（表示順序が意図通りか）
- [ ] 同じグループ内で`sort_order`が重複していないこと

#### 6. 多言語設定

- [ ] `.ja`サフィックスの説明文が全てのミッションに設定されていること
- [ ] 他の言語（`.en`など）が必要な場合、全てのミッションに設定されていること

#### 7. 期間設定（期間限定ミッションの場合）

- [ ] `start_at`と`end_at`が正しい日時フォーマット（JST）で設定されていること
- [ ] `start_at`が`end_at`よりも前であること
- [ ] 他のイベントやミッションと期間が重複していても問題ないか確認

#### 8. 初心者ミッションの開放日数

- [ ] `unlock_day`が段階的に設定されていること（0, 1, 2, 3...）
- [ ] 新規プレイヤーが適切なペースで進められる設計になっているか

### よくあるミス

#### 1. criterion_typeの値の間違い

**誤**: `criterion_type = "quest_clear"` （スネークケース）
**正**: `criterion_type = "SpecificQuestClear"` （キャメルケース）

**重要**: すべての`criterion_type`と`unlock_criterion_type`の値はキャメルケースで記述する必要があります。正しい値は[参考資料のスプレッドシート](https://docs.google.com/spreadsheets/d/1_1XT-Gf60_0wF8fUScpuzYPBURB7LYiq9IcKXxGwzfE/edit?gid=1968140068#gid=1968140068)またはサーバーコードの`MissionCriterionType` ENUMを参照してください。

#### 2. unlock_criterion_typeのNULL値の設定ミス

**誤**: `unlock_criterion_type = null` または `unlock_criterion_type = ""` （空欄）
**正**: `unlock_criterion_type = "__NULL__"`

開放条件を設定しない場合は、`unlock_criterion_type`に`__NULL__`（アンダースコア2つ+NULL+アンダースコア2つ）を指定し、`unlock_criterion_count`を`0`に設定します。

#### 3. 報酬グループIDの設定漏れ

**誤**: MstMissionDailyに`mst_mission_reward_group_id`を設定したが、MstMissionRewardに対応する報酬レコードがない

**正**: MstMissionRewardに`group_id`と一致するレコードを作成する。報酬なしの場合は`mst_mission_reward_group_id`を空欄にする。

#### 4. criterion_valueの設定ミス

**誤**: `criterion_type = "LoginCount"`で`criterion_value = "1"`を指定
**正**: 汎用的な条件の場合は`criterion_value`を空欄にする。`Specific`で始まるcriterion_typeの場合のみ、対象のリソースIDやステージ番号を指定する。

#### 5. 開放条件の循環参照

**誤**:
- `achievement_1`の開放条件が`achievement_2`
- `achievement_2`の開放条件が`achievement_1`

**正**: 開放条件は一方向にのみ設定し、循環参照を避ける

#### 6. resource_idの設定ミス

**誤**: `resource_type = "Exp"`で`resource_id = "mst_item_001"`を指定
**正**: `Exp`, `Coin`, `FreeDiamond`の場合は`resource_id`を空欄にする。`Item`, `Emblem`, `Unit`の場合のみリソースIDを指定する。

#### 7. destination_sceneの値の間違い

**誤**: `destination_scene = "QuestTop"` または `destination_scene = "GachaTop"`
**正**: `destination_scene = "StageSelect"` または `destination_scene = "Gacha"`

実際に使用されている値: `Home`, `StageSelect`, `UnitList`, `IdleIncentive`, `OutPostEnhance`, `Gacha`, `Web`, `AdventBattle`

### テスト時の確認項目

- [ ] ミッションが正しく表示されるか
- [ ] 達成条件を満たすとミッションがクリア状態になるか
- [ ] 報酬が正しく付与されるか
- [ ] 開放条件が設定されたミッションが正しいタイミングで表示されるか
- [ ] デイリー/ウィークリーミッションが期待通りにリセットされるか
- [ ] 期間限定ミッションが期間内のみ表示されるか
- [ ] 初心者ミッションが指定日数後に正しく開放されるか

---

## 付録：主要なcriterion_type一覧

以下は、サーバーコードの`MissionCriterionType` ENUMから抽出した主要な達成条件タイプです。詳細な説明と使用方法については、[参考資料のスプレッドシート](https://docs.google.com/spreadsheets/d/1_1XT-Gf60_0wF8fUScpuzYPBURB7LYiq9IcKXxGwzfE/edit?gid=1968140068#gid=1968140068)を参照してください。

### ミッション関連
- `MissionClearCount` - ミッションクリア回数
- `SpecificMissionClearCount` - 特定ミッションクリア回数
- `MissionBonusPoint` - ミッションボーナスポイント

### ステージ・クエスト関連
- `SpecificQuestClear` - 特定クエストクリア
- `QuestClearCount` - クエストクリア回数
- `StageClearCount` - ステージクリア回数
- `SpecificStageClearCount` - 特定ステージクリア回数
- `SpecificStageChallengeCount` - 特定ステージ挑戦回数
- `SpecificUnitStageClearCount` - 特定ユニットでステージクリア回数
- `SpecificUnitStageChallengeCount` - 特定ユニットでステージ挑戦回数

### バトル・敵関連
- `DefeatEnemyCount` - 敵撃破数
- `DefeatBossEnemyCount` - ボスエネミー撃破数
- `EnemyDiscoveryCount` - 敵発見数
- `SpecificEnemyDiscoveryCount` - 特定敵発見数
- `SpecificSeriesEnemyDiscoveryCount` - 特定シリーズ敵発見数

### ログイン関連
- `LoginCount` - ログイン回数
- `LoginContinueCount` - 連続ログイン日数
- `DaysFromUnlockedMission` - ミッション開放からの経過日数

### プレイヤー関連
- `UserLevel` - プレイヤーレベル
- `CoinCollect` - コイン獲得数
- `CoinUsedCount` - コイン使用回数

### 図鑑関連
- `ArtworkCompletedCount` - 図鑑完成数
- `SpecificArtworkCompletedCount` - 特定図鑑完成数
- `SpecificSeriesArtworkCompletedCount` - 特定シリーズ図鑑完成数

### ユニット関連
- `UnitLevel` - ユニットレベル
- `UnitLevelUpCount` - ユニットレベルアップ回数
- `SpecificUnitLevel` - 特定ユニットレベル
- `SpecificUnitRankUpCount` - 特定ユニットランクアップ回数
- `SpecificUnitGradeUpCount` - 特定ユニットグレードアップ回数
- `UnitAcquiredCount` - ユニット獲得数
- `SpecificUnitAcquiredCount` - 特定ユニット獲得数
- `SpecificSeriesUnitAcquiredCount` - 特定シリーズユニット獲得数

### ゲート（拠点）関連
- `OutpostEnhanceCount` - 拠点強化回数
- `SpecificOutpostEnhanceLevel` - 特定拠点強化レベル

### システム関連
- `ReviewCompleted` - レビュー完了
- `FollowCompleted` - フォロー完了
- `AccountCompleted` - アカウント作成完了
- `IaaCount` - 広告視聴回数
- `AccessWeb` - Web アクセス

### ガチャ関連
- `GachaDrawCount` - ガチャ実行回数
- `SpecificGachaDrawCount` - 特定ガチャ実行回数

### アイテム関連
- `SpecificItemCollect` - 特定アイテム獲得

### エンブレム関連
- `EmblemAcquiredCount` - エンブレム獲得数
- `SpecificEmblemAcquiredCount` - 特定エンブレム獲得数
- `SpecificSeriesEmblemAcquiredCount` - 特定シリーズエンブレム獲得数

### 放置収益関連
- `IdleIncentiveCount` - 放置収益受取回数
- `IdleIncentiveQuickCount` - 放置収益クイック受取回数

### 降臨バトル関連
- `AdventBattleChallengeCount` - 降臨バトル挑戦回数
- `AdventBattleTotalScore` - 降臨バトル累積スコア
- `AdventBattleScore` - 降臨バトルスコア

### PVP関連
- `PvpChallengeCount` - PVP挑戦回数
- `PvpWinCount` - PVP勝利回数

**Note**: すべてのcriterion_typeはキャメルケースで記述する必要があります。最新の完全なリストはサーバーコードの`app/Domain/Mission/Enums/MissionCriterionType.php`を参照してください。
