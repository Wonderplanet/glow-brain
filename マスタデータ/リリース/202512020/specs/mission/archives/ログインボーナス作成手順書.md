# ログインボーナス作成手順書

## 概要

イベント期間中の日別ログインボーナスを設定するためのマスタデータ作成手順です。

**参照する運営仕様書**: `02_施策.csv` の「◆ログインボーナス」セクション

---

## 必要な情報（運営仕様書から取得）

| 項目 | 例 |
|------|-----|
| 施策名称 | 【推しの子】いいジャン祭 特別ログインボーナス |
| 開催期間 | 2026-01-01 00:00:00 ～ 2026-01-16 03:59:59 |
| ログイン日数 | 15日分 |
| 日別報酬 | 各日の報酬アイテム、個数 |

---

## 作成するマスタデータテーブル

1. **MstMissionEventDailyBonusSchedule.csv** - ログインボーナススケジュール
2. **MstMissionEventDailyBonus.csv** - 日別ログインボーナス
3. **MstMissionReward.csv** - 各日の報酬内容

---

## 作成手順

### Step 1: スケジュールを作成（MstMissionEventDailyBonusSchedule.csv）

期間全体のスケジュールを1レコード作成します。

| カラム | 設定値 | 例 |
|--------|--------|-----|
| ENABLE | `e` | e |
| id | `{event_id}_daily_bonus` | event_osh_00001_daily_bonus |
| release_key | リリースキー | 202512020 |
| mst_event_id | イベントID | event_osh_00001 |
| start_at | 開始日時 | 2026-01-01 00:00:00 |
| end_at | 終了日時 | 2026-01-16 03:59:59 |

**ポイント**:
- idは `{イベントID}_daily_bonus` の命名規則
- start_at/end_atは運営仕様書の期間と完全一致させる

---

### Step 2: 日別ログインボーナスを作成（MstMissionEventDailyBonus.csv）

ログイン日数分（15日分）のレコードを作成します。

| カラム | 設定値 | 例（1日目） | 例（2日目） |
|--------|--------|------------|------------|
| ENABLE | `e` | e | e |
| id | `{schedule_id}_{日数2桁}` | event_osh_00001_daily_bonus_01 | event_osh_00001_daily_bonus_02 |
| release_key | リリースキー | 202512020 | 202512020 |
| mst_mission_event_daily_bonus_schedule_id | Step1で作成したID | event_osh_00001_daily_bonus | event_osh_00001_daily_bonus |
| login_day_count | ログイン日数 | 1 | 2 |
| mst_mission_reward_group_id | 報酬グループID | event_osh_00001_daily_bonus_01 | event_osh_00001_daily_bonus_02 |
| sort_order | 表示順 | 1 | 1 |
| 備考 | （任意）報酬名 | 【推しの子】SSR確定ガシャ | プリズム |

**ポイント**:
- login_day_countは1から順番に設定
- mst_mission_reward_group_idは次のStepで作成する報酬のgroup_idと一致させる

---

### Step 3: 報酬を作成（MstMissionReward.csv）

各日の報酬内容を設定します。1日につき1レコード作成します。

| カラム | 設定値 | 例（1日目：SSR確定ガシャ） | 例（2日目：プリズム150） |
|--------|--------|---------------------------|------------------------|
| ENABLE | `e` | e | e |
| id | 連番 | mission_reward_441 | mission_reward_442 |
| release_key | リリースキー | 202512020 | 202512020 |
| group_id | Step2のmst_mission_reward_group_id | event_osh_00001_daily_bonus_01 | event_osh_00001_daily_bonus_02 |
| resource_type | 報酬タイプ | Item | FreeDiamond |
| resource_id | リソースID | ticket_osh_10000 | （プリズムは空欄） |
| resource_amount | 個数 | 1 | 150 |
| sort_order | 表示順 | 1 | 1 |
| 備考 | （任意）報酬名 | 【推しの子】SSR確定ガシャ | プリズム |

**報酬タイプの対応表**:
| 報酬名 | resource_type | resource_id | 備考 |
|--------|--------------|-------------|------|
| プリズム | FreeDiamond | （空欄） | - |
| コイン | Coin | （空欄） | - |
| アイテム（チケット、メダル等） | Item | アイテムID | ticket_xxx, item_xxx等 |
| エンブレム | Emblem | エンブレムID | emblem_xxx |

---

## チェックリスト

作成後、以下を確認してください：

- [ ] ログイン日数分のMstMissionEventDailyBonusレコードが作成されているか
- [ ] 各日のlogin_day_countが1から連番になっているか
- [ ] 報酬グループIDが正しく紐づいているか（Step2とStep3）
- [ ] 開催期間が運営仕様書と一致しているか
- [ ] 報酬の個数が運営仕様書と一致しているか
- [ ] resource_typeとresource_idの組み合わせが正しいか

---

## 注意点

### 期間設定
- ログインボーナスの期間は、開始日時を **0:00** または **4:00** にすることが多い
- 終了日時は **3:59:59** または **23:59:59** など、日付の境界に注意

### 報酬の日数と期間
- 運営仕様書に「ログイン日数1日余り」などの記載がある場合、期間の日数とログイン日数が一致しないことがある
- 例：期間16日間、ログイン日数15日分（16日目の報酬なし）

### IDの命名規則
- スケジュールID: `{event_id}_daily_bonus`
- 日別ボーナスID: `{schedule_id}_{日数2桁}`
- 報酬グループID: `{schedule_id}_{日数2桁}` （日別ボーナスIDと同じ）

---

## 実例（202512020リリース）

**イベント**: 【推しの子】いいジャン祭
**期間**: 2026-01-01 00:00:00 ～ 2026-01-16 03:59:59
**ログイン日数**: 15日

### 作成したレコード数
- MstMissionEventDailyBonusSchedule: 1レコード
- MstMissionEventDailyBonus: 15レコード
- MstMissionReward: 15レコード

### 主な報酬
- 1日目: 【推しの子】SSR確定ガシャチケット×1
- 2日目: プリズム×150
- 4日目: ピックアップガシャチケット×1
- 10日目: スペシャルガシャチケット×1

---

**作成完了後**: 次は各種クエストやミッションの作成に進んでください。
