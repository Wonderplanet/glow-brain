# ガチャ関連マスタデータ生成レポート

## 要件概要

「幼稚園WARS いいジャン祭ピックアップガシャ」のマスタデータを生成しました。

- **ガチャ名**: 幼稚園WARS いいジャン祭ピックアップガシャ
- **ガチャID**: Pickup_you_001
- **種別**: ピックアップガチャ
- **開催期間**: 2026年2月2日 15:00 〜 2026年3月2日 10:59
- **天井設定**: 100回目でピックアップURキャラ確定
- **確定枠**: 10連のうち1体はSR以上確定

## 生成データ一覧

### OprGacha.csv
- **レコード数**: 1件
- **主要カラム**: id, gacha_type, prize_group_id, fixed_prize_group_id, start_at, end_at
- **データ概要**: ガチャ本体の基本設定（ピックアップガチャ、天井100回、10連SR確定）

### OprGachaPrize.csv
- **レコード数**: 77件
- **主要カラム**: id, group_id, resource_type, resource_id, weight, pickup
- **データ概要**: ガチャ排出物の設定
  - 通常枠（Pickup_you_001グループ）: 43件
    - ピックアップUR: 1件（chara_you_00001、weight=702）
    - UR: 13件（weight=162/体）
    - ピックアップSSR: 1件（chara_you_00101、weight=1404）
    - SSR: 9件（weight=884/体）
    - SR: 10件（weight=3276/体）
    - R: 9件（weight=5408/体）
  - SR確定枠（fixd_Pickup_you_001グループ）: 34件
    - ピックアップUR: 1件（weight=1755）
    - UR: 13件（weight=405/体）
    - ピックアップSSR: 1件（weight=3510）
    - SSR: 9件（weight=2210/体）
    - SR: 10件（weight=20358/体）

## データ設計の詳細

### ID範囲
- OprGacha: Pickup_you_001
- OprGachaPrize: 1 ~ 77（通番）

### 命名規則
- ガチャIDパターン: `Pickup_<作品略称>_<連番3桁>`（例: Pickup_you_001）
- グループIDパターン:
  - 通常枠: ガチャIDと同じ（例: Pickup_you_001）
  - 確定枠: `fixd_<ガチャID>`（例: fixd_Pickup_you_001）

### ピックアップキャラクター
- **ピックアップUR**: 元殺し屋の新人教諭 リタ（chara_you_00001）
- **ピックアップSSR**: ルーク（chara_you_00101）

### 参照した既存データ
- 要件ファイル: `20260202_幼稚園WARS いいジャン祭_仕様書.xlsx`
  - シート「幼稚園WARS いいジャン祭ピックアップガシャ_設計書」からガチャ設定と排出物リストを取得

## スキーマ検証と修正

### OprGacha.csv
- ✅ スキーマチェック完了: 問題なし
- ✅ ヘッダー構造: 34カラム（テンプレートと一致）
- ✅ ENUM型検証: gacha_type=Pickup, appearance_condition=Always, unlock_condition_type=None（すべて正しい）
- ✅ 日時形式検証: YYYY-MM-DD HH:MM:SS形式に準拠

### OprGachaPrize.csv
- ✅ スキーマチェック完了: 問題なし
- ✅ ヘッダー構造: 9カラム（テンプレートと一致）
- ✅ PRIMARY KEY検証: ID重複なし（1〜77の連番）
- ✅ ENUM型検証: resource_type=Unit（すべて正しい）

## データ整合性チェック

- [x] **スキーマJSONとの整合性を確認**
- [x] **CSVテンプレートファイルのヘッダーに完全に従っている**
- [x] IDの重複がないことを確認
- [x] 必須カラムがすべて埋まっている
- [x] 日時形式が正しい（2026-02-02 15:00:00 〜 2026-03-02 10:59:59）
- [x] 外部キー制約を満たしている（prize_group_id と fixed_prize_group_id がOprGachaPrizeのgroup_idに対応）
- [x] 命名規則に準拠している
- [x] ENUM型の値が許可された値のみであることを確認
- [x] データ型が正しいことを確認
- [x] **要件に含まれる全てのマスタデータが生成されている**

## 排出確率の検証

### 通常枠（Pickup_you_001グループ）
- 重み合計: 93,600
- ピックアップUR: 0.75%（702/93600）
- UR: 2.25%（13体 × 162/93600）
- ピックアップSSR: 1.5%（1404/93600）
- SSR: 8.5%（9体 × 884/93600）
- SR: 35%（10体 × 3276/93600）
- R: 52%（9体 × 5408/93600）
- **合計**: 100%

### SR確定枠（fixd_Pickup_you_001グループ）
- 重み合計: 234,000
- ピックアップUR: 0.75%（1755/234000）
- UR: 2.25%（13体 × 405/234000）
- ピックアップSSR: 1.5%（3510/234000）
- SSR: 8.5%（9体 × 2210/234000）
- SR: 87%（10体 × 20358/234000）
- **合計**: 100%

## 備考

### 生成済み
- 幼稚園WARS いいジャン祭ピックアップガシャの全マスタデータを生成しました。

### バレンタインガチャについて
要件ファイルには「バレンタインガチャ」の設計書も含まれていましたが、これは別の施策（2月追加課金施策）として扱われるため、今回の「いいジャン祭」施策のマスタデータには含めませんでした。

### 次のステップ
このREPORT_gacha.mdは部分レポートです。親ワークフロー（masterdata-full-workflow）が他のコンテンツタイプ（battle、mission、shop）の部分レポートと統合して、最終的なREPORT.mdを生成します。
