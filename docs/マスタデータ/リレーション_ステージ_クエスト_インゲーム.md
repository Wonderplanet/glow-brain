# GLOWマスタデータ リレーション仕様書

## クエスト、ステージ、インゲーム テーブル周り

最終更新日: 2025-12-29

---

## 概要

本ドキュメントでは、GLOWゲームプロジェクトにおけるクエスト、ステージ、インゲーム関連のマスタテーブルのリレーション（関連性）について説明します。

### 調査方法
1. glow-masterdataのCSVファイルのカラム構造とデータサンプルを確認
2. glow-serverのPHPコード（Laravel）でのマスタテーブル使用箇所を調査
3. glow-clientのC#コード（Unity）でのマスタテーブル使用箇所を調査

---

## テーブル間の主要な関係性

```
MstQuest (クエスト)
    ↓ 1:N
MstStage (ステージ)
    ↓ 1:1
MstInGame (インゲーム設定)
    ↓
MstPage (敵配置パターン)
MstEnemyOutpost (敵拠点)
MstEnemyStageParameter (敵パラメータ)
    ↓
MstEnemyCharacter (敵キャラクター)
```

---

## 1. 主要テーブルのリレーション

### 1.1 MstQuest → MstStage (1対多)

**リレーション**: `MstStage.mst_quest_id` → `MstQuest.id`

**説明**: 1つのクエストには複数のステージが属する

**実装箇所**:
- サーバー: `MstStageRepository::getByMstQuestId(string $mstQuestId)`
  - ファイル: `projects/glow-server/api/app/Domain/Resource/Mst/Repositories/MstStageRepository.php`
- クライアント: `IMstStageDataRepository::GetMstStagesFromMstQuestId(MasterDataId mstQuestId)`
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Core/Domain/Definitions/Repositories/MasterData/IMstStageDataRepository.cs`

**使用例**:
```php
// サーバー側（PHP）
$stages = $this->mstStageRepository->getByMstQuestId($questId);
```

```csharp
// クライアント側（C#）
var stages = MstStageDataRepository.GetMstStagesFromMstQuestId(questId);
```

---

### 1.2 MstStage → MstInGame (1対1)

**リレーション**: `MstStage.mst_in_game_id` → `MstInGame.id`

**説明**: 各ステージは1つのインゲーム設定を参照する。インゲーム設定は複数のステージで再利用可能。

**重要な変更履歴**:
2024年11月のマイグレーションで、ステージ固有だったインゲーム関連のカラムが`mst_in_games`テーブルに移動されました。これにより、インゲーム設定を複数のステージや降臨バトルで再利用できるようになりました。

**移動されたカラム**:
- `bgm_asset_key` (BGM)
- `boss_bgm_asset_key` (ボスBGM)
- `loop_background_asset_key` (ループ背景)
- `player_outpost_asset_key` (プレイヤー拠点)
- `mst_page_id` (敵配置パターン)
- `mst_enemy_outpost_id` (敵拠点)
- `boss_mst_enemy_stage_parameter_id` (ボス敵パラメータ)
- `normal_enemy_hp_coef` (通常敵HP係数)
- `normal_enemy_attack_coef` (通常敵攻撃力係数)
- `normal_enemy_speed_coef` (通常敵速度係数)
- `boss_enemy_hp_coef` (ボス敵HP係数)
- `boss_enemy_attack_coef` (ボス敵攻撃力係数)
- `boss_enemy_speed_coef` (ボス敵速度係数)

**実装箇所**:
- サーバー: ステージ開始時に自動的にInGame設定を参照
  - ファイル: `projects/glow-server/api/app/Domain/Stage/UseCases/StageStartUseCase.php`
- クライアント: StageモデルにInGameデータをJOINして統合
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Core/Data/Repositories/MasterData/MasterDataRepository.cs`
  - 実装: `CreateMstStageModels()` メソッド (187-236行目)

**使用例**:
```csharp
// クライアント側: StageとInGameをJOIN
var stages = datas
    .Join(inGameDatas, stage => stage.data.MstInGameId, inGame => inGame.Id,
          (stage, inGameData) => (stage.data, stage.i18n, inGameData))
    .Select(stageAndInGame =>
        StageDataTranslator.ToStageModel(
            stageAndInGame.data,
            stageAndInGame.i18n,
            stageAndInGame.inGameData,
            stageAndInGame.inGameI18n));
```

---

### 1.3 MstInGame → MstEnemyStageParameter (ボス敵)

**リレーション**: `MstInGame.boss_mst_enemy_stage_parameter_id` → `MstEnemyStageParameter.id`

**説明**: インゲーム設定からボス敵のパラメータを参照

**実装箇所**:
- サーバー: `MstInGame` モデル
  - ファイル: `projects/glow-server/api/app/Domain/Resource/Mst/Models/MstInGame.php`
- クライアント: バトル初期化処理で敵キャラクター生成時に使用
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Scenes/InGame/Domain/Battle/ModelFactories/CharacterUnitFactory.cs`

**使用例**:
```csharp
// クライアント側: 敵キャラクター生成
public CharacterUnitModel GenerateEnemyCharacterUnit(
    MstEnemyStageParameterModel stageParameter,
    UnitGenerationModel unitGenerationModel,
    ...)
{
    var unitCoef = unitGenerationModel.UnitCoef;
    var hp = stageParameter.Hp * unitCoef.StageHpCoef * unitCoef.InGameSequenceHpCoef;
    var attackPower = stageParameter.AttackPower.Value
                      * (decimal)unitCoef.StageAttackPowerCoef
                      * (decimal)unitCoef.InGameSequenceAttackPowerCoef;
    // ...
}
```

---

### 1.4 MstEnemyStageParameter → MstEnemyCharacter

**リレーション**: `MstEnemyStageParameter.mst_enemy_character_id` → `MstEnemyCharacter.id`

**説明**: 敵パラメータから敵キャラクター定義を参照

**CSVサンプル**:
```csv
MstEnemyStageParameter.csv:
ENABLE,release_key,id,mst_enemy_character_id,character_unit_kind,role_type,color,sort_order,hp,damage_knock_back_count,...
e,1,e_1,sotai11,Normal,Attack,Red,1,120,2,...
e,1,e_2,dan002,Normal,Attack,Blue,2,500,2,...
```

---

### 1.5 MstInGame → MstPage (敵配置パターン)

**リレーション**: `MstInGame.mst_page_id` → `MstPage.id`

**説明**: インゲーム設定から敵の配置パターン（ページ）を参照

---

### 1.6 MstInGame → MstEnemyOutpost (敵拠点)

**リレーション**: `MstInGame.mst_enemy_outpost_id` → `MstEnemyOutpost.id`

**説明**: インゲーム設定から敵拠点を参照

---

## 2. Quest関連のリレーション

### 2.1 MstQuestBonusUnit → MstQuest, MstUnit

**リレーション**:
- `MstQuestBonusUnit.mst_quest_id` → `MstQuest.id`
- `MstQuestBonusUnit.mst_unit_id` → `MstUnit.id`

**説明**: クエストごとのボーナスユニット設定。特定のユニットを使用するとコインボーナスが得られる。

**CSVサンプル**:
```csv
MstQuestBonusUnit.csv:
ENABLE,id,mst_quest_id,mst_unit_id,coin_bonus_rate,start_at,end_at,release_key
e,1,13,chara_gom_00001,0.1,"2024-01-01 0:00:00","2029-10-01 15:00:00",1
e,2,13,chara_dan_00001,0.1,"2024-01-01 0:00:01","2029-10-01 15:00:00",1
```

**実装箇所**:
- クライアント: `MstQuestBonusUnitModel`
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Core/Domain/Models/MasterData/MstQuestBonusUnitModel.cs`

---

### 2.2 MstQuestEventBonusSchedule → MstQuest

**リレーション**: `MstQuestEventBonusSchedule.mst_quest_id` → `MstQuest.id`

**説明**: クエストごとのイベントボーナススケジュール

**CSVサンプル**:
```csv
MstQuestEventBonusSchedule.csv:
ENABLE,id,mst_quest_id,event_bonus_group_id,start_at,end_at,release_key
e,1,13,bonus_enhance_01,"2024-01-01 0:00:00","2029-10-01 15:00:00",1
e,1,quest_raid_kai_00001,raid_kai_00001,"2025-03-27 00:00:00","2025-06-13 00:00:00",1
```

**実装箇所**:
- サーバー: スタミナ消費計算時に使用
  - ファイル: `projects/glow-server/api/app/Domain/Stage/Services/StageStartQuestService.php`

---

### 2.3 MstQuestI18n → MstQuest

**リレーション**: `MstQuestI18n.mst_quest_id` → `MstQuest.id`

**説明**: クエストの多言語対応データ（日本語、英語等）

**CSVサンプル**:
```csv
MstQuestI18n.csv:
ENABLE,release_key,id,mst_quest_id,language,name,category_name,flavor_text
e,1,1_ja,1,ja,01.ダンダダン,,"幽霊を信じないオカルトマニアの少年・高倉と、..."
e,1,2_ja,2,ja,02.姫様拷問の時間です,,"国王軍第三騎士団..."
```

---

## 3. Stage関連のリレーション

### 3.1 MstStageReward → MstStage

**リレーション**: `MstStageReward.mst_stage_id` → `MstStage.id`

**説明**: ステージごとの報酬設定（初回クリア報酬、毎回獲得報酬、ランダム報酬）

**CSVサンプル**:
```csv
MstStageReward.csv:
ENABLE,id,mst_stage_id,reward_category,resource_type,resource_id,percentage,sort_order,resource_amount,weight,release_key
e,1,develop_001,FirstClear,Coin,,1,1,2500,100,1
e,2,develop_001,FirstClear,Item,box_glo_00001,1,1,40,100,1
```

**実装箇所**:
- サーバー: `MstStageRewardRepository::getFirstClearRewardsByMstStageId(string $mstStageId)`
  - ファイル: `projects/glow-server/api/app/Domain/Resource/Mst/Repositories/MstStageRewardRepository.php`
- クライアント: `MstStageRewardModel`
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Core/Domain/Models/MasterData/MstStageRewardModel.cs`

---

### 3.2 MstStageEventReward → MstStage

**リレーション**: `MstStageEventReward.mst_stage_id` → `MstStage.id`

**説明**: イベントステージ専用の報酬設定

**CSVサンプル**:
```csv
MstStageEventReward.csv:
ENABLE,id,mst_stage_id,reward_category,resource_type,resource_id,resource_amount,percentage,sort_order,release_key
e,1,event_test_fragment_n1,FirstClear,Coin,,2500,100,1,1
e,2,event_test_fragment_n1,FirstClear,Item,box_glo_00001,40,100,2,1
```

**実装箇所**:
- サーバー: `StageService::getFirstClearRewardsByMstStageId()`
  - ファイル: `projects/glow-server/api/app/Domain/Stage/Services/StageService.php`
- クライアント: `HomeStageInfoUseCases`
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Scenes/Home/Domain/UseCases/HomeStageInfoUseCases.cs`

---

### 3.3 MstStageClearTimeReward → MstStage

**リレーション**: `MstStageClearTimeReward.mst_stage_id` → `MstStage.id`

**説明**: クリアタイムに応じた報酬設定（スピードアタック報酬）

**CSVサンプル**:
```csv
MstStageClearTimeReward.csv:
ENABLE,id,mst_stage_id,upper_clear_time_ms,resource_type,resource_id,resource_amount,release_key
e,1,event_test_speed_attack_n1,400000,FreeDiamond,,100,1
e,2,event_test_speed_attack_n1,500000,Item,box_glo_00002,30,1
```

---

### 3.4 MstStageEndCondition → MstStage

**リレーション**: `MstStageEndCondition.mst_stage_id` → `MstStage.id`

**説明**: ステージのクリア条件・失敗条件設定

**CSVサンプル**:
```csv
MstStageEndCondition.csv:
ENABLE,id,mst_stage_id,stage_end_type,condition_type,condition_value1,condition_value2,release_key
e,3,26,Victory,DefeatUnit,enemy_gom_00502_colorless,2,1
e,4,27,Victory,DefeatUnit,enemy_gom_00001_boss_colorless,1,1
```

---

### 3.5 MstStageEventSetting → MstStage

**リレーション**: `MstStageEventSetting.mst_stage_id` → `MstStage.id`

**説明**: イベントステージの設定（リセットタイプ、クリア可能回数、広告チャレンジ回数等）

**CSVサンプル**:
```csv
MstStageEventSetting.csv:
ENABLE,id,mst_stage_id,reset_type,clearable_count,ad_challenge_count,mst_stage_rule_group_id,start_at,end_at,release_key,background_asset_key
e,event_test_fragment_n1,event_test_fragment_n1,__NULL__,,0,event_test_fragment_n1,"2024-01-01 0:00:00","2029-10-01 15:00:00",1,glo_00011
```

**実装箇所**:
- クライアント: `MstStageEventSettingModel`
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Core/Domain/Models/MasterData/MstStageEventSettingModel.cs`

---

### 3.6 MstStageEventSetting → MstStageEventRule (ルールグループ)

**リレーション**: `MstStageEventSetting.mst_stage_rule_group_id` → `MstStageEventRule.group_id`

**説明**: イベントステージのルールグループ設定

**CSVサンプル**:
```csv
MstStageEventRule.csv:
ENABLE,id,group_id,rule_type,rule_value,release_key
e,event_test_fragment_n1_1,event_test_fragment_n1,PartyUnitNum,2,1
e,event_test_fragment_n1_2,event_test_fragment_n1,PartyRarity,R,1
```

---

### 3.7 MstStageI18n → MstStage

**リレーション**: `MstStageI18n.mst_stage_id` → `MstStage.id`

**説明**: ステージの多言語対応データ

**CSVサンプル**:
```csv
MstStageI18n.csv:
ENABLE,release_key,id,mst_stage_id,language,name
e,1,test_slipdamage_koma_ja,test_slipdamage_koma,ja,状態異常コマの挙動確認
e,1,develop_001_ja,develop_001,ja,テストステージ001
```

---

## 4. InGame関連のリレーション

### 4.1 MstInGameSpecialRule → MstStage/MstInGame (多態的関連)

**リレーション**: `MstInGameSpecialRule.target_id` → ステージID or インゲームID (content_typeにより判別)

**説明**: 特殊ルール設定。content_type='Stage'の場合はMstStage.idを、content_type='AdventBattle'等の場合は他のテーブルIDを参照

**CSVサンプル**:
```csv
MstInGameSpecialRule.csv:
ENABLE,id,content_type,target_id,rule_type,rule_value,start_at,end_at,release_key
e,event_test_fragment_n1_1,Stage,event_test_fragment_n1,PartyUnitNum,2,"2020-01-01 0:00:00","2038-01-01 0:00:00",1
e,event_test_fragment_n1_2,Stage,event_test_fragment_n1,PartyRarity,R,"2020-01-01 0:00:00","2038-01-01 0:00:00",1
```

**実装箇所**:
- サーバー: `InGameSpecialRuleService::checkAndGetParty()`
  - ファイル: `projects/glow-server/api/app/Domain/InGame/Services/InGameSpecialRuleService.php`
- クライアント: `MstInGameSpecialRuleDataRepository::GetInGameSpecialRuleModels()`
  - ファイル: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Scenes/EventQuestTop/Domain/UseCases/Factory/EventQuestTopUseCaseElementModelFactory.cs`

**使用例**:
```php
// サーバー側: パーティルールチェック
$mstInGameSpecialRules = $this->mstInGameSpecialRuleRepository->getByContentTypeAndTargetId(
    InGameContentType::STAGE,
    $targetId,
    $now,
);
return $this->partyDelegator->checkAndGetPartyForRules($usrUserId, $partyNo, $mstInGameSpecialRules);
```

```csharp
// クライアント側: 特殊ルール取得
var mstInGameSpecialRuleModels =
    MstInGameSpecialRuleDataRepository.GetInGameSpecialRuleModels(
        mstStageModel.Id,
        InGameContentType.Stage
    );
```

---

### 4.2 MstInGameSpecialRuleUnitStatus (グループ化)

**リレーション**: `MstInGameSpecialRuleUnitStatus.group_id` でグループ化

**説明**: 特殊ルールによるユニットステータス補正

**CSVサンプル**:
```csv
MstInGameSpecialRuleUnitStatus.csv:
ENABLE,release_key,id,group_id,target_type,target_value,status_parameter_type,effect_value
e,1,1,test,Unit,chara_glo_00001,Hp,100
e,1,2,test,CharacterUnitRoleType,Attack,AttackPower,200
```

---

### 4.3 MstInGameI18n → MstInGame

**リレーション**: `MstInGameI18n.mst_in_game_id` → `MstInGame.id`

**説明**: インゲームの多言語対応データ（リザルトTips、説明文等）

**CSVサンプル**:
```csv
MstInGameI18n.csv:
ENABLE,release_key,id,mst_in_game_id,language,result_tips,description
e,1,develop_001_ja,develop_001,ja,"テストTipsメッセージ\nああああ...",
e,1,develop_002_ja,develop_002,ja,テストTipsメッセージ,
```

---

### 4.4 MstInGameGimmickObject

**リレーション**: `MstInGameGimmickObject.id` でギミックオブジェクト定義

**説明**: インゲームで使用されるギミックオブジェクト

**CSVサンプル**:
```csv
MstInGameGimmickObject.csv:
ENABLE,id,asset_key,release_key
e,gimmick_dummy1,dummy1,1
e,gimmick_dummy2,dummy2,1
```

---

## 5. 報酬グループ関連

### 5.1 MstStageRewardGroup (グループ化)

**リレーション**: `MstStageRewardGroup.mst_stage_reward_group_id` でグループ化

**説明**: ステージ報酬をグループ化して管理

**CSVサンプル**:
```csv
MstStageRewardGroup.csv:
ENABLE,id,mst_stage_reward_group_id,reward_category,resource_type,resource_id,resource_amount,weight,release_key
e,1,reward_1,FirstClear,Coin,,2500,100,1
e,2,reward_1,FirstClear,Item,box_glo_00001,40,100,1
```

---

## 6. リレーション図

### 6.1 主要なデータフロー

```
ユーザーがクエスト選択
    ↓
MstQuest
    ↓ mst_quest_id
MstStage (複数ステージ)
    ↓ mst_in_game_id
MstInGame
    ├─ mst_page_id → MstPage (敵配置パターン)
    ├─ mst_enemy_outpost_id → MstEnemyOutpost (敵拠点)
    ├─ boss_mst_enemy_stage_parameter_id → MstEnemyStageParameter
    │                                          ↓ mst_enemy_character_id
    │                                       MstEnemyCharacter
    ├─ 通常敵/ボス敵 HP/攻撃力/速度 係数
    └─ BGM/背景設定
```

### 6.2 報酬とボーナス関連

```
MstQuest
    ├─ MstQuestBonusUnit → MstUnit (ボーナスユニット)
    ├─ MstQuestEventBonusSchedule (イベントボーナススケジュール)
    └─ MstQuestI18n (多言語)

MstStage
    ├─ MstStageReward (通常報酬)
    ├─ MstStageEventReward (イベント報酬)
    ├─ MstStageClearTimeReward (クリアタイム報酬)
    ├─ MstStageEndCondition (終了条件)
    ├─ MstStageEventSetting → MstStageEventRule (イベント設定・ルール)
    └─ MstStageI18n (多言語)

MstInGame
    ├─ MstInGameSpecialRule (特殊ルール)
    ├─ MstInGameSpecialRuleUnitStatus (ステータス補正)
    └─ MstInGameI18n (多言語)
```

---

## 7. 重要な実装パターン

### 7.1 ステージ開始処理フロー（サーバー側）

1. ステージIDからMstStageを取得（期間チェック付き）
2. MstStage.mst_quest_idからMstQuestを取得
3. MstStage.mst_in_game_idからMstInGameを取得（自動）
4. InGameDelegatorでパーティルールチェック（MstInGameSpecialRule使用）
5. スタミナ消費（MstQuestEventBonusScheduleでキャンペーンボーナス適用）
6. セッション開始

**ファイル**: `projects/glow-server/api/app/Domain/Stage/UseCases/StageStartUseCase.php`

---

### 7.2 ステージモデル構築（クライアント側）

1. MstStageDataとMstStageI18nDataをJOIN
2. MstInGameDataとMstInGameI18nDataをJOIN
3. MstQuestDataをJOIN
4. StageDataTranslatorでMstStageModelに変換（InGameデータを統合）

**ファイル**: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Core/Data/Repositories/MasterData/MasterDataRepository.cs` (187-236行目)

---

### 7.3 敵キャラクター生成（クライアント側）

1. MstEnemyStageParameterModelから基礎パラメータ取得
2. ステージ係数（StageHpCoef, StageAttackPowerCoef等）を掛ける
3. InGameSequence係数を掛ける
4. 最終的なHP、攻撃力、移動速度を算出

**ファイル**: `projects/glow-client/Assets/GLOW/Scripts/Runtime/Scenes/InGame/Domain/Battle/ModelFactories/CharacterUnitFactory.cs` (97-127行目)

---

## 8. 注意事項

### 8.1 外部キー制約について

- **DDLに外部キー制約は定義されていません**
- **Eloquentモデルのリレーション設定もありません**
- リレーションはアプリケーションコード内で暗黙的に管理されています

### 8.2 データ整合性

- マスタデータの整合性はCSV投入前のバリデーションに依存
- 参照先のIDが存在しない場合、実行時エラーまたはnullチェックで対応

### 8.3 データ再利用

- MstInGameは複数のステージで再利用可能（2024年11月のマイグレーション以降）
- 報酬グループ（MstStageRewardGroup）も複数ステージで共有可能

---

## 9. まとめ

### 主要なリレーション一覧

| 子テーブル | カラム | 親テーブル | 親カラム | カーディナリティ |
|-----------|--------|-----------|----------|-----------------|
| MstStage | mst_quest_id | MstQuest | id | N:1 |
| MstStage | mst_in_game_id | MstInGame | id | N:1 |
| MstInGame | boss_mst_enemy_stage_parameter_id | MstEnemyStageParameter | id | 1:1 |
| MstInGame | mst_page_id | MstPage | id | N:1 |
| MstInGame | mst_enemy_outpost_id | MstEnemyOutpost | id | N:1 |
| MstEnemyStageParameter | mst_enemy_character_id | MstEnemyCharacter | id | N:1 |
| MstQuestBonusUnit | mst_quest_id | MstQuest | id | N:1 |
| MstQuestBonusUnit | mst_unit_id | MstUnit | id | N:1 |
| MstQuestEventBonusSchedule | mst_quest_id | MstQuest | id | N:1 |
| MstQuestI18n | mst_quest_id | MstQuest | id | N:1 |
| MstStageReward | mst_stage_id | MstStage | id | N:1 |
| MstStageEventReward | mst_stage_id | MstStage | id | N:1 |
| MstStageClearTimeReward | mst_stage_id | MstStage | id | N:1 |
| MstStageEndCondition | mst_stage_id | MstStage | id | N:1 |
| MstStageEventSetting | mst_stage_id | MstStage | id | 1:1 |
| MstStageEventSetting | mst_stage_rule_group_id | MstStageEventRule | group_id | 1:N |
| MstStageI18n | mst_stage_id | MstStage | id | N:1 |
| MstInGameSpecialRule | target_id | MstStage/etc | id | N:1 (多態) |
| MstInGameI18n | mst_in_game_id | MstInGame | id | N:1 |

---

## 参考ファイル

### サーバー側（glow-server）
- `api/app/Domain/Resource/Mst/Repositories/MstStageRepository.php`
- `api/app/Domain/Resource/Mst/Repositories/MstStageRewardRepository.php`
- `api/app/Domain/Resource/Mst/Models/MstInGame.php`
- `api/app/Domain/Stage/UseCases/StageStartUseCase.php`
- `api/app/Domain/Stage/Services/StageService.php`
- `api/app/Domain/InGame/Services/InGameSpecialRuleService.php`
- `api/database/migrations/mst/2024_11_01_070242_create_table_mst_in_games_mst_in_game_i18ns.php`

### クライアント側（glow-client）
- `Assets/GLOW/Scripts/Runtime/Core/Domain/Definitions/Repositories/MasterData/IMstStageDataRepository.cs`
- `Assets/GLOW/Scripts/Runtime/Core/Data/Repositories/MasterData/MasterDataRepository.cs`
- `Assets/GLOW/Scripts/Runtime/Core/Data/Translators/StageDataTranslator.cs`
- `Assets/GLOW/Scripts/Runtime/Core/Domain/Models/MasterData/MstStageModel.cs`
- `Assets/GLOW/Scripts/Runtime/Core/Domain/Models/MasterData/MstQuestBonusUnitModel.cs`
- `Assets/GLOW/Scripts/Runtime/Core/Domain/Models/MasterData/MstStageRewardModel.cs`
- `Assets/GLOW/Scripts/Runtime/Scenes/InGame/Domain/Battle/ModelFactories/CharacterUnitFactory.cs`
- `Assets/GLOW/Scripts/Runtime/Scenes/EventQuestTop/Domain/UseCases/Factory/EventQuestTopUseCaseElementModelFactory.cs`

### マスタデータ（glow-masterdata）
- `MstQuest.csv`
- `MstStage.csv`
- `MstInGame.csv`
- `MstEnemyStageParameter.csv`
- `MstQuestBonusUnit.csv`
- `MstStageReward.csv`
- `MstStageEventReward.csv`
- `MstInGameSpecialRule.csv`
- その他関連CSVファイル
