enum:
  - name: CharacterUnitRoleType
    params:
      - name: None
      - name: Attack
      - name: Balance
      - name: Defense
      - name: Support
      - name: Unique
      - name: Technical
      - name: Special

  - name: CharacterColor
    params:
      - name: None
        number: 0
      - name: Colorless
        number: 1
      - name: Red
        number: 2
      - name: Blue
        number: 3
      - name: Yellow
        number: 4
      - name: Green
        number: 5

  - name: CharacterAttackRangeType
    params:
      - name: None
        number: 0
      - name: Short
        number: 1
      - name: Middle
        number: 2
      - name: Long
        number: 3

  - name: UnitLabel
    params:
      - name: DropR
      - name: DropSR
      - name: DropSSR
      - name: DropUR
      - name: PremiumR
      - name: PremiumSR
      - name: PremiumSSR
      - name: PremiumUR
      - name: FestivalUR

  - name: UnitAbilityType
    params:
      - name: None
      - name: SlipDamageKomaBlock
      - name: AttackPowerDownKomaBlock
      - name: GustKomaBlock
      - name: PoisonDamageKomaBlock
      - name: AttackPowerUpKomaBoost
      - name: WindKomaBoost
      - name: AttackPowerUpInNormalKoma
      - name: MoveSpeedUpInNormalKoma
      - name: DamageCutInNormalKoma
      - name: KnockBackBlock
      - name: Guts
      - name: PoisonDamageCut
      - name: BurnDamageCut
      - name: StunBlock
      - name: FreezeBlock
      - name: AttackPowerUpByHpPercentageOver
      - name: AttackPowerUpByHpPercentageLess
      - name: DamageCutByHpPercentageOver
      - name: DamageCutByHpPercentageLess
      - name: WeakeningBlock
        
  - name: SpeechBalloonType
    params:
      - name: Maru
        number: 1
      - name: Fuwa
        number: 2
      - name: Toge
        number: 3
        
  - name: SpeechBalloonSide
    params:
      - name: Right
        number: 0
      - name: Left
        number: 1
        
  - name: SpeechBalloonConditionType
    params:
      - name: Summon
      - name: SpecialAttackCharge
      - name: SpecialAttack

data:
  - name: MstUnit
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: roleType
        type: CharacterUnitRoleType
      - name: color
        type: CharacterColor
      - name: attackRangeType
        type: CharacterAttackRangeType
      - name: unitLabel
        type: UnitLabel
      - name: hasSpecificRankUp
        type: bool
      - name: fragmentMstItemId
        type: string
      - name: mstSeriesId
        type: string
      - name: assetKey
        type: string
      - name: rarity
        type: Rarity
      - name: sortOrder
        type: int
      - name: summonCost
        type: int
      - name: summonCoolTime
        type: int
      - name: specialAttackInitialCoolTime
        type: int
      - name: specialAttackCoolTime
        type: int
      - name: minHp
        type: int
      - name: maxHp
        type: int
      - name: damageKnockBackCount
        type: int
      - name: moveSpeed
        type: float
      - name: wellDistance
        type: float
      - name: minAttackPower
        type: int
      - name: maxAttackPower
        type: int
      - name: mstUnitAbilityId1
        type: string
      - name: abilityUnlockRank1
        type: int
      - name: mstUnitAbilityId2
        type: string
      - name: abilityUnlockRank2
        type: int
      - name: mstUnitAbilityId3
        type: string
      - name: abilityUnlockRank3
        type: int
      - name: isEncyclopediaSpecialAttackPositionRight
        type: bool

  - name: MstUnitI18n
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: mstUnitId
        type: string
      - name: language
        type: Language
      - name: name
        type: string
      - name: description
        type: string
      - name: detail
        type: string

  - name: MstAbility
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: abilityType
        type: UnitAbilityType
      - name: assetKey
        type: string

  - name: MstAbilityI18n
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: mstAbilityId
        type: string
      - name: language
        type: Language
      - name: description
        type: string
      - name: filterTitle
        type: string

  - name: MstUnitAbility
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: mstAbilityId
        type: string
      - name: abilityParameter1
        type: string
      - name: abilityParameter2
        type: string
      - name: abilityParameter3
        type: string

  - name: MstUnitGradeUp
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: gradeLevel
        type: int
      - name: unitLabel
        type: UnitLabel
      - name: requireAmount
        type: int

  - name: MstUnitGradeCoefficient
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: unitLabel
        type: UnitLabel
      - name: gradeLevel
        type: int
      - name: coefficient
        type: int


  - name: MstUnitLevelUp
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: level
        type: int
      - name: unitLabel
        type: UnitLabel
      - name: requiredCoin
        type: int

  - name: MstUnitRankUp
    obscure: true
    # impl_entity: true
    params:
      - name: id
        type: string
      - name: rank
        type: int
      - name: unitLabel
        type: UnitLabel
      - name: amount
        type: int
      - name: requireLevel
        type: int
      - name: srMemoryFragmentAmount
        type: int
      - name: ssrMemoryFragmentAmount
        type: int
      - name: urMemoryFragmentAmount
        type: int

  - name: MstUnitSpecificRankUp
    obscure: true
    # impl_entity: true
    params:
      - name: id
        type: string
      - name: mstUnitId
        type: string
      - name: rank
        type: int
      - name: amount
        type: int
      - name: unitMemoryAmount
        type: int
      - name: requireLevel
        type: int
      - name: srMemoryFragmentAmount
        type: int
      - name: ssrMemoryFragmentAmount
        type: int
      - name: urMemoryFragmentAmount
        type: int

  - name: MstUnitRankCoefficient
    obscure: true
    params:
      - name: rank
        type: int
      - name: coefficient
        type: int
      - name: specialUnitCoefficient
        type: int
        
  - name: MstUnitRoleBonus
    obscure: true
    params:
      - name: id
        type: string
      - name: roleType
        type: CharacterUnitRoleType
      - name: colorAdvantageAttackBonus
        type: float
      - name: colorAdvantageDefenseBonus
        type: float

  - name: MstSpecialAttackI18n
    obscure: true
    params:
      - name: id
        type: string
      - name: mstUnitId
        type: string
      - name: language
        type: Language
      - name: name
        type: string

  - name: MstSpeechBalloonI18n
    obscure: true
    impl_entity: true
    params:
      - name: id
        type: string
      - name: mstUnitId
        type: string
      - name: language
        type: Language
      - name: conditionType
        type: SpeechBalloonConditionType
      - name: balloonType
        type: SpeechBalloonType
      - name: side
        type: SpeechBalloonSide
      - name: duration
        type: float
      - name: text
        type: string

  - name: UsrUnit
    obscure: true
    impl_entity: true
    params:
      - name: usrUnitId
        type: string
      - name: mstUnitId
        type: string
      - name: level
        type: int
      - name: rank
        type: int
      - name: gradeLevel
        type: int
      - name: isNewEncyclopedia
        type: bool

  - name: LevelUpResult
    obscure: true
    impl_entity: true
    params:
      - name: usrUnit
        type: UsrUnitData
      - name: usrParameter
        type: UsrParameterData

  - name: RankUpResult
    obscure: true
    impl_entity: true
    params:
      - name: usrUnit
        type: UsrUnitData
      - name: usrItems
        type: UsrItemData[]

  - name: GradeUpResult
    obscure: true
    impl_entity: true
    params:
      - name: usrUnit
        type: UsrUnitData
      - name: usrItems
        type: UsrItemData[]

api:
  - name: Unit
    actions:
    - name: LevelUp
      path: "/api/unit/level_up"
      params:
        - name: usrUnitId
          type: string
        - name: level
          type: int
      method: post
      response: LevelUpResultData

    - name: RankUp
      path: "/api/unit/rank_up"
      params:
        - name: usrUnitId
          type: string
      method: post
      response: RankUpResultData

    - name: GradeUp
      path: "/api/unit/grade_up"
      params:
        - name: usrUnitId
          type: string
      method: post
      response: GradeUpResultData
