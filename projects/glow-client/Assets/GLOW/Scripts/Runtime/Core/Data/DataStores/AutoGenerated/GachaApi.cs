using System;
using System.Collections;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.Threading;
using Cysharp.Threading.Tasks;
using Newtonsoft.Json;
using UnityEngine;
using UnityHTTPLibrary;
using WPFramework.Data.Extensions;
using GLOW.Core.Data.Data;
using GLOW.Core.Domain.Constants;
using Zenject;

// ----------------------------------------------------------------------
// This file is auto-generated by SchemaBuilder. Do not modify directly.
// ----------------------------------------------------------------------

namespace GLOW.Core.Data.DataStores
{
    public sealed class GachaApi
    {
        [Serializable]
        class JsonParamPrize
        {
            [IgnoreDataMember] [JsonIgnore]
            public string OprGachaId {
                get => oprGachaId;
                set => oprGachaId = value;
            }
            [DataMember(Name = "oprGachaId")] [SerializeField] [JsonProperty("oprGachaId")] string oprGachaId;
        }
        [Serializable]
        class JsonParamAd
        {
            [IgnoreDataMember] [JsonIgnore]
            public string OprGachaId {
                get => oprGachaId;
                set => oprGachaId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int DrewCount {
                get => drewCount;
                set => drewCount = value;
            }
            [DataMember(Name = "oprGachaId")] [SerializeField] [JsonProperty("oprGachaId")] string oprGachaId;
            [DataMember(Name = "drewCount")] [SerializeField] [JsonProperty("drewCount")] int drewCount;
        }
        [Serializable]
        class JsonParamDiamond
        {
            [IgnoreDataMember] [JsonIgnore]
            public string OprGachaId {
                get => oprGachaId;
                set => oprGachaId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int DrewCount {
                get => drewCount;
                set => drewCount = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int PlayNum {
                get => playNum;
                set => playNum = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int CostNum {
                get => costNum;
                set => costNum = value;
            }
            [DataMember(Name = "oprGachaId")] [SerializeField] [JsonProperty("oprGachaId")] string oprGachaId;
            [DataMember(Name = "drewCount")] [SerializeField] [JsonProperty("drewCount")] int drewCount;
            [DataMember(Name = "playNum")] [SerializeField] [JsonProperty("playNum")] int playNum;
            [DataMember(Name = "costNum")] [SerializeField] [JsonProperty("costNum")] int costNum;
        }
        [Serializable]
        class JsonParamPaidDiamond
        {
            [IgnoreDataMember] [JsonIgnore]
            public string OprGachaId {
                get => oprGachaId;
                set => oprGachaId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int DrewCount {
                get => drewCount;
                set => drewCount = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int PlayNum {
                get => playNum;
                set => playNum = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int CostNum {
                get => costNum;
                set => costNum = value;
            }
            [DataMember(Name = "oprGachaId")] [SerializeField] [JsonProperty("oprGachaId")] string oprGachaId;
            [DataMember(Name = "drewCount")] [SerializeField] [JsonProperty("drewCount")] int drewCount;
            [DataMember(Name = "playNum")] [SerializeField] [JsonProperty("playNum")] int playNum;
            [DataMember(Name = "costNum")] [SerializeField] [JsonProperty("costNum")] int costNum;
        }
        [Serializable]
        class JsonParamItem
        {
            [IgnoreDataMember] [JsonIgnore]
            public string OprGachaId {
                get => oprGachaId;
                set => oprGachaId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int DrewCount {
                get => drewCount;
                set => drewCount = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int PlayNum {
                get => playNum;
                set => playNum = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string CostId {
                get => costId;
                set => costId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int CostNum {
                get => costNum;
                set => costNum = value;
            }
            [DataMember(Name = "oprGachaId")] [SerializeField] [JsonProperty("oprGachaId")] string oprGachaId;
            [DataMember(Name = "drewCount")] [SerializeField] [JsonProperty("drewCount")] int drewCount;
            [DataMember(Name = "playNum")] [SerializeField] [JsonProperty("playNum")] int playNum;
            [DataMember(Name = "costId")] [SerializeField] [JsonProperty("costId")] string costId;
            [DataMember(Name = "costNum")] [SerializeField] [JsonProperty("costNum")] int costNum;
        }
        [Serializable]
        class JsonParamFree
        {
            [IgnoreDataMember] [JsonIgnore]
            public string OprGachaId {
                get => oprGachaId;
                set => oprGachaId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int DrewCount {
                get => drewCount;
                set => drewCount = value;
            }
            [DataMember(Name = "oprGachaId")] [SerializeField] [JsonProperty("oprGachaId")] string oprGachaId;
            [DataMember(Name = "drewCount")] [SerializeField] [JsonProperty("drewCount")] int drewCount;
        }
        [Serializable]
        class JsonParamHistory
        {
        }

        [Inject(Id = WPFramework.Constants.Zenject.FrameworkInjectId.ServerApi.Game)] ServerApi APIContext { get; }

        public async UniTask<GachaPrizeResultData> Prize(CancellationToken cancellationToken, string oprGachaId)
        {
            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };
            var uriParameters = System.Web.HttpUtility.ParseQueryString(string.Empty);
            uriParameters["oprGachaId"] = oprGachaId; 
    
            return await APIContext.Get<GachaPrizeResultData>(cancellationToken, "/api/gacha/prize?" + uriParameters, payload);
        }
        public async UniTask<GachaDrawResultData> Ad(CancellationToken cancellationToken, string oprGachaId, int drewCount)
        {
            var param = new JsonParamAd();
            param.OprGachaId = oprGachaId;
            param.DrewCount = drewCount;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<GachaDrawResultData>(cancellationToken, "/api/gacha/draw/ad", payload);
        }
        public async UniTask<GachaDrawResultData> Diamond(CancellationToken cancellationToken, string oprGachaId, int drewCount, int playNum, int costNum)
        {
            var param = new JsonParamDiamond();
            param.OprGachaId = oprGachaId;
            param.DrewCount = drewCount;
            param.PlayNum = playNum;
            param.CostNum = costNum;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<GachaDrawResultData>(cancellationToken, "/api/gacha/draw/diamond", payload);
        }
        public async UniTask<GachaDrawResultData> PaidDiamond(CancellationToken cancellationToken, string oprGachaId, int drewCount, int playNum, int costNum)
        {
            var param = new JsonParamPaidDiamond();
            param.OprGachaId = oprGachaId;
            param.DrewCount = drewCount;
            param.PlayNum = playNum;
            param.CostNum = costNum;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<GachaDrawResultData>(cancellationToken, "/api/gacha/draw/paid_diamond", payload);
        }
        public async UniTask<GachaDrawResultData> Item(CancellationToken cancellationToken, string oprGachaId, int drewCount, int playNum, string costId, int costNum)
        {
            var param = new JsonParamItem();
            param.OprGachaId = oprGachaId;
            param.DrewCount = drewCount;
            param.PlayNum = playNum;
            param.CostId = costId;
            param.CostNum = costNum;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<GachaDrawResultData>(cancellationToken, "/api/gacha/draw/item", payload);
        }
        public async UniTask<GachaDrawResultData> Free(CancellationToken cancellationToken, string oprGachaId, int drewCount)
        {
            var param = new JsonParamFree();
            param.OprGachaId = oprGachaId;
            param.DrewCount = drewCount;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<GachaDrawResultData>(cancellationToken, "/api/gacha/draw/free", payload);
        }
        public async UniTask<GachaHistoryResultData> History(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Get<GachaHistoryResultData>(cancellationToken, "/api/gacha/history", payload);
        }
    }
}