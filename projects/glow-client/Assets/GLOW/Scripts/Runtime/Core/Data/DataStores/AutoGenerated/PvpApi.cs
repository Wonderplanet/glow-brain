using System;
using System.Collections;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.Threading;
using Cysharp.Threading.Tasks;
using Newtonsoft.Json;
using UnityEngine;
using UnityHTTPLibrary;
using WPFramework.Data.Extensions;
using GLOW.Core.Data.Data;
using GLOW.Core.Domain.Constants;
using Zenject;

// ----------------------------------------------------------------------
// This file is auto-generated by SchemaBuilder. Do not modify directly.
// ----------------------------------------------------------------------

namespace GLOW.Core.Data.DataStores
{
    public sealed class PvpApi
    {
        [Serializable]
        class JsonParamTop
        {
        }
        [Serializable]
        class JsonParamStart
        {
            [IgnoreDataMember] [JsonIgnore]
            public string SysPvpSeasonId {
                get => sysPvpSeasonId;
                set => sysPvpSeasonId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int IsUseItem {
                get => isUseItem;
                set => isUseItem = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string OpponentMyId {
                get => opponentMyId;
                set => opponentMyId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public int PartyNo {
                get => partyNo;
                set => partyNo = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public InGameStartBattleLogData InGameBattleLog {
                get => inGameBattleLog;
                set => inGameBattleLog = value;
            }
            [DataMember(Name = "sysPvpSeasonId")] [SerializeField] [JsonProperty("sysPvpSeasonId")] string sysPvpSeasonId;
            [DataMember(Name = "isUseItem")] [SerializeField] [JsonProperty("isUseItem")] int isUseItem;
            [DataMember(Name = "opponentMyId")] [SerializeField] [JsonProperty("opponentMyId")] string opponentMyId;
            [DataMember(Name = "partyNo")] [SerializeField] [JsonProperty("partyNo")] int partyNo;
            [DataMember(Name = "inGameBattleLog")] [SerializeField] [JsonProperty("inGameBattleLog")] InGameStartBattleLogData inGameBattleLog;
        }
        [Serializable]
        class JsonParamEnd
        {
            [IgnoreDataMember] [JsonIgnore]
            public string SysPvpSeasonId {
                get => sysPvpSeasonId;
                set => sysPvpSeasonId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public PvpInGameEndBattleLogData InGameBattleLog {
                get => inGameBattleLog;
                set => inGameBattleLog = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public bool IsWin {
                get => isWin;
                set => isWin = value;
            }
            [DataMember(Name = "sysPvpSeasonId")] [SerializeField] [JsonProperty("sysPvpSeasonId")] string sysPvpSeasonId;
            [DataMember(Name = "inGameBattleLog")] [SerializeField] [JsonProperty("inGameBattleLog")] PvpInGameEndBattleLogData inGameBattleLog;
            [DataMember(Name = "isWin")] [SerializeField] [JsonProperty("isWin")] bool isWin;
        }
        [Serializable]
        class JsonParamResume
        {
        }
        [Serializable]
        class JsonParamChangeOpponent
        {
        }
        [Serializable]
        class JsonParamAbort
        {
        }
        [Serializable]
        class JsonParamCleanup
        {
        }
        [Serializable]
        class JsonParamRanking
        {
            [IgnoreDataMember] [JsonIgnore]
            public bool IsPreviousSeason {
                get => isPreviousSeason;
                set => isPreviousSeason = value;
            }
            [DataMember(Name = "isPreviousSeason")] [SerializeField] [JsonProperty("isPreviousSeason")] bool isPreviousSeason;
        }

        [Inject(Id = WPFramework.Constants.Zenject.FrameworkInjectId.ServerApi.Game)] ServerApi APIContext { get; }

        public async UniTask<PvpTopResultData> Top(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };

            return await APIContext.Post<PvpTopResultData>(cancellationToken, "/api/pvp/top", payload);
        }
        public async UniTask<PvpStartResultData> Start(CancellationToken cancellationToken, string sysPvpSeasonId, int isUseItem, string opponentMyId, int partyNo, InGameStartBattleLogData inGameBattleLog)
        {
            var param = new JsonParamStart();
            param.SysPvpSeasonId = sysPvpSeasonId;
            param.IsUseItem = isUseItem;
            param.OpponentMyId = opponentMyId;
            param.PartyNo = partyNo;
            param.InGameBattleLog = inGameBattleLog;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };

            return await APIContext.Post<PvpStartResultData>(cancellationToken, "/api/pvp/start", payload);
        }
        public async UniTask<PvpEndResultData> End(CancellationToken cancellationToken, string sysPvpSeasonId, PvpInGameEndBattleLogData inGameBattleLog, bool isWin)
        {
            var param = new JsonParamEnd();
            param.SysPvpSeasonId = sysPvpSeasonId;
            param.InGameBattleLog = inGameBattleLog;
            param.IsWin = isWin;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };

            return await APIContext.Post<PvpEndResultData>(cancellationToken, "/api/pvp/end", payload);
        }
        public async UniTask<PvpResumeResultData> Resume(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };

            return await APIContext.Post<PvpResumeResultData>(cancellationToken, "/api/pvp/resume", payload);
        }
        public async UniTask<PvpChangeOpponentResultData> ChangeOpponent(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };

            return await APIContext.Post<PvpChangeOpponentResultData>(cancellationToken, "/api/pvp/change_opponent", payload);
        }
        public async UniTask<PvpAbortResultData> Abort(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<PvpAbortResultData>(cancellationToken, "/api/pvp/abort", payload);
        }
        public async UniTask<HeadOK> Cleanup(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<HeadOK>(cancellationToken, "/api/pvp/cleanup", payload);
        }
        public async UniTask<PvpRankingResultData> Ranking(CancellationToken cancellationToken, bool isPreviousSeason)
        {
            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };
            var uriParameters = System.Web.HttpUtility.ParseQueryString(string.Empty);
            uriParameters["isPreviousSeason"] = isPreviousSeason.ToString();

            return await APIContext.Get<PvpRankingResultData>(cancellationToken, "/api/pvp/ranking?" + uriParameters, payload);
        }
    }
}
