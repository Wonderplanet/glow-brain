using System;
using System.Collections;
using System.Collections.Generic;
using System.Runtime.Serialization;
using System.Threading;
using Cysharp.Threading.Tasks;
using Newtonsoft.Json;
using UnityEngine;
using UnityHTTPLibrary;
using WPFramework.Data.Extensions;
using GLOW.Core.Data.Data;
using GLOW.Core.Domain.Constants;
using Zenject;

// ----------------------------------------------------------------------
// This file is auto-generated by SchemaBuilder. Do not modify directly.
// ----------------------------------------------------------------------

namespace GLOW.Core.Data.DataStores
{
    public sealed class ShopApi
    {
        [Serializable]
        class JsonParamSetStoreInfo
        {
            [IgnoreDataMember] [JsonIgnore]
            public int BirthDate {
                get => birthDate;
                set => birthDate = value;
            }
            [DataMember(Name = "birthDate")] [SerializeField] [JsonProperty("birthDate")] int birthDate;
        }
        [Serializable]
        class JsonParamAllowance
        {
            [IgnoreDataMember] [JsonIgnore]
            public string ProductId {
                get => productId;
                set => productId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string ProductSubId {
                get => productSubId;
                set => productSubId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string CurrencyCode {
                get => currencyCode;
                set => currencyCode = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public float Price {
                get => price;
                set => price = value;
            }
            [DataMember(Name = "productId")] [SerializeField] [JsonProperty("productId")] string productId;
            [DataMember(Name = "productSubId")] [SerializeField] [JsonProperty("productSubId")] string productSubId;
            [DataMember(Name = "currencyCode")] [SerializeField] [JsonProperty("currencyCode")] string currencyCode;
            [DataMember(Name = "price")] [SerializeField] [JsonProperty("price")] float price;
        }
        [Serializable]
        class JsonParamTradeShopItem
        {
            [IgnoreDataMember] [JsonIgnore]
            public string MstShopItemId {
                get => mstShopItemId;
                set => mstShopItemId = value;
            }
            [DataMember(Name = "mstShopItemId")] [SerializeField] [JsonProperty("mstShopItemId")] string mstShopItemId;
        }
        [Serializable]
        class JsonParamPurchase
        {
            [IgnoreDataMember] [JsonIgnore]
            public string ProductSubId {
                get => productSubId;
                set => productSubId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string Receipt {
                get => receipt;
                set => receipt = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string CurrencyCode {
                get => currencyCode;
                set => currencyCode = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public float Price {
                get => price;
                set => price = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string RawPriceString {
                get => rawPriceString;
                set => rawPriceString = value;
            }
            [DataMember(Name = "productSubId")] [SerializeField] [JsonProperty("productSubId")] string productSubId;
            [DataMember(Name = "receipt")] [SerializeField] [JsonProperty("receipt")] string receipt;
            [DataMember(Name = "currencyCode")] [SerializeField] [JsonProperty("currencyCode")] string currencyCode;
            [DataMember(Name = "price")] [SerializeField] [JsonProperty("price")] float price;
            [DataMember(Name = "rawPriceString")] [SerializeField] [JsonProperty("rawPriceString")] string rawPriceString;
        }
        [Serializable]
        class JsonParamPurchasePass
        {
            [IgnoreDataMember] [JsonIgnore]
            public string ProductSubId {
                get => productSubId;
                set => productSubId = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string Receipt {
                get => receipt;
                set => receipt = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string CurrencyCode {
                get => currencyCode;
                set => currencyCode = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public float Price {
                get => price;
                set => price = value;
            }
            [IgnoreDataMember] [JsonIgnore]
            public string RawPriceString {
                get => rawPriceString;
                set => rawPriceString = value;
            }
            [DataMember(Name = "productSubId")] [SerializeField] [JsonProperty("productSubId")] string productSubId;
            [DataMember(Name = "receipt")] [SerializeField] [JsonProperty("receipt")] string receipt;
            [DataMember(Name = "currencyCode")] [SerializeField] [JsonProperty("currencyCode")] string currencyCode;
            [DataMember(Name = "price")] [SerializeField] [JsonProperty("price")] float price;
            [DataMember(Name = "rawPriceString")] [SerializeField] [JsonProperty("rawPriceString")] string rawPriceString;
        }
        [Serializable]
        class JsonParamPurchaseHistory
        {
        }

        [Inject(Id = WPFramework.Constants.Zenject.FrameworkInjectId.ServerApi.Game)] ServerApi APIContext { get; }

        public async UniTask<SetStoreInfoResultData> SetStoreInfo(CancellationToken cancellationToken, int birthDate)
        {
            var param = new JsonParamSetStoreInfo();
            param.BirthDate = birthDate;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<SetStoreInfoResultData>(cancellationToken, "/api/shop/set_store_info", payload);
        }
        public async UniTask<AllowanceResultData> Allowance(CancellationToken cancellationToken, string productId, string productSubId, string currencyCode, float price)
        {
            var param = new JsonParamAllowance();
            param.ProductId = productId;
            param.ProductSubId = productSubId;
            param.CurrencyCode = currencyCode;
            param.Price = price;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<AllowanceResultData>(cancellationToken, "/api/shop/allowance", payload);
        }
        public async UniTask<TradeShopItemResultData> TradeShopItem(CancellationToken cancellationToken, string mstShopItemId)
        {
            var param = new JsonParamTradeShopItem();
            param.MstShopItemId = mstShopItemId;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<TradeShopItemResultData>(cancellationToken, "/api/shop/trade_shop_item", payload);
        }
        public async UniTask<PurchaseResultData> Purchase(CancellationToken cancellationToken, string productSubId, string receipt, string currencyCode, float price, string rawPriceString)
        {
            var param = new JsonParamPurchase();
            param.ProductSubId = productSubId;
            param.Receipt = receipt;
            param.CurrencyCode = currencyCode;
            param.Price = price;
            param.RawPriceString = rawPriceString;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<PurchaseResultData>(cancellationToken, "/api/shop/trade_pack", payload);
        }
        public async UniTask<PurchasePassResultData> PurchasePass(CancellationToken cancellationToken, string productSubId, string receipt, string currencyCode, float price, string rawPriceString)
        {
            var param = new JsonParamPurchasePass();
            param.ProductSubId = productSubId;
            param.Receipt = receipt;
            param.CurrencyCode = currencyCode;
            param.Price = price;
            param.RawPriceString = rawPriceString;
            var json = JsonConvert.SerializeObject(param);
            var payload = new Payload()
            {
                Data = System.Text.Encoding.UTF8.GetBytes(json),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Post<PurchasePassResultData>(cancellationToken, "/api/shop/purchase_pass", payload);
        }
        public async UniTask<PurchaseHistoryResultData> PurchaseHistory(CancellationToken cancellationToken)
        {

            var payload = new Payload()
            {
                Data = Array.Empty<byte>(),
                ContentType = MimeTypes.Json
            };
    
            return await APIContext.Get<PurchaseHistoryResultData>(cancellationToken, "/api/shop/purchase_history", payload);
        }
    }
}