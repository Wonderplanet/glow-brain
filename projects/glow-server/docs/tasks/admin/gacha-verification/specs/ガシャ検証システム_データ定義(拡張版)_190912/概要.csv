,,,
,概要,,
,,ガシャマスタ、アイテムマスタ、排出結果ログの各JSONファイルを,
,,日次でS3にアップロードしていただきます。,
,,BNE側でアップされたファイルを元に集計を行い、排出率の検証をさせていただきます。,
,,確定アイテムが複数の確率テーブルから抽選されるなど、現行の仕様で対応しきれない場合の拡張版仕様です。,
,,通常版の仕様と、本拡張版の仕様を1つのガシャIDで併用することはできません。 ※異なるガシャIDであれば併用可能です。,
,,,
,ファイル配置パス、ファイル名ルールについて,,
,,■ガシャマスタJSON,
,,配置パス,s3:/(ログROOT)/APP_ID/GASHA_ID/
,,ファイル名,gasha_YYYYMMDD.json
,,■アイテムマスタJSON,
,,配置パス,s3:/(ログROOT)/APP_ID/
,,ファイル名,items_YYYYMMDD.json
,,,"※アイテムマスタは、ガシャ排出率検証システムの画面表示時にも参照しています。
　そのため、公開期間が終了したガシャアイテムについてもアイテムマスタから
　削除しないで下さい。"
,,■排出結果ログJSON,
,,配置パス,s3:/(ログROOT)/APP_ID/GASHA_ID/logs/YYYYMMDD/
,,ファイル名,(サーバ識別子).json.gz
,,,"※ログが複数サーバに分散している場合、各サーバ毎に(サーバ識別子).json.gzでログを保存することで
  ログマージコストを削減可能です"
,,,※(サーバ識別子).json.gz には (サーバ識別子).json のみがアーカイブされているものとします
,,,"※「サーバ識別子」にはログ保持サーバのホスト名やローカルIPアドレスなど、
  ディレクトリ内で一意となる文字列を使用して下さい（半角英数32文字まで）"
,,,
,設定値/入力値について,,
,,S3アップロード用IAM,タイトル個別に発行し、別途連絡させていただきます
,,app_id,BNE指定のアプリ識別子となります。こちらも別途連絡させていただきます
,,gasha_id,"既存ガシャへのアイテム追加時など、アイテムID/排出確率(設定値)に一部でも変更がある場合は
新しいgasha_idにてマスタファイルを作成して下さい"
,,,事前検証のログをアップする場合は事前専用のgasha_idを指定して下さい
,,weight,"本システムの目的として、ユーザの認識する確率と実際の排出確率の差異を確認するためのものですので
アプリ内に記載する、ユーザが認識する確率を記載して下さい"
,,,"また、BOXガシャの場合は初期配備状態で算出する確率を記載して下さい
(初期配備状態からガシャを引いた後の確率変動は考慮しない)
排出結果ログJSONには、初期配備状態を含むすべての排出結果を記載して下さい。"
,,sets[],"一つのガシャに、マスタとなるアイテムセットが3つ以上ある場合、通常版のitems[]/promised_items[]
では対応できないため、本仕様の　sets[]配列にアイテムセットを格納してください。"