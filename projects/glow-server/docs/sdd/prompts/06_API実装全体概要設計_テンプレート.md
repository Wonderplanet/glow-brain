あなたはゲームサーバー/API 開発のスペシャリストです。

サーバーAPI要件書を分析し、複数のAPIエンドポイントの全体を見て概要を設計する視点で
「API実装全体概要設計書」を作成してください。

【入力情報】
以下のドキュメントを参照します:

1. サーバーAPI要件書: @docs/sdd/features/{FEATURE_NAME}/05_サーバーAPI要件書.md

【出力ファイル】
- **以下のパスに Markdown として保存してください:**
  `@docs/sdd/features/{FEATURE_NAME}/06_API実装全体概要設計.md`

========================
【目的】

- サーバーAPI要件を満たすために必要なAPIエンドポイントの全体像を明確にする
- 各エンドポイントが新規作成か既存改修かを判断する
- 既存APIの改修だけでは要件を満たせない項目を特定する
- 実装の全体計画を簡潔に提示する

※ 重要な注意事項:
1. このドキュメントは「APIエンドポイントの全体像」のみに集中します
2. 詳細な実装設計（DB設計、ドメイン設計など）には言及しません
3. 簡潔でわかりやすく、設計視点のみを記述します
4. 補助的な情報は一切含めません

========================
【作業手順】

1. **サーバーAPI要件書の読み込み**
   - サーバーAPI要件書を全て読み込む
   - 各要件で実現すべき内容を理解する

2. **関連APIエンドポイントの特定**
   - 各要件を実現するために必要なAPIエンドポイントを洗い出す
   - 既存のAPIエンドポイントで対応可能かを判断する
   - 新規作成が必要なエンドポイントを特定する

3. **改修内容の整理**
   - 既存APIの場合、どのような改修が必要かを明確にする
   - 新規APIの場合、どのような役割を持つかを明確にする

4. **実装困難項目の特定**
   - 既存APIの改修だけでは要件を満たすことが難しい項目を特定する
   - 新規APIエンドポイントが必要な理由を明確にする

5. **出力ドキュメントの作成**
   - 以下のフォーマットで Markdown を生成する

========================
【出力フォーマット】

出力は、以下の構造で Markdown を生成してください。

# API実装全体概要設計

## 1. ドキュメント情報
- 対象機能: {FEATURE_NAME}
- 作成日: YYYY-MM-DD
- 参照ドキュメント: 05_サーバーAPI要件書.md

## 2. API実装全体像

### 2.1 関連するAPIエンドポイント一覧

| エンドポイント | 種別 | 関連要件ID | 概要 |
|-------------|------|-----------|------|
| POST /api/xxx | 新規作成 | REQ-A-1, REQ-A-2 | XXX機能の実行 |
| GET /api/yyy | 既存改修 | REQ-B-1 | YYY情報の取得（改修） |
| POST /api/zzz/consume | 新規作成 | REQ-C-1 | ZZZ消費処理 |

### 2.2 新規作成APIエンドポイント

#### POST /api/xxx
- **関連要件:** REQ-A-1, REQ-A-2
- **役割:** XXX機能を実行する
- **新規作成が必要な理由:** 既存のAPIではXXX機能に必要な処理フローを実現できないため

#### POST /api/zzz/consume
- **関連要件:** REQ-C-1
- **役割:** ZZZを消費して報酬を付与する
- **新規作成が必要な理由:** 既存のconsume系APIでは対応できない特殊な消費ロジックが必要なため

### 2.3 既存API改修エンドポイント

#### GET /api/yyy
- **関連要件:** REQ-B-1
- **現在の機能:** YYYの基本情報を返却
- **改修内容:**
  - レスポンスに新規フィールド `yyy_xxx_status` を追加
  - XXX機能の有効/無効状態を返却するロジックを追加
- **改修理由:** クライアントがXXX機能の状態を取得するため

#### POST /api/www/execute
- **関連要件:** REQ-D-1
- **現在の機能:** WWW機能を実行
- **改修内容:**
  - XXX機能との連動処理を追加
  - XXXが有効な場合、報酬量を増加させるロジックを追加
- **改修理由:** XXX機能がWWW機能に影響を与えるため

## 3. 要件とAPIの対応関係

### 3.1 要件 REQ-A-1: （要件タイトル）
- **実現に必要なAPI:**
  - POST /api/xxx（新規作成）
  - GET /api/yyy（既存改修）
- **実装概要:**
  - POST /api/xxx でXXX機能を実行
  - GET /api/yyy でXXX機能の状態を確認
- **備考:** -

### 3.2 要件 REQ-A-2: （要件タイトル）
- **実現に必要なAPI:**
  - POST /api/xxx（新規作成）
- **実装概要:**
  - POST /api/xxx でXXX機能を実行する際、YYY条件をチェック
- **備考:** REQ-A-1と同じエンドポイントで実現

### 3.3 要件 REQ-B-1: （要件タイトル）
- **実現に必要なAPI:**
  - GET /api/yyy（既存改修）
- **実装概要:**
  - GET /api/yyy のレスポンスに新規フィールドを追加
- **備考:** -

### 3.4 要件 REQ-C-1: （要件タイトル）
- **実現に必要なAPI:**
  - POST /api/zzz/consume（新規作成）
- **実装概要:**
  - POST /api/zzz/consume でZZZを消費して報酬を付与
- **備考:** 既存のconsume系APIとは異なる特殊ロジックが必要

### 3.5 要件 REQ-D-1: （要件タイトル）
- **実現に必要なAPI:**
  - POST /api/www/execute（既存改修）
- **実装概要:**
  - POST /api/www/execute にXXX連動処理を追加
- **備考:** 既存のWWW機能に影響を与えないよう注意

（他の要件も同様に記述）

## 4. 既存APIだけでは実現困難な項目

### 4.1 XXX機能の実行フロー（REQ-A-1）
- **困難な理由:**
  - 既存のAPIではXXX機能に必要な以下の処理を実現できない:
    1. YYY条件の複合チェック
    2. ZZZ状態の更新
    3. WWW報酬の計算と付与
  - これらを既存APIに追加すると、既存機能の責務が不明確になる
- **解決策:** 新規API `POST /api/xxx` を作成

### 4.2 ZZZ消費の特殊ロジック（REQ-C-1）
- **困難な理由:**
  - 既存のconsume系APIは単一リソースの消費を前提としている
  - ZZZ消費では複数リソースを同時に消費し、条件に応じて報酬を変化させる必要がある
  - 既存APIに追加すると、consume系APIの共通仕様が崩れる
- **解決策:** 新規API `POST /api/zzz/consume` を作成

### 4.3 既存APIの改修で対応可能な項目
- REQ-B-1: GET /api/yyy のレスポンス追加のみで対応可能
- REQ-D-1: POST /api/www/execute に条件分岐を追加することで対応可能

## 5. 実装優先順位

### 5.1 優先度：高（基盤となるAPI）
1. POST /api/xxx（新規作成） - XXX機能の中心となるAPI
2. GET /api/yyy（既存改修） - XXX機能の状態確認に必要

### 5.2 優先度：中（連動機能のAPI）
1. POST /api/www/execute（既存改修） - WWW機能との連動
2. POST /api/zzz/consume（新規作成） - ZZZ消費処理

### 5.3 実装順序の推奨
1. まず優先度：高のAPIを実装し、基盤を構築
2. 次に優先度：中のAPIを実装し、連動機能を追加
3. 各API実装後、要件を満たしているかを確認

========================
【記述のポリシー】

1. **簡潔さを最優先**
   - 冗長な説明は避ける
   - 箇条書きを活用する
   - 要点のみを記述する

2. **設計視点のみに集中**
   - APIエンドポイントの全体像を明確にすることに集中
   - 詳細な実装方法（DB設計、ドメイン設計など）には言及しない
   - 「何が必要か」「なぜ必要か」を明確にする

3. **新規vs既存の明確化**
   - 各エンドポイントが新規作成か既存改修かを明確にする
   - 新規作成が必要な理由を簡潔に説明する
   - 既存改修の場合、改修内容を簡潔に説明する

4. **要件との対応関係**
   - 各要件がどのAPIで実現されるかを明確にする
   - 複数のAPIで実現する場合、その関係を明確にする

5. **実装困難項目の特定**
   - 既存APIだけでは要件を満たせない項目を明確にする
   - その理由を簡潔に説明する
   - 解決策（新規API作成）を提示する

6. **補助的な情報の排除**
   - テスト計画、マイグレーション計画などは記述しない
   - エラーハンドリングの詳細は記述しない
   - 非機能要件の詳細は記述しない
   - これらは後続の「サーバーAPI機能要件実装設計」で扱う

========================
【重要】
生成したAPI実装全体概要設計書は、Markdown として
**@docs/sdd/features/{FEATURE_NAME}/06_API実装全体概要設計.md**
に保存してください。

========================

以上を踏まえて、
サーバーAPI要件書を分析し、複数のAPIエンドポイントの全体を見て概要を設計する視点で
API実装全体概要設計書を作成し、md ファイルとして保存してください。
