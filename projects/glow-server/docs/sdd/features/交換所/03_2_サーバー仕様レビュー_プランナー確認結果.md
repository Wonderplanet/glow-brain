# サーバー実装観点の仕様レビュープランナー確認結果：交換所

## 4. プランナーへ確認が必要な項目まとめ（最重要）

### Q1: 交換所の階層構造について
- **質問:** 交換所機能では、「交換所」という大きな括りの下に複数の「ラインナップ」が存在する構造ですが、交換所自体をマスタデータとして管理する必要がありますか？ それともラインナップマスタのみで、交換所はUI上のグループ化だけですか？
回答：交換所自体をマスタデータとして管理する必要がある。交換所の期限設定など、基本設定が必要だったりするので。

### Q2: 複数リソース消費の実装について
- **質問:** 1回の交換で複数種類のリソース（例: コイン1000 + アイテムA 10個）を同時に消費するラインナップを用意する予定はありますか？ 工数見積もりに「複数リソース消費が必要なら +3人日」と記載されていますが、実装の要否を確定させてください
回答：複数想定で実装する。

### Q3: 月次リセットの実行タイミングについて
- **質問:** 通常交換所の月次リセット（毎月初日04:00）は、バッチ処理で一斉にリセットする方式ですか？ それとも、ユーザーが交換実行時に自動判定してリセットする方式ですか？ （後者の場合、04:00以降の初回アクセス時にリセットされます）
回答：ユーザーが交換実行時に自動判定してリセットする方針。実装の詳細と方針は、既存のショップアイテムの実装を参考にする。

### Q4: 復刻時のID切り直しと交換履歴について
- **質問:** イベント交換所を復刻する際、「交換所IDを新規で切り直す」とのことですが、これにより交換履歴もリセットされますか？ それとも、旧交換所の履歴を引き継ぎますか？
回答：交換履歴(ユーザーデータ)はそのままになります。交換所IDを新規で切り直したら、ユーザーレコードの新規で作成されるイメージ。

### Q5: キャラのかけらBOX交換所の選択肢について
- **質問:** キャラのかけらBOX交換所では、どのキャラのかけらでも選択できますか？ それとも、レアリティごとに異なるBOX（URかけらBOX、SSRかけらBOX等）を用意し、選択肢を制限しますか？
回答：既存実装済みなのでここでは考慮不要。

### Q6: アイテムBOX整理案の採用可否
- **質問:** アイテムBOXの整理について、第一希望案（タブ切り替え）と第二希望案（帯名称変更）のどちらを採用しますか？ また、交換所機能の実装と同時に行う必要がありますか？
回答：UIなのでサーバー考慮不要

### Q7: 初回無料や広告視聴による交換
- **質問:** 交換所でも、ショップアイテムと同様に初回無料や広告視聴で交換できるラインナップを用意する予定はありますか？
回答：不要。

### Q8: 交換済みラインナップの表示
- **質問:** 交換上限に達したラインナップは、「交換済み」として画面に表示し続けますか？ それとも、非表示にしますか？
回答：UIなのでサーバー考慮不要。

### Q9: まとめて交換時の「最大」の挙動
- **質問:** まとめて交換で「最大」を選択した際、交換上限と所持リソースのうち、どちらに合わせて最大値を計算しますか？ （例: 上限10回、所持リソースで5回分しか交換できない場合、「最大」は5回になりますか？）
回答：UIなのでサーバー考慮不要。

### Q10: お知らせ・IGNからの誘導先
- **質問:** お知らせやIGNから交換所に誘導する際、特定の交換所に直接遷移させますか？ それとも、交換所一覧画面に遷移させますか？ 特定の交換所に遷移させる場合、どのようなパラメータを使用しますか？
回答：特定の交換所に直接遷移させる。

### Q11: イベント交換所の交換上限リセット周期
- **質問:** イベント交換所の交換上限は、イベント期間全体で何回までという設定ですか？ それとも、日次/週次でリセットされる設定も可能にしますか？
回答：可能にする。

### Q12: 交換時のミッション・クエストトリガー
- **質問:** 「交換所でアイテムを交換する」というミッション条件を設定する予定はありますか？ 設定する場合、交換所の種類（通常/イベント）ごとに別条件としますか？
回答：今はない。
