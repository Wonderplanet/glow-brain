# BOXガシャ - サーバー要件抽出

## サーバー要件一覧

### 要件1: BOX内アイテムの総数管理
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「1.『努力が必ず報われる』ことによるプレイ動機の維持」
- **抜粋:**
  > 中身の総数が決まっているため、どれだけ運が悪くても「引き続ければ必ず目玉報酬が手に入る」という安心感（天井の可視化）があります。
- **サーバー観点での補足:**
  - BOX内のアイテム総数を事前定義し、引く度に残数を減算管理する必要がある

### 要件2: 目玉報酬の確実な提供
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「1.『努力が必ず報われる』ことによるプレイ動機の維持」
- **抜粋:**
  > どれだけ運が悪くても「引き続ければ必ず目玉報酬が手に入る」という安心感（天井の可視化）があります。
  > ドロップ率に左右されるストレスがないため、ユーザーは明確なゴール（BOXの空）に向かってモチベーション高く周回を続けることができます。
- **サーバー観点での補足:**
  - BOX内の残りアイテムから抽選を行い、引いたアイテムを除外する仕組みが必要（天井保証の実装）

### 要件3: 育成素材・通貨の配布
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「2.全ユーザー層への『育成素材』の効率的な供給」
- **抜粋:**
  > BOX内には目玉報酬だけでなく、大量の「育成素材」や「通貨」が含まれるのが一般的です。
  > これにより、イベントを遊ぶだけでキャラクター育成に必要な素材が自然と集まるため、素材不足に悩む初心者・中級者の育成支援（救済）として極めて重要な役割を果たします。
- **サーバー観点での補足:**
  - BOX内に複数種類のアイテム（目玉報酬、育成素材、通貨）を格納し、抽選結果に応じて各種アイテムを配布する処理が必要

### 要件4: BOXのリセット機能
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「3.アクティブ率とプレイ時間の最大化（周回誘導）」
- **抜粋:**
  > 「あと〇回引ければリセットできる」「次の箱に欲しい素材がある」という心理が働き、スタミナ消費やログイン時間を自然に引き伸ばす効果があります。
- **サーバー観点での補足:**
  - BOXが空になった際、またはユーザー操作により、BOX内容を初期状態にリセットする機能が必要

### 要件5: 無限ボックス（エクストラ箱）の提供
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「3.アクティブ率とプレイ時間の最大化（周回誘導）」
- **抜粋:**
  > 特に、報酬を取り切った後も継続できる「無限ボックス（エクストラ箱）」を用意することで、ヘビーユーザーの余剰リソースの受け皿となり、イベント終了までゲームを遊ばせる強力な動機となります。
- **サーバー観点での補足:**
  - 通常BOXを全て引き切った後も継続可能な「無限ボックス」の状態管理と、繰り返しリセット可能な仕組みが必要

### 要件6: ラインナップ更新機能
- **元ページ:** Page 19, 「BOXガシャ_イメージ」
- **抜粋:**
  > （画面イメージ内の「ラインナップ更新」ボタン）
- **サーバー観点での補足:**
  - BOX内容を更新（リセット）するタイミングと、更新後の新しいラインナップの提供が必要

### 要件7: アイテム収集によるガシャ実行
- **元ページ:** Page 19, 「BOXガシャ_イメージ」
- **抜粋:**
  > アイテムAを集めてBOXガシャを引こう
- **サーバー観点での補足:**
  - 特定のアイテム（例: イベント専用アイテムA）の所持数を消費してBOXガシャを引く処理が必要

### 要件8: 単発引きと複数回引き
- **元ページ:** Page 19, 「BOXガシャ_イメージ」
- **抜粋:**
  > （画面イメージ内の「1回 ×150」「10回 ×1,500」ボタン）
- **サーバー観点での補足:**
  - 1回引き、および複数回まとめて引く機能の実装と、各回数に応じた消費アイテム数の管理が必要

### 要件9: ガシャ結果の表示
- **元ページ:** Page 19, 「BOXガシャ_イメージ」
- **抜粋:**
  > （画面イメージ内の「ガシャ結果」画面とアイテムアイコンの表示）
  > 獲得済みのキャラはきちんとあけらたに自動変換されました
- **サーバー観点での補足:**
  - 抽選結果として獲得したアイテムのリストを返却し、重複キャラクターの自動変換処理が必要

### 要件10: イベント期間管理
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「3.アクティブ率とプレイ時間の最大化（周回誘導）」
- **抜粋:**
  > ヘビーユーザーの余剰リソースの受け皿となり、イベント終了までゲームを遊ばせる強力な動機となります。
- **サーバー観点での補足:**
  - BOXガシャイベントの開始・終了時刻の管理と、期間外のアクセス制限が必要

### 要件11: BOXの残数・進捗状態の管理
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「1.『努力が必ず報われる』ことによるプレイ動機の維持」
- **抜粋:**
  > ユーザーは明確なゴール（BOXの空）に向かってモチベーション高く周回を続けることができます。
- **サーバー観点での補足:**
  - 各ユーザーのBOX引き状態（残りアイテム数、既に引いたアイテム）を記録・管理する必要がある

### 要件12: スタミナ消費との連携
- **元ページ:** Page 18, 「BOXガシャの利点と重要性」セクション、「3.アクティブ率とプレイ時間の最大化（周回誘導）」
- **抜粋:**
  > スタミナ消費やログイン時間を自然に引き伸ばす効果があります。
- **サーバー観点での補足:**
  - BOXガシャを引くためのアイテム収集過程でスタミナ消費が発生する場合、スタミナ管理システムとの連携が必要
