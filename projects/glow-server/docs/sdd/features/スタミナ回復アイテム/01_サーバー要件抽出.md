# サーバー要件抽出：スタミナ回復アイテム

## ドキュメント情報
- **対象機能**: スタミナ回復アイテム
- **元PDF**: ゲーム体験仕様書.pdf
- **抽出日**: 2025-11-27
- **ステータス**: 初版

---

## サーバー要件一覧

### 要件2: スタミナ上限値の半分回復仕様
- **元ページ**: Page 1, 右側の本文「本ゲームで実装の場合は...」セクション
- **抜粋**:
  > 本ゲームで実装の場合は、プリズム30個or広告視聴で全回復があるので、スタミナ回復アイテムでは、スタミナ上限値の半分回復ができるアイテムのみがあれば良いと考えます。
- **サーバー観点での補足**:
  - プレイヤーごとのスタミナ上限値を参照し、その半分の値を計算して回復させる処理が必要になる
  - スタミナ値の更新・検証をサーバー側で行う必要がある

### 要件5: アイテム配布と報酬管理
- **元ページ**: Page 1, 右側の本文「3. 運営施策としての有用性」セクション
- **抜粋**:
  > インセンティブの柔軟性：ログインボーナスやミッション報酬として配布することで、「毎日ログインする動機」を安価に作れます
  > お詫び対応の適正化：不具合時のお詫びとして、課金通貨ではなくスタミナ剤を配布することで、売上への直接的なダメージを抑えつつ、ユーザーの不満を解消できます。
  > イベント報酬などにするのは良さそうです。
- **サーバー観点での補足**:
  - ログインボーナス、ミッション報酬、イベント報酬、お詫び配布など、複数の経路でアイテムを付与する仕組みが必要になる
  - 配布履歴・受け取り履歴を記録・管理する必要がある

### 要件7: イベント時の使用促進
- **元ページ**: Page 1, 右側の本文「1. 売上・KPIへの貢献」セクション
- **抜粋**:
  > イベント時のブースト効果：ランキングイベントや周回イベントにおいて、自然回復を待てないユーザーの「時間を金で買う」需要を喚起し、短期間での売上急増（スパイク）を作れます。
- **サーバー観点での補足**:
  - イベント開催期間中のアイテム使用状況を記録・分析できるようにする必要がある
  - ランキングイベントや周回イベントと連携したアイテム使用のログを取得する必要がある

---

## 不明点・確認事項

### 仕様の詳細確認が必要な項目
3. **複数アイテムの同時使用**
   - UI上「使用数: 10」と表示されているが、複数個を一括使用できる仕様か
   - 一括使用時のスタミナ上限制御（2倍超過防止）はどう処理するか

4. **自動選択ロジックの詳細**
   - 自動選択機能の実装場所（クライアント/サーバー）はどちらか
   - 自動選択の優先順位（回復量の少ない順/多い順、期限の近い順など）はどうするか

5. **API回復との優先度**
   - 既存の「プリズム30個で全回復」「広告視聴で全回復」との使い分け・優先順位はどうするか
   - UIフロー上での導線設計はどうするか

---

## 次のステップ

このサーバー要件抽出を元に、以下の作業を進めます:

1. **既存コード調査**: 既存のスタミナ管理機能、アイテム管理機能、報酬配布機能の実装状況を確認
2. **プランナー確認**: 不明点・確認事項について企画側に質問し、仕様を明確化
3. **要件定義書作成**: サーバー側で実装すべき機能要件を詳細に定義
4. **API設計**: 必要なエンドポイント、リクエスト/レスポンス仕様を設計

---

## 備考

- 本仕様書は1ページのみで、主にビジネス的な背景・意義とアイテムの基本コンセプトが記載されている
- 詳細な画面遷移、エラーハンドリング、エッジケース処理については別途仕様の詳細化が必要
- スタミナ回復アイテムは既存のスタミナ管理システム、アイテム管理システムとの連携が前提となる
