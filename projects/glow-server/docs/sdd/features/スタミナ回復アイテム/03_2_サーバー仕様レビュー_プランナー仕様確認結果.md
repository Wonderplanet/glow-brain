# サーバー実装観点の仕様レビュー_プランナー仕様確認結果

## 4. プランナーへ確認が必要な項目まとめ（最重要）

### Q1: スタミナ満タン時の使用可否について

スタミナが上限値に達している状態（満タン）の時、スタミナ回復アイテムを使用できるようにしますか?

回答：
満タン時は使用不可（既存のスタミナ購入と同じ挙動）

### Q2: 複数個使用時のスタミナ上限制御について

スタミナ回復アイテムを複数個使用する際、スタミナ上限（999）を超える使用はどのように制御しますか?

回答：
UI側で上限を超えない個数のみ選択可能にする

### Q3: 自動選択機能の実装について

仕様書抽出の「不明点」に記載されていた「自動選択機能」は、実装する予定ですか?

回答：
実装しない: 本項目は不要（ユーザーが手動で選択）

### Q4: アイテム使用ミッションの存在について

「スタミナ回復アイテムを使用する」というミッションは存在しますか?

回答：
なし

### Q5: 指定%分の回復量の計算方法について
(スタミナ上限値 × 50%) の結果の小数点を切り捨てた値を、最終的な回復量として問題ないか。
既存の、プリズムや広告視聴での回復量計算でも同様に、切り捨てで実装済みになっております。

[確認slack](https://wonderplanet-glow.slack.com/archives/C069N3UL80H/p1764567729845959?thread_ts=1764567562.869119&cid=C069N3UL80H)

回答：切り捨てで問題ない。

### Q6: 複数個同時使用について
既存のプリズム・広告視聴によるスタミナ回復のUIとは異なり、個数選択をできるようにするか。
スタミナ上限を超えない限り、スタミナ回復アイテムを1度に2つ以上消費して回復可能か。

[確認slack](https://wonderplanet-glow.slack.com/archives/C069N3UL80H/p1764567562869119)

回答：
- 個数選択をできるようにする（既存のプリズム・広告視聴のUIとは異なる）
- 「現在スタミナ」が「スタミナ上限」を超えない限り、1度に2つ以上消費して回復可能
- **回復後のスタミナがスタミナ上限を超えることは許可**（システム上限999まで）
- 例：スタミナが50/180の場合（アイテム1個で+90回復）
  - 1個目使用: 50+90=140（< 180なので、まだ2個目も使用可能）
  - 2個目使用: 140+90=230（> 180だが、**230まで回復OK**）
  - 2個目使用後は「現在スタミナ230」>「スタミナ上限180」なので、3個目は使用不可
- つまり「使用可否の判定」は現在スタミナと上限の比較で行い、「回復量の制限」はシステム上限999まで許可
