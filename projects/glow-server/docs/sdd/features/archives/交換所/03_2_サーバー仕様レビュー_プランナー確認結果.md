# サーバー実装観点の仕様レビュープランナー確認結果 - 交換所機能

## 4. プランナーへ確認が必要な項目まとめ（最重要）

### 4.1 仕様の明確化

#### Q1: 複数リソース消費の対応
**質問**: 1つのラインナップで複数種類のリソース（例: コイン1000 + アイテムA×10）を同時に消費する仕様は必要ですか？
**回答**: 実装必要。

#### Q2: 通算交換回数の用途
**質問**: `trade_total_count`（通算交換回数）は、ログ分析専用ですか？それともゲーム仕様として使用しますか？
**回答**: 使うので記録しておく。

#### Q3: リセット処理の実行方式
**質問**: 通常交換所の「毎月初日04:00リセット」は、バッチ処理で一括リセットしますか？それともユーザーのアクセス時に判定してリセットしますか？
**回答**: バッチはしない。ユーザーのアクセス時に判定してリセットする。ショップアイテムの既存実装を参考にする。

#### Q4: 原画アイテムの実装方法
**質問**: 原画を交換した際の「16ピース分の演出」は、サーバー側で16個のアイテムとして付与しますか？それとも1個のアイテムを付与してクライアント側で16ピース演出しますか？
**回答**:原画のかけらも原画も付与して、完全に完成した状態でユーザーデータに記録する

#### Q5: アイテムBOXのタブ分類方法
**質問**: アイテムBOXの3タブ（消費・強化・かけら）の分類は、既存のItemGroupTypeを拡張しますか？それとも新しいenum（ItemTabType等）を定義しますか？
**回答**: 考慮不要

### 4.2 境界条件の明確化

#### Q6: まとめて交換時の初期個数とデフォルト値
**質問**: 交換確認ダイアログを開いた際の初期交換個数は何個ですか？
**回答**:　画面仕様なのでサーバー考慮不要。

#### Q7: リソース不足時の表示形式
**質問**: リソース不足時の表示形式を全画面で統一したい（Page 13記載）ですが、どの形式に統一しますか？
**回答**: UIなのでサーバー考慮不要。

#### Q8: 復刻イベント時の交換履歴の扱い
**質問**: イベント交換所を復刻する際、ユーザーの過去の交換履歴は引き継ぎますか？それともリセット（新規）しますか？
**回答**: リセットとかはしない。実装で対応するのではなく、ラインナップはそのままで、交換所IDを切り替えることで復刻データを作る想定。

### 4.3 UI/UX関連の確認

#### Q9: 交換上限到達後の表示
**質問**: 交換上限到達後のボタン表示は「交換済み」（Page 7記載）ですが、リセット後に再び交換可能になる場合、ユーザーが誤解しませんか？
**回答**: UIなのでサーバー考慮不要。

#### Q10: イベント交換所の期限切れ後の猶予期間
**質問**: イベント交換所は、イベント終了後すぐに非表示になりますか？それとも猶予期間（例: 1日）がありますか？
**回答**:すぐ非表示になる。

### 4.4 実装優先度の確認

#### Q11: 売却機能の実装タイミング
**質問**: アイテムBOXの売却機能は、交換所機能と同時に実装しますか？それとも別タイミングですか？
**回答**:　売却なんてないので考慮不要。

#### Q12: キャラのかけら表示順序のカスタマイズ
**質問**: 「表示順をキャラ一覧のデフォルトの表示順に合わせて表示する（できたら）」（Page 9記載）の優先度はどのくらいですか？
**回答**: サーバー考慮不要。

#### Q13: 初回無料フラグの実装有無
**質問**: 交換所機能で「初回無料」の仕組みを実装する予定はありますか？
**回答**: 交換所では不要。
