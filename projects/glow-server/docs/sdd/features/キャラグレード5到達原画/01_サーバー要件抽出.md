# サーバー要件抽出 - キャラグレード5到達原画

## サーバー要件一覧

### 要件1
- **元ページ:** Page 1, 「基本仕様_キャラ グレード5強化時原画獲得_1-1」の基本仕様セクション
- **抜粋:**
  > キャラをグレード5まで強化した際に、原画が獲得できるように設定を追加する。キャラIDと獲得できる原画のIDが紐づくようにし、グレード5強化時に報酬として設定できるようにする。
- **サーバー観点での補足:**
  - キャラIDと原画IDのマッピングデータの管理、およびグレード5到達時の原画獲得処理における整合性確保が必要

### 要件2
- **元ページ:** Page 1, 「基本仕様_キャラ グレード5強化時原画獲得_1-1」の基本仕様セクション
- **抜粋:**
  > グレード5までの強化で原画が獲得可能になる。リリース時はURキャラのみに設定する。
- **サーバー観点での補足:**
  - キャラレアリティ（UR）による原画獲得可否の判定ロジックとフィルタリングが必要

### 要件3
- **元ページ:** Page 1, 「アイコンの表示とキャラ詳細画面から遷移」セクション
- **抜粋:**
  > グレード5まで強化できていない場合は、原画の上に鍵アイコンが表示される。タップして原画詳細画面への遷移は可能。
- **サーバー観点での補足:**
  - ユーザーのキャラグレード進行状態とロック/アンロック状態の判定データの提供が必要

### 要件4
- **元ページ:** Page 2, 「基本仕様_キャラ グレード5強化時に原画獲得_表示と演出_1-2」の演出セクション
- **抜粋:**
  > 該当のグレード（リリース時はグレード5）強化時にそのキャラの原画が獲得できる。その場合に、原画完成演出（画面）をグレードアップ演出画面のタップで閉じるを押した後に表示、再生する。
- **サーバー観点での補足:**
  - グレードアップ時の原画獲得フラグの記録と、演出トリガー情報の管理が必要

### 要件5
- **元ページ:** Page 2, 「基本仕様_キャラ グレード5強化時に原画獲得_表示と演出_1-2」の演出セクション
- **抜粋:**
  > 機能リリース時に既にグレード5に強化完了している場合は、そのキャラのキャラ詳細画面に遷移した際に、原画完成演出（画面）を表示する。
- **サーバー観点での補足:**
  - 既存ユーザーのグレード5到達済みキャラの洗い出しと、原画未獲得フラグの初期化処理が必要

### 要件6
- **元ページ:** Page 2, 「原画獲得に関する表示について」セクション
- **抜粋:**
  > 必殺ワザ詳細画面の★（グレード表示）の項目毎に獲得できる効果の箇所に原画獲得できる場合は、『「キャラ名」の原画獲得』の文言を表示する。
- **サーバー観点での補足:**
  - グレード別の報酬情報に原画獲得有無のメタデータ含有と、表示用テキストの提供が必要

### 要件7
- **元ページ:** Page 2, 「原画獲得に関する表示について」セクション
- **抜粋:**
  > 該当のグレードアップで原画を獲得できる場合は、グレードアップ確認ダイアログの必殺ワザ文言の下に『「キャラ名」の原画獲得』の文言を表示する。これは、グレードアップ演出で表示される箇所も同様とする。
- **サーバー観点での補足:**
  - グレードアップ実行前の事前チェックにおいて、原画獲得可否情報の提供が必要

## 要件サマリー

合計7つのサーバー要件を抽出しました。主な要件は以下の通りです：

- キャラIDと原画IDのマッピングデータ管理
- キャラレアリティによる原画獲得可否の判定
- ユーザーごとのキャラグレード進行状態とロック/アンロック状態の管理
- グレードアップ時の原画獲得フラグの記録
- 既存ユーザーのグレード5到達済みキャラへの対応（初期化処理）
- グレード別報酬情報のメタデータ管理
- クライアント表示用の原画獲得可否情報の提供
