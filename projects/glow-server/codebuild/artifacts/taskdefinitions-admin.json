{
    "containerDefinitions":[
        {
            "name":"php-admin",
            "image":"<PHP_IMAGE>",
            "cpu":0,
            "portMappings":[
                {
                    "name":"php-admin-9000-tcp",
                    "containerPort":9000,
                    "hostPort":9000,
                    "protocol":"tcp",
                    "appProtocol":"http"
                }
            ],
            "essential":true,
            "environment":[
                {
                    "name": "REDIS_HOST",
                    "value": "redis.<INFRA_ENV>.<PJ_NAME>.internal"
                },
                {
                    "name":"APP_NAME",
                    "value":"<INFRA_ENV> Admin"
                },
                {
                    "name":"APP_ENV",
                    "value":"<INFRA_ENV>"
                },
                {
                    "name": "MASTER_DB_HOST",
                    "value": "db-write.<INFRA_ENV>.<PJ_NAME>.internal"
                },
                {
                    "name": "MASTER_DB_DATABASE",
                    "value": "<INFRA_ENV>"
                },
                {
                    "name": "MANAGE_DB_HOST",
                    "value": "db-write.<INFRA_ENV>.<PJ_NAME>.internal"
                },
                {
                    "name": "MANAGE_DB_PORT",
                    "value": "3306"
                },
                {
                    "name": "MANAGE_DB_DATABASE",
                    "value": "mng"
                },
                {
                    "name": "TIDB_DATABASE",
                    "value": "<INFRA_ENV>"
                },
                {
                    "name": "ADMIN_DB_HOST",
                    "value": "db-write.<INFRA_ENV>.<PJ_NAME>.internal"
                },
                {
                    "name": "MOMENTO_CACHE_NAME",
                    "value": "<PJ_NAME>-<INFRA_ENV>"
                },
                {
                    "name": "AWS_DEFAULT_REGION",
                    "value": "ap-northeast-1"
                },
                {
                    "name": "DB_DATABASE_API",
                    "value": "<INFRA_ENV>"
                },
                {
                    "name": "AWS_BUCKET",
                    "value": "<PJ_NAME>-<INFRA_ENV>-master"
                },
                {
                    "name": "AWS_BANNER_BUCKET",
                    "value": "<PJ_NAME>-<INFRA_ENV>-banner"
                },
                {
                    "name": "AWS_INFORMATION_BUCKET",
                    "value": "<PJ_NAME>-<INFRA_ENV>-information"
                },
                {
                    "name": "AWS_WEBVIEW_BUCKET",
                    "value": "<PJ_NAME>-<INFRA_ENV>-webview"
                },
                {
                    "name": "GIT_BRANCH",
                    "value": "release/<INFRA_ENV>"
                },
                {
                    "name": "AWS_DYNAMODB_MAINTENANCE_TABLE",
                    "value": "<PJ_NAME>-<INFRA_ENV>-maintenance"
                },
                {
                    "name": "SYSTEM_MAINTENANCE_SCHEDULER_NAME_START",
                    "value": "<PJ_NAME>-<INFRA_ENV>-maintenance-schedule-start"
                },
                {
                    "name": "SYSTEM_MAINTENANCE_SCHEDULER_NAME_END",
                    "value": "<PJ_NAME>-<INFRA_ENV>-maintenance-schedule-end"
                },
                {
                    "name": "MAINTENANCE_LAMBDA_FUNCTION_NAME",
                    "value": "<PJ_NAME>-<INFRA_ENV>-maintenance-change-route"
                },
                {
                    "name": "JUMP_PLUS_REWARD_LAMBDA_FUNCTION_NAME",
                    "value": "<PJ_NAME>-<INFRA_ENV>-jump-plus-reward-registration"
                },
                {
                    "name": "PACKAGE_NAME",
                    "value": "com.bandainamcoent.jumpplus_jumblerush"
                },
                {
                    "name": "BNE_TITLE_ID",
                    "value": "600"
                },
                {
                    "name": "BNE_VOIDED_PURCHASE_S3_BUCKET",
                    "value": "storedatastore01"
                },
                {
                    "name": "BNE_VOIDED_PURCHASE_S3_REGION",
                    "value": "ap-northeast-1"
                },
                {
                    "name": "AWS_WP_DATALAKE_BUCKET",
                    "value": "<PJ_NAME>-<INFRA_ENV>-datalake"
                },
                {
                    "name": "ATHENA_DATABASE",
                    "value": "<PJ_NAME>_<INFRA_ENV>_user_action_logs"
                }
            ],
            "mountPoints":[
                {
                    "sourceVolume": "glow_client_asset",
                    "containerPath": "/var/www/admin/storage/app/glow_client"
                }
            ],
            "volumesFrom":[],
            "linuxParameters":null,
            "secrets":[
                {
                    "name": "ADMIN_DB_USERNAME",
                    "valueFrom": "<SECRET>:glow-aurora-admin-user::"
                },
                {
                    "name": "ADMIN_DB_PASSWORD",
                    "valueFrom": "<SECRET>:glow-aurora-admin-pass::"
                },
                {
                    "name": "MASTER_DB_USERNAME",
                    "valueFrom": "<SECRET>:glow-aurora-admin-user::"
                },
                {
                    "name": "MASTER_DB_PASSWORD",
                    "valueFrom": "<SECRET>:glow-aurora-admin-pass::"
                },
                {
                    "name": "MANAGE_DB_USERNAME",
                    "valueFrom": "<SECRET>:glow-aurora-admin-user::"
                },
                {
                    "name": "MANAGE_DB_PASSWORD",
                    "valueFrom": "<SECRET>:glow-aurora-admin-pass::"
                },
                {
                    "name": "TIDB_HOST",
                    "valueFrom": "<SECRET>:glow-tidb-host::"
                },
                {
                    "name": "TIDB_USERNAME",
                    "valueFrom": "<SECRET>:glow-tidb-admin-user::"
                },
                {
                    "name": "TIDB_PASSWORD",
                    "valueFrom": "<SECRET>:glow-tidb-admin-pass::"
                },
                {
                    "name": "TIDB_MYSQL_ATTR_SSL_CA",
                    "valueFrom": "<SECRET>:tidb-mysql-attr-ssl-ca::"
                },
                {
                    "name": "MOMENTO_API_KEY",
                    "valueFrom": "<SECRET>:glow-momento-api-key::"
                },
                {
                    "name": "AWS_ACCESS_KEY_ID",
                    "valueFrom": "<SECRET>:aws-access-key::"
                },
                {
                    "name": "AWS_SECRET_ACCESS_KEY",
                    "valueFrom": "<SECRET>:aws-secret-access-key::"
                },
                {
                    "name": "AWS_BANNER_BUCKET_URL",
                    "valueFrom": "<SECRET>:aws-banner-bucket-url::"
                },
                {
                    "name": "AWS_BANNER_CLOUDFRONT_DISTRIBUTION_ID",
                    "valueFrom": "<SECRET>:aws-banner-cloudfront-distribution-id::"
                },
                {
                    "name": "AWS_INFORMATION_BUCKET_URL",
                    "valueFrom": "<SECRET>:aws-information-bucket-url::"
                },
                {
                    "name": "AWS_INFORMATION_CLOUDFRONT_DISTRIBUTION_ID",
                    "valueFrom": "<SECRET>:aws-information-cloudfront-distribution-id::"
                },
                {
                    "name": "AWS_WEBVIEW_BUCKET_URL",
                    "valueFrom": "<SECRET>:aws-webview-bucket-url::"
                },
                {
                    "name": "AWS_WEBVIEW_CLOUDFRONT_DISTRIBUTION_ID",
                    "valueFrom": "<SECRET>:aws-webview-cloudfront-distribution-id::"
                },
                {
                    "name": "SHEET_API_CREDENTIALS",
                    "valueFrom": "<SECRET>:sheet-api-credentials::"
                },
                {
                    "name": "AWS_MASTER_DATA_MYSQLDUMP_BUCKET",
                    "valueFrom": "<SECRET>:aws-master-data-mysqldump-bucket::"
                },
                {
                    "name": "GIT_REPOSITORY",
                    "valueFrom": "<SECRET>:git-repository::"
                },
                {
                    "name": "IMPORTABLE_FROM_ENVIRONMENT_LIST",
                    "valueFrom": "<SECRET>:importable-from-environment-list::"
                },
                {
                    "name": "AWS_ALL_S3_ACCESS_KEY_ID",
                    "valueFrom": "<SECRET>:aws-all-s3-access-key-id::"
                },
                {
                    "name": "AWS_ALL_S3_SECRET_ACCESS_KEY",
                    "valueFrom": "<SECRET>:aws-all-s3-secret-access-key::"
                },
                {
                    "name": "AWS_SOURCE_ROLE_ARN",
                    "valueFrom": "<SECRET>:aws-source-role-arn::"
                },
                {
                    "name": "AWS_ENV_S3_ACCESS_KEY_ID",
                    "valueFrom": "<SECRET>:aws-env-s3-access-key-id::"
                },
                {
                    "name": "AWS_ENV_S3_SECRET_ACCESS_KEY",
                    "valueFrom": "<SECRET>:aws-env-s3-secret-access-key::"
                },
                {
                    "name": "AWS_ENV_S3_BUCKET",
                    "valueFrom": "<SECRET>:aws-env-s3-bucket::"
                },
                {
                    "name": "AWS_ENV_CLOUDFRONT_DISTRIBUTION_ID",
                    "valueFrom": "<SECRET>:aws-env-cloudfront-distribution-id::"
                },
                {
                    "name": "ENCRYPTION_ENV_DATA_PASSWORD",
                    "valueFrom": "<SECRET>:encryption-env-data-password::"
                },
                {
                    "name": "ENCRYPTION_ENV_DATA_SALT",
                    "valueFrom": "<SECRET>:encryption-env-data-salt::"
                },
                {
                    "name": "ENCRYPTION_MASTER_DATA_ENABLED",
                    "valueFrom": "<SECRET>:encryption-master-data-enabled::"
                },
                {
                    "name": "ENCRYPTION_MASTER_DATA_PASSWORD",
                    "valueFrom": "<SECRET>:encryption-master-data-password::"
                },
                {
                    "name": "AWS_STAGING_ACCESS_KEY_ID",
                    "valueFrom": "<SECRET>:aws-staging-access-key::"
                },
                {
                    "name": "AWS_STAGING_SECRET_ACCESS_KEY",
                    "valueFrom": "<SECRET>:aws-staging-secret-access-key::"
                },
                {
                    "name": "DATALAKE_GCS_PROJECT_ID",
                    "valueFrom": "<SECRET>:datalake-gcs-project-id::"
                },
                {
                    "name": "DATALAKE_GCS_KEY",
                    "valueFrom": "<SECRET>:datalake-gcs-key::"
                },
                {
                    "name": "DATALAKE_GCS_BUCKET",
                    "valueFrom": "<SECRET>:datalake-gcs-bucket::"
                },
                {
                    "name": "DATALAKE_SLACK_WEBHOOK_URL",
                    "valueFrom": "<SECRET>:datalake-slack-webhook-url::"
                },
                {
                    "name": "BNE_APPLICATION_ID",
                    "valueFrom": "<SECRET>:bne-application-id::"
                },
                {
                    "name": "BNE_CLIENT_ID",
                    "valueFrom": "<SECRET>:bne-client-id::"
                },
                {
                    "name": "BNE_CLIENT_SECRET",
                    "valueFrom": "<SECRET>:bne-client-secret::"
                },
                {
                    "name": "BANK_AWS_ACCESS_KEY_ID",
                    "valueFrom": "<SECRET>:bank-aws-access-key-id::"
                },
                {
                    "name": "BANK_AWS_SECRET_ACCESS_KEY",
                    "valueFrom": "<SECRET>:bank-aws-secret-access-key::"
                },
                {
                    "name": "BANK_AWS_DEFAULT_REGION",
                    "valueFrom": "<SECRET>:bank-aws-default-region::"
                },
                {
                    "name": "BANK_AWS_BUCKET",
                    "valueFrom": "<SECRET>:bank-aws-bucket::"
                },
                {
                    "name": "LOG_LEVEL",
                    "valueFrom": "<SECRET>:log-level::"
                },
                {
                    "name": "GOOGLE_CLIENT_ID",
                    "valueFrom": "<SECRET>:google-client-id::"
                },
                {
                    "name": "GOOGLE_CLIENT_SECRET",
                    "valueFrom": "<SECRET>:google-client-secret::"
                },
                {
                    "name": "GOOGLE_REDIRECT_URL",
                    "valueFrom": "<SECRET>:google-redirect-url::"
                },
                {
                    "name": "AWS_ACCESS_KEY_ID_BNE",
                    "valueFrom": "<SECRET>:aws-access-key-id-bne::"
                },
                {
                    "name": "AWS_SECRET_ACCESS_KEY_BNE",
                    "valueFrom": "<SECRET>:aws-secret-access-key-bne::"
                },
                {
                    "name": "AWS_DEFAULT_REGION_BNE",
                    "valueFrom": "<SECRET>:aws-default-region-bne::"
                },
                {
                    "name": "AWS_BUCKET_BNE",
                    "valueFrom": "<SECRET>:aws-bucket-bne::"
                },
                {
                    "name": "BNE_VOIDED_PURCHASE_AWS_ACCESS_KEY",
                    "valueFrom": "<SECRET>:bne-voided-purchase-aws-access-key::"
                },
                {
                    "name": "BNE_VOIDED_PURCHASE_AWS_SECRET_ACCESS_KEY",
                    "valueFrom": "<SECRET>:bne-voided-purchase-aws-secret-access-key::"
                }
            ],
            "ulimits":[
                {
                    "name":"nofile",
                    "softLimit":65535,
                    "hardLimit":65535
                },
                {
                    "name":"nproc",
                    "softLimit":65535,
                    "hardLimit":65535
                }
            ],
            "logConfiguration":{
                "logDriver":"awslogs",
                "options":{
                    "awslogs-create-group":"true",
                    "awslogs-group":"/ecs/<PJ_NAME>-<INFRA_ENV>-admin-task",
                    "awslogs-region":"<AWS_DEFAULT_REGION>",
                    "awslogs-stream-prefix":"ecs"
                }
            }
        },
        {
            "name":"nginx-admin",
            "image":"<NGINX_IMAGE>",
            "cpu":0,
            "portMappings":[
                {
                    "name":"nginx-admin-80-tcp",
                    "containerPort":80,
                    "hostPort":80,
                    "protocol":"tcp"
                }
            ],
            "essential":true,
            "environment":[],
            "mountPoints":[
                {
                    "sourceVolume": "glow_client_asset",
                    "containerPath": "/var/www/admin/storage/app/glow_client"
                }
            ],
            "volumesFrom":[],
            "linuxParameters":null,
            "dependsOn":[
                {
                    "containerName":"php-admin",
                    "condition":"START"
                }
            ],
            "ulimits":[
                {
                    "name":"nofile",
                    "softLimit":65535,
                    "hardLimit":65535
                },
                {
                    "name":"nproc",
                    "softLimit":65535,
                    "hardLimit":65535
                }
            ],
            "logConfiguration":{
                "logDriver":"awslogs",
                "options":{
                    "awslogs-create-group":"true",
                    "awslogs-group":"/ecs/<PJ_NAME>-<INFRA_ENV>-admin-task",
                    "awslogs-region":"<AWS_DEFAULT_REGION>",
                    "awslogs-stream-prefix":"ecs"
                }
            }
        }
    ],
    "family":"<PJ_NAME>-<INFRA_ENV>-admin-def",
    "taskRoleArn":"arn:aws:iam::<AWS_ACCOUNT_ID>:role/<PJ_NAME2>EcsTaskRole",
    "executionRoleArn":"arn:aws:iam::<AWS_ACCOUNT_ID>:role/<PJ_NAME2>EcsTaskExecutionRole",
    "networkMode":"awsvpc",
    "requiresCompatibilities":[
        "EC2"
    ],
    "cpu":"2048",
    "memory":"4096",
    "runtimePlatform": {
        "cpuArchitecture": "ARM64",
        "operatingSystemFamily": "LINUX"
    },
    "volumes": [
        {
            "name": "glow_client_asset"
        }
    ]
}
