---
name: sdd-v2:api-review
description: API設計書の初稿をチェックリストに基づいてレビューし、規約違反を検出・修正する。
argument-hint: {機能名}
tools: ["*"]
---

# SDD v2 API設計書レビュー

API設計書の初稿に対し、チェックリストに基づいた品質レビューと微調整を行います。

## 使用方法

```
/api:sdd-v2:03-2-api-review {機能名}
```

例: `/api:sdd-v2:03-2-api-review 交換所`

## 実行内容

引数: $ARGUMENTS

専門エージェント「**sdd-v2-api-design-review**」に委譲して実行します。

エージェントは `api-sdd-v2-api-design-review` スキルを使用して作業を実施します。

## 前提条件

- `docs/sdd-v2/features/{機能名}/03_API設計書.md` が存在すること

## チェック項目

### カテゴリA: API設計の規約チェック

| 項目 | チェック内容 |
|------|-------------|
| A1 | パスパラメータを使用していないか |
| A2 | 一覧取得専用APIを追加していないか |
| A3 | opr_*テーブルを新規追加していないか |

### カテゴリB: レスポンス構造チェック

| 項目 | チェック内容 |
|------|-------------|
| B1 | キーがcamelCaseか、glow-schema定義と一致しているか |
| B2 | 報酬がgetRewardResponseData()形式か |
| B3 | 日時がISO8601形式で、StringUtil記載があるか |
| B4 | ResponseDataFactoryの既存メソッドを活用しているか |

### カテゴリC: 実装ガイダンスチェック

| 項目 | チェック内容 |
|------|-------------|
| C1 | トランザクション制御が明記されているか |
| C2 | データ出所（mst/usr/log）が明確か |

### カテゴリD: アーキテクチャ方針チェック

| 項目 | チェック内容 |
|------|-------------|
| D1 | 既存テーブル拡張を検討したか |

## 完了後のアクション

レビュー完了後、以下のいずれかに進みます:

1. 問題なし → refineフェーズ（`/sdd-v2:refine {機能名}`）へ
2. 問題あり・修正適用 → 再度レビュー、または refine へ
