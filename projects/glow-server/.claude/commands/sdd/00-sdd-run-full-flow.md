---
name: sdd:run-full-flow
---

# SDD設計フロー全実行

このコマンドは、SDD設計の全段階を自動実行します。

## 使用方法

```bash
/sdd:run-full-flow {機能名}
```

## 実行内容

以下の8段階を順次実行し、最終的なSDD仕様書を生成します：

### 要件定義フェーズ（01-05）

1. **サーバー要件抽出** - ゲーム仕様書からサーバー関与が必要な項目を抽出
2. **コード調査追記** - 仕様書に書かれていない暗黙の前提・制約を洗い出し
3. **サーバー仕様レビュー** - 仕様を詳細化し、曖昧さ・不明点を評価
4. **ゲーム体験仕様確認結果まとめ** - プランナー確認結果を整理（⚠️ 人間の確認が必要）
5. **サーバーAPI要件書まとめ** - 全ての情報を統合し、完全な要件書を作成

### 設計フェーズ（06-08）

6. **API実装全体概要設計** - APIエンドポイント全体像を把握（新規 vs 既存改修）
7. **サーバーAPI設計書作成** - 各APIの詳細仕様を設計（リクエスト・レスポンス・エラー）
8. **サーバーAPI機能要件実装設計** - 実装の詳細設計（DB設計・ドメイン設計・クリーンアーキテクチャ）

## 実装

sdd-orchestrator スキルを使用して、上記の段階を自動的にオーケストレートします。

各段階では、以下の既存コマンドを内部的に呼び出します：

**要件定義フェーズ：**
- `/sdd:extract-server-requirements` (Stage 1)
- `/sdd:investigate-code-requirements` (Stage 2)
- `/sdd:review-server-spec` (Stage 3)
- `/sdd:confirm-game-experience-spec` (Stage 4) ⚠️ 人間の確認が必要
- `/sdd:finalize-server-requirements` (Stage 5)

**設計フェーズ：**
- `/sdd:overview-api-design` (Stage 6)
- `/sdd:create-api-design` (Stage 7)
- `/sdd:design-api-implementation` (Stage 8)

## 機能名について

第1引数として機能名を指定してください。

例：
- `スタミナブースト`
- `新規ガチャ機能`
- `フレンド招待`

機能名は、以下の用途で使用されます：
1. テンプレートファイルの `{FEATURE_NAME}` プレースホルダー置換
2. 出力ファイルのディレクトリ名（`docs/sdd/features/{機能名}/`）
3. 各段階での専門エージェントへのコンテキスト受け渡し

## 所要時間

全段階の実行には、約25～30分かかります（Stage 4の人間確認時間を除く）。

## 出力ファイル

実行後、以下のファイルが生成されます：

```
docs/sdd/features/{機能名}/
├── サーバー要件抽出.md                      # Stage 1の出力
├── サーバー要件_コード調査追記.md           # Stage 2の出力
├── サーバー仕様レビュー.md                  # Stage 3の出力
├── ゲーム体験仕様確認結果まとめ.md          # Stage 4の出力
├── サーバーAPI要件書.md                     # Stage 5の出力（要件定義完了）
├── API実装全体概要設計.md                   # Stage 6の出力
├── サーバーAPI設計書.md                     # Stage 7の出力
└── サーバーAPI機能要件実装設計.md           # Stage 8の出力（設計完了）
```

## 注意事項

- **Stage 1-3は順次実行**されます
- **Stage 4では人間の確認が必要**です。プランナーへの確認結果を提供してください
- Stage 4完了後、**Stage 5で要件定義フェーズが完了**します
- **Stage 6-8（設計フェーズ）は並列実行可能**です
- 途中でエラーが発生した場合、該当段階から再実行できます
- 各段階の出力ファイルは保存されるため、途中結果の確認が可能です
