---
mode: 'agent'
tools: ['codebase', 'terminalCommand']
description: 'SDD設計フローの全8段階を一括実行します（ゲーム体験仕様書からサーバーAPI実装設計まで）'
---

# SDD設計フロー全実行

ゲーム体験仕様書（PDF）から、サーバーAPI実装設計書までの全8段階を実行します。

## 使用方法

機能名を入力してください: ${input:featureName:機能名を入力（例: スタミナブースト）}

## 実行内容

以下の8段階を順次実行し、最終的なSDD仕様書を生成します。

### 要件定義フェーズ（01-05）

1. **サーバー要件抽出** - ゲーム仕様書からサーバー関与が必要な項目を抽出
2. **コード調査追記** - 仕様書に書かれていない暗黙の前提・制約を洗い出し
3. **サーバー仕様レビュー** - 仕様を詳細化し、曖昧さ・不明点を評価
4. **ゲーム体験仕様確認結果まとめ** - プランナー確認結果を整理（⚠️ 人間の確認が必要）
5. **サーバーAPI要件書まとめ** - 全ての情報を統合し、完全な要件書を作成

### 設計フェーズ（06-08）

6. **API実装全体概要設計** - APIエンドポイント全体像を把握（新規 vs 既存改修）
7. **サーバーAPI設計書作成** - 各APIの詳細仕様を設計（リクエスト・レスポンス・エラー）
8. **サーバーAPI機能要件実装設計** - 実装の詳細設計（DB設計・ドメイン設計・クリーンアーキテクチャ）

## 前提条件

- `docs/sdd/features/${input:featureName}/` ディレクトリが存在すること
- `docs/sdd/features/${input:featureName}/ゲーム体験仕様書.pdf` が配置されていること

## 処理ステップ

1. `docs/sdd/features/${input:featureName}/ゲーム体験仕様書.pdf` を読み込む
2. 各段階のテンプレートファイル（`docs/sdd/prompts/0X_*_テンプレート.md`）を読み込む
3. テンプレート内の `{FEATURE_NAME}` を「${input:featureName}」に置換
4. 各段階を順次実行し、結果を対応する出力ファイルに保存

## 出力ファイル

```
docs/sdd/features/${input:featureName}/
├── 01_サーバー要件抽出.md                       # Stage 1の出力
├── 02_サーバー要件_コード調査追記.md            # Stage 2の出力
├── 03_サーバー仕様レビュー.md                   # Stage 3の出力
├── 04_ゲーム体験仕様確認結果まとめ.md           # Stage 4の出力
├── 05_サーバーAPI要件書.md                      # Stage 5の出力（要件定義完了）
├── 06_API実装全体概要設計.md                    # Stage 6の出力
├── 07_サーバーAPI設計書.md                      # Stage 7の出力
└── 08_サーバーAPI機能要件実装設計.md            # Stage 8の出力（設計完了）
```

## 注意事項

- **Stage 1-3は順次実行**されます
- **Stage 4では人間の確認が必要**です。プランナーへの確認結果を提供してください
- Stage 4完了後、**Stage 5で要件定義フェーズが完了**します
- **Stage 6-8（設計フェーズ）は並列実行可能**です
