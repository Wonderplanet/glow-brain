# Claude Code ガイド相談レポート

**日付**: 2026年01月14日
**トピック**: `-c`オプションのセッション管理とGit worktreeでの動作

## 相談内容

- `claude -c`（`--continue`）オプションは作業フォルダごとにセッション管理されているか
- Git worktreeで作成したディレクトリでは、そのディレクトリのセッションのみが`-c`オプションの対象になるか

## 重要な結論・学び

### `-c`オプションのセッション管理

Claude Codeの`-c`（`--continue`）オプションは、**作業フォルダごとにセッション管理**されています。

> **公式ドキュメント（CLI reference）より**:
>
> | Flag | Description | Example |
> |------|-------------|---------|
> | `--continue`, `-c` | **Load the most recent conversation in the current directory** | `claude --continue` |
>
> 出典: [CLI reference - --continue flag](https://code.claude.com/docs/en/cli-reference.md)

**重要なポイント**:
- 各作業ディレクトリで`claude -c`を実行すると、**そのディレクトリの直近セッション**が再開される
- セッションは**プロジェクトディレクトリごと**に保存される

### Git worktreeでの動作

Git worktreeを使用する場合、各worktreeディレクトリは**独立したセッション管理**を持ちます。

> **公式ドキュメント（Common workflows）より**:
>
> ```bash
> # Create a new worktree
> git worktree add ../project-feature-a -b feature-a
>
> # Run Claude Code in this isolated environment
> cd ../project-feature-a
> claude
> ```
>
> Each worktree has its own independent file state, making it perfect for parallel Claude Code sessions
>
> 出典: [Common workflows - Run parallel Claude Code sessions with Git worktrees](https://code.claude.com/docs/en/common-workflows.md)

**実際の動作**:

```bash
# mainブランチのworktree
cd /path/to/project-main
claude -c  # ← mainディレクトリの直近セッションを再開

# feature-aブランチのworktree
cd /path/to/project-feature-a
claude -c  # ← feature-aディレクトリの直近セッションを再開
```

両者は**完全に独立**して管理されます。

### セッションの保存場所

公式ドキュメントより、セッションは以下のように管理されています：

> **Sessions are stored per project directory.** The `/resume` picker shows sessions from the same git repository, **including worktrees**.
>
> 出典: [Common workflows - Resume previous conversations](https://code.claude.com/docs/en/common-workflows.md)

**ベストプラクティス**:
- 各worktreeで独立してセッションを管理できる
- `/resume`コマンドで、同じgitリポジトリ（worktreeを含む）のセッション一覧を表示できる
- `-c`オプションは最も手軽に直近セッションを再開できる

### セッション名による管理（補足）

より明確にセッションを管理したい場合、セッション名を付与できます：

```bash
# 現在のセッションに名前を付ける
> /rename auth-refactor

# 後で名前で再開（どのディレクトリからでも可能）
claude --resume auth-refactor
```

**コード例**:

```bash
# worktree A: 認証機能のリファクタリング
cd /path/to/project-auth
claude
> /rename auth-refactor
# 作業...

# worktree B: 決済機能の実装
cd /path/to/project-payment
claude
> /rename payment-feature
# 作業...

# 後日、どのディレクトリからでも再開可能
claude --resume auth-refactor  # 認証リファクタの続きを再開
claude --resume payment-feature  # 決済実装の続きを再開
```

**注意点**:
- セッション名は同じgitリポジトリ内で共有される
- worktree固有のセッションを明示的に管理したい場合に有用
- `-c`オプションは「そのディレクトリの直近」を再開するため、シンプルなケースではこちらで十分

## 参照ドキュメント

各トピックで参照した公式ドキュメントのURL一覧：

- [CLI reference - --continue flag](https://code.claude.com/docs/en/cli-reference.md)
- [Common workflows - Resume previous conversations](https://code.claude.com/docs/en/common-workflows.md)
- [Common workflows - Run parallel Claude Code sessions with Git worktrees](https://code.claude.com/docs/en/common-workflows.md)

## 次のアクション

- Git worktreeを活用した並行作業フローの確立
- セッション名を活用した複数タスクの管理
- `/resume`コマンドでのセッション一覧確認の活用

---

*このレポートは `/guide-chat` コマンドにより自動生成されました*
