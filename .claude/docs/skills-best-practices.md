# Claude Code Skills ベストプラクティス

このドキュメントは、claude-code-guideエージェントの公式ドキュメントから得られた情報を基に、Claude Code skillsの作成に関するベストプラクティスをまとめたものです。

## Skillsとカスタムコマンドの違い

### Skills（スキル）
- **モデル駆動型**: Claude が自動的に判断して起動
- **複雑な機能**: 複数ファイル、スクリプト、テンプレートをサポート
- **自動検出**: ユーザーの要件に基づいて自動で適用
- **構造化された知識**: `SKILL.md` + サポートファイルで構成

### カスタムコマンド（Slash Commands）
- **ユーザー駆動型**: `/command` と明示的に入力して起動
- **シンプルなプロンプト**: 単一の `.md` ファイル
- **明示的な制御**: ユーザーが実行タイミングを決定
- **繰り返し利用**: 頻繁に使う定型プロンプト

### 使い分けチェックリスト

| 選択基準 | Skill | カスタムコマンド |
|---------|-------|-----------------|
| シンプルなプロンプト | ❌ | ✅ |
| 複数ファイル・スクリプト必要 | ✅ | ❌ |
| 自動検出したい | ✅ | ❌ |
| 明示的に起動したい | ❌ | ✅ |
| 頻繁に使う定型処理 | ❌ | ✅ |
| チーム全体で共有したい | ✅✅ | ✅ |

## Skillsの基本構造

```
.claude/skills/skill-name/
├── SKILL.md                 # 必須：メインのマニフェスト
├── reference.md             # 参考資料（オプション）
├── examples.md              # 使用例（オプション）
├── scripts/                 # ユーティリティスクリプト
│   └── helper.py
└── templates/               # テンプレートファイル
    └── template.txt
```

### SKILL.mdの必須構成

```yaml
---
name: skill-name              # 小文字とハイフンのみ（最大64文字）
description: スキルの説明     # 30～50文字程度が最適（最大1024文字）
allowed-tools: Tool1, Tool2  # オプション：ツール制限
---

# スキルのタイトル

## 概要
何ができるのか、いつ使うのか

## 詳細な指示
ステップバイステップの手順
```

## 作成時のベストプラクティス

### 1. フォーカスを絞った説明文

```yaml
# 良い例：焦点を絞った説明
description: Excelスプレッドシートを分析してピボットテーブルを生成します。
             Excelファイルやスプレッドシートデータで使用してください。

# 悪い例：広すぎる説明
description: ファイルを処理します
```

### 2. 説明文に含めるべき要素

- **何ができるか**: 具体的な機能
- **いつ使うか**: トリガーキーワード（ユーザーが言及しそうな言葉）
- **対象ファイル形式**: .xlsx, .pdf など

**例**：
```yaml
description: PDFファイルからテキストと表を抽出し、フォームを埋入、
             ドキュメントをマージします。PDF、フォーム、ドキュメント
             抽出について使用します。
```

### 3. スクリプトの権限設定

```bash
chmod +x .claude/skills/my-skill/scripts/*.py
chmod +x .claude/skills/my-skill/scripts/*.sh
```

### 4. ツール制限の活用

```yaml
allowed-tools: Read, Grep, Glob  # 読み取り専用
```

この設定により、Claude が自動的にこれらのツールを使える（許可を求めない）ようになります。

## 配置場所

### 個人スキル（全プロジェクト共通）
```
~/.claude/skills/
```

### プロジェクトスキル（このプロジェクトのみ共有）
```
.claude/skills/
```

### プラグインスキル（自動配置）
```
プラグインディレクトリ内
```

## プロジェクトスキルの追加方法

```bash
# スキルディレクトリを作成
mkdir -p .claude/skills/my-skill

# SKILL.mdを作成
cat > .claude/skills/my-skill/SKILL.md << 'EOF'
---
name: my-skill
description: スキルの説明
---

# スキルのタイトル

## 指示内容
EOF

# Gitにコミット（チーム共有の場合）
git add .claude/skills/
git commit -m "Add new Skill: my-skill"
```

チームメンバーは `git pull` を実行するだけで自動的にスキルを利用可能になります。

## 公式skill-creatorスキルの活用

`/example-skills:skill-creator` スキルは、新しいスキル作成のガイダンスとベストプラクティスの適用を支援します。

```bash
# skill-creatorスキルの起動
/example-skills:skill-creator
```

このスキルを使用することで：
- 新しいスキル作成のガイダンス
- ベストプラクティスの適用
- スキルの検証とテスト

が自動的に行われます。

## スキルとコマンドの使い分け例

```
カスタムコマンド生成が必要
  ↓
/claude-code:create-command を使用
  ↓
要件を対話的に入力
  ↓
.claude/commands/ に自動作成

複雑なスキル作成が必要
  ↓
/claude-code:create-skill を使用
  ↓
skill-creatorスキルに要件を渡す
  ↓
.claude/skills/ に自動作成
```

## まとめ

- **シンプルなプロンプト**: カスタムコマンド（.md ファイル1つ）
- **複雑なワークフロー**: スキル（複数ファイル構成）
- **自動検出が必要**: スキル（Claudeが自動判断）
- **明示的な起動**: カスタムコマンド（/command で起動）

適切なツールを選択することで、プロジェクトの拡張機能を効率的に構築できます。
