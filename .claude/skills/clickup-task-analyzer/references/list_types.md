# ClickUpリスト役割認識ルール

リストのパス構造から役割を認識し、適切な分析方法を選択します。

## リスト種別

### 1. 開発管理リスト

**パターン**: `domain/raw-data/clickup/{プロジェクト}/{プロジェクト名}(開発)/v*.*.*`

**例**: `domain/raw-data/clickup/GLOW/GLOW(開発)/v1.5.0`

**特徴**:
- 機能実装単位のタスク
- 職種プレフィックス付き（(サバ)、(クラ)、(UI)など）
- 親子タスク構造あり
- 期限日ベースのスケジュール管理

**分析方法**:
1. **職種別作業分析**
   - プレフィックス、担当者名、作業内容から総合的に職種分類
   - サーバーエンジニア、クライアントエンジニア、UIデザイナー、QA・テスト、その他
2. **工数分析**
   - 職種別担当者数とタスク数
   - 期限日から見た工数配分
3. **開発フロー分析（タイムライン）**
   - 期限日をもとにASCII図形式で可視化
   - 並行作業の把握
4. **主要タスクの詳細分析**
   - 最大規模タスク（BOXガシャなど）の詳細
   - 実装順序、技術スタック、品質管理

**QA体制の扱い**:
- QA期間タスクの担当者は開発メンバー全員の可能性がある
- **QA専任メンバーとして記載しない**
- 「全開発メンバーがQA期間に参加」と記述

### 2. QA管理リスト

**パターン**: `domain/raw-data/clickup/{プロジェクト}/QA/アプリQA_Ver*.*.*`

**例**: `domain/raw-data/clickup/GLOW/QA/アプリQA_Ver1.5.0`

**特徴**:
- バグ・不具合単位のタスク
- 詳細な再現手順、環境情報
- 優先度（urgent, high, normal, low）
- 修正担当者アサイン
- ステータス（Open, In Progress, Closed）

**分析方法**:
1. **バグカテゴリ分析**
   - 機能別集計（ガシャ、スキル、UI、サーバーなど）
   - カテゴリごとの件数と優先度
2. **優先度別集計**
   - urgent/high/normal/low別の件数
   - 優先度別の修正完了率
3. **修正担当者別集計**
   - 担当者ごとのバグ修正件数
   - 職種別に分類（サーバーエンジニア、クライアントエンジニアなど）
4. **検出環境別集計**
   - iOS/Android別の件数
   - 環境依存バグの把握
5. **修正完了率**
   - Closed/Total件数
   - 未修正バグの優先度

**QA体制の扱い**:
- タスクの担当者は修正担当エンジニア
- **職種別に分類する**（サーバーエンジニア、クライアントエンジニアなど）

### 3. 運営施策リスト

**パターン**: `domain/raw-data/clickup/{プロジェクト}/運営/{施策名}`

**例**: `domain/raw-data/clickup/GLOW/運営/秋イベント2025`

**特徴**:
- 運営施策・期間限定イベント単位のタスク
- マスタデータ作成、スケジュール管理
- 関連部署との連携タスク

**分析方法**:
1. **施策スケジュール**
   - 開始日、終了日、準備期間
   - マイルストーン
2. **関連タスク一覧**
   - マスタデータ作成
   - 告知・PR
   - 動作確認・QA
3. **担当者分析**
   - プランナー、エンジニア、デザイナー別の作業
4. **成果物**
   - マスタデータCSV
   - 告知画像・バナー
   - イベント仕様書

## リスト種別の判定方法

リストのパス構造から自動判定します。

```python
def detect_list_type(list_path: str) -> str:
    """リストパスから種別を判定"""
    if "/QA/アプリQA_" in list_path:
        return "QA管理リスト"
    elif re.search(r'/[^/]+\(開発\)/v\d+\.\d+\.\d+', list_path):
        return "開発管理リスト"
    elif "/運営/" in list_path:
        return "運営施策リスト"
    else:
        return "その他"
```

## 分析レポートの構成例

### 開発管理リスト

```markdown
# プロジェクト概要
# 主要機能
# 職種別作業分析
  - サーバーエンジニア
  - クライアントエンジニア
  - UIデザイナー
  - QA・テスト
# 開発フロー分析（タイムライン）
# 主要タスクの詳細分析
# 工数分析
# 総括
```

### QA管理リスト

```markdown
# QA概要
# バグカテゴリ別集計
  - ガシャ機能
  - スキル機能
  - UI/UX
  - サーバーAPI
# 優先度別集計
  - urgent
  - high
  - normal
  - low
# 修正担当者別集計
  - サーバーエンジニア
  - クライアントエンジニア
  - UIデザイナー
# 検出環境別集計
  - iOS
  - Android
# 修正完了率
# 未修正バグ一覧
# 総括
```

## 重要な注意点

1. **リスト種別によって職種分類の意味が変わる**
   - 開発リスト: 実装担当者
   - QAリスト: 修正担当者

2. **QA体制の扱いが異なる**
   - 開発リスト: QA専任として記載しない
   - QAリスト: 修正担当者を職種別に分類

3. **分析の目的が異なる**
   - 開発リスト: 開発プロセスと工数の把握
   - QAリスト: バグの傾向と品質の把握

4. **データソースの違い**
   - 開発リスト: 主に `_list_tasks_raw_phase2_with_subtasks.json`
   - QAリスト: 同じJSONだが、優先度フィールドなどが重要
