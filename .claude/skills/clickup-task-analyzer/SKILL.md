---
name: clickup-task-analyzer
description: ClickUpタスクJSONから構造化されたプロジェクト分析レポート（Markdown形式）を自動生成します。「ClickUpタスク分析」「プロジェクト分析レポート」「タスク情報分析」「開発プロジェクト分析」などで使用します。インプット: domain/raw-data/clickup/{プロジェクト名}/{リスト名}/_list_tasks_raw_phase2_with_subtasks.json、アウトプット: domain/knowledge/project-management/clickup_{プロジェクト名}_{リスト名}-タスク分析.md
---

# ClickUpタスク分析スキル

ClickUpリストのタスク情報JSONから、プロジェクト概要、職種別作業分析、開発フロー、工数分析、総括を含む構造化された分析レポートを自動生成します。

## 使用方法

### 基本的な使い方

ユーザーがClickUpタスク分析を依頼した場合、以下の手順で実行します：

#### ステップ1: リスト種別の認識

まず、リストのパス構造から種別を認識します：

- **開発管理リスト**: `domain/raw-data/clickup/GLOW/GLOW(開発)/v1.5.0`
- **QA管理リスト**: `domain/raw-data/clickup/GLOW/QA/アプリQA_Ver1.5.0`
- **運営施策リスト**: `domain/raw-data/clickup/GLOW/運営/施策名`

詳細は [list_types.md](references/list_types.md) を参照。

#### ステップ2: jqクエリで全体把握（任意）

基本統計を確認したい場合は、query_helper.shを実行：

```bash
bash .claude/skills/clickup-task-analyzer/scripts/query_helper.sh <clickup-list-directory>
```

出力例：
```
=== プレフィックス集計 ===
   8 (クラ)
   3 (サバ)
   3 (UI)
   2 (スキル)
   1 なし

=== 担当者別タスク数 ===
   5 Kiryu Yamashita
   4 Keisuke Isayama
   3 Daiki Kawasaki
```

#### ステップ3: 基本レポート生成

Pythonスクリプトで基本レポートを生成：

```bash
python3 .claude/skills/clickup-task-analyzer/scripts/analyze_tasks.py <clickup-list-directory>
```

出力先: `domain/knowledge/project-management/clickup_{プロジェクト名}_{リスト名}-タスク分析.md`

**重要**: このスクリプトは担当者別タスク一覧のみを生成します。職種分類は行いません。

#### ステップ4: AI詳細分析

基本レポートを読み込み、以下の詳細分析を行います：

1. **職種分類**
   - タスク名、担当者名、作業内容から総合的に判断
   - プレフィックスはヒントとして活用（絶対的なルールではない）

2. **職種別作業分析**
   - サーバーエンジニア、クライアントエンジニア、UIデザイナーなどに分類
   - 各職種の担当者と作業内容を整理

3. **タイムライン生成**
   - 期限日をもとにASCII図形式で可視化

4. **主要タスク詳細分析**
   - 最大規模タスク（BOXガシャなど）の深掘り

5. **工数分析**
   - 職種別作業負荷、期限日から見た工数配分

6. **総括**
   - 成功要因、課題と改善点、プロジェクト特性

**参考**: [example_report.md](references/example_report.md) の構成を参考にしてください。

### インプットファイル形式

```json
{
  "total_count": 100,
  "tasks": [
    {
      "id": "86ew6hyg4",
      "name": "(受け入れ)ガシャ一覧画面の刷新",
      "status": "Closed",
      "due_date": "2026-01-16T04:00:00",
      "created_date": "2026-01-13T17:10:31.540000",
      "assignees": ["daichi_takishima"],
      "parent": "86evjvued"
    }
  ]
}
```

### アウトプット形式

生成されるレポートには以下のセクションが含まれます：

1. **プロジェクト概要** - バージョン、開発期間、リリース日、タスク総数
2. **主要機能** - 親タスクごとの機能一覧
3. **職種別作業分析** - 職種ごとの担当者と作業内容
4. **工数分析** - 職種別作業負荷表
5. **総括** - プロジェクト特性と完了率

## 重要な分析ルール

このスキルで最も重要なのは、**正確な分析ルールに従うこと**です。詳細は [analysis_rules.md](references/analysis_rules.md) を参照してください。

### 開発期間の算出

**重要**: タスク作成日ではなく、**最も早い期限日を開発開始日とする**

```
タスク作成日: 2025-10-27
最も早い期限日: 2025-12-05  ← この日付を使用
最も遅い期限日: 2026-02-02

正しい開発期間: 2025-12-05 ～ 2026-02-02（約2ヶ月）
```

### 職種分類の方法（AIによる柔軟な分類）

**重要**: スクリプトは職種分類を行いません。以下のガイドラインに従って、AIが柔軟に分類してください。

#### 分類のヒント（プレフィックスは参考程度）

**プレフィックスによるヒント**：
- `(サバ)` → サーバーエンジニアの可能性が高い
- `(クラ)` → クライアントエンジニアの可能性が高い
- `(UI)` → UIデザイナーの可能性が高い
- `(スキル)` → クライアントエンジニアの可能性が高い（Unity/C#実装）
- `QA期間` → QA・テスト
- `管理ツール` → サーバーエンジニアの可能性が高い
- `リリース`、`サブミット` → リリース管理
- `データレイク` → データエンジニア

**重要**: プレフィックスは絶対的なルールではありません。タスク名、担当者、作業内容を総合的に判断してください。

#### 総合的な判断基準

職種分類は以下の情報を総合的に判断して行います：

1. **タスク名の内容**: 実装内容から推測（例: 「スキル」「BOXガシャ」→ クライアント、「API」→ サーバー）
2. **担当者名**: 過去の担当履歴から推測
3. **タスクの説明文**: 技術的詳細から推測（JSONに含まれる場合）
4. **プレフィックス**: あくまでヒントとして活用

#### 職種分類の具体例

**例1: プレフィックスなし**
- **タスク**: 「スキル：作品・キャラID絞り込み」
- **担当者**: Kenta Inui
- **内容**: スキルシステムの実装（Unity/C#）
- **判断**: クライアントエンジニア

**例2: プレフィックスあり**
- **タスク**: 「(サバ)BOXガシャ」
- **担当者**: Daiki Kawasaki
- **内容**: サーバーAPI実装
- **判断**: サーバーエンジニア（プレフィックスと内容が一致）

**例3: 複合タスク**
- **タスク**: 「ガシャ一覧画面の刷新」
- **担当者**: daichi_takishima, Rira Mochizuki, donghyeok kim
- **内容**: UI/UX改善
- **判断**: クライアントエンジニア（daichi）、UIデザイナー（Rira、donghyeok）に分類

### リスト役割の認識

ClickUpリストは役割によって分析方法が異なります。詳細は [list_types.md](references/list_types.md) を参照してください。

#### 開発管理リスト

**パターン**: `domain/raw-data/clickup/{プロジェクト}/{プロジェクト名}(開発)/v*.*.*`

**分析方法**: 職種別作業分析、工数分析、開発フロー分析

#### QA管理リスト

**パターン**: `domain/raw-data/clickup/{プロジェクト}/QA/アプリQA_Ver*.*.*`

**分析方法**: バグ分類、優先度分析、修正担当者分析

### QA体制の扱い

**開発リスト**の場合、QA期間タスクの担当者（assignees）は開発メンバー全員の可能性があるため、**QA専任メンバーとして記載しない**

正しい記述例（開発リスト）：
```markdown
### QA・テスト

**作業内容**:
1. **[1.5.0]QA期間** - 期限: 2026-01-23
   - 全開発メンバーがQA期間タスクに参加

**備考**:
- QA専任メンバーの情報はタスク管理システムに記録されていない
```

**QAリスト**の場合は、修正担当者を職種別に分類してください。

## レポート生成後のAI分析

スクリプトは基本的なタスク一覧を生成します。その後、AIが以下の詳細分析を行います：

### 1. 職種別作業分析

基本レポートの担当者別タスク一覧を読み、職種分類を行います：

- タスク名のプレフィックス（ヒント）
- 担当者名（過去の履歴から推測）
- 作業内容（実装技術から推測）

これらを総合的に判断して、以下の職種に分類：

- サーバーエンジニア
- クライアントエンジニア
- UIデザイナー
- プランナー/ディレクター
- QA・テスト
- その他（データエンジニア、リリース管理など）

## AIが詳細化すべき項目

基本レポートを読み込んだ後、以下の項目を追加・詳細化してください：

### 1. タイムライン

期限日をもとにASCII図形式で可視化：

```
2025-12-05  プロジェクト開始
   |        - スタミナ回復アイテム実装開始 (Junki)
   v
12月上旬   サーバー実装開始
   |        - UI実装開始 (Rira)
   v
12月中旬   クライアント実装本格化
   |        - BOXガシャ Data層 (Kiryu)
```

### 2. 主要タスクの詳細分析

最大規模タスクについて、以下を詳細に記述：

- 関連タスク数、担当者、開発期間
- 実装内容（技術スタック、アーキテクチャ）
- 実装順序（Data層 → Domain層 → UI層など）
- 品質管理（テストケース、レビュー体制）

### 3. リスクと対応

タスク名や説明から読み取れる課題と対応策を記述：

```markdown
### 確認された課題

1. **BOXガシャ リザルト画面の挙動修正**（1月中旬）
   - 問題: アニメーション再生順序の不具合
   - 対応: 演出順序を修正
   - 担当: Kiryu Yamashita
```

### 4. 成果物

リリース内容とドキュメントを記述：

```markdown
### リリース内容
1. BOXガシャシステム（いいジャンくじ）
2. スタミナ回復アイテム機能拡張

### ドキュメント
- 要件仕様書（Google Slides）
- 影響範囲シート（Google Sheets）
```

### 5. 総括

成功要因、課題と改善点、プロジェクト特性を分析：

```markdown
### 成功要因
1. **段階的実装**: BOXガシャをData層→Domain層→UI層と段階的に実装し、リスク分散
2. **並行開発**: 複数機能を並行して進め、効率的にリソース活用

### 課題と改善点
1. **クライアント実装の集中**: 一人に実装が集中
   - 改善案: 早期段階で作業分担を検討
```

## サンプルレポート

完成形のサンプルレポートを参照：
- [example_report.md](references/example_report.md) - GLOW v1.5.0開発リストの完成例

このサンプルを参考に、以下の構成で詳細レポートを生成してください：

1. **プロジェクト概要** - バージョン、開発期間、タスク総数
2. **主要機能** - 親タスクごとの機能一覧
3. **職種別作業分析** - AIが柔軟に職種分類した結果
4. **開発フロー分析（タイムライン）** - ASCII図形式
5. **主要タスクの詳細分析** - 最大規模タスクの深掘り
6. **工数分析** - 職種別作業負荷、期限日から見た工数配分
7. **総括** - 成功要因、課題と改善点

## トラブルシューティング

### JSONファイルが見つからない

```bash
❌ エラー: domain/raw-data/clickup/.../\_list_tasks_raw_phase2_with_subtasks.json が見つかりません
```

対処法:
- ディレクトリパスが正しいか確認
- JSONファイル名が `_list_tasks_raw_phase2_with_subtasks.json` であることを確認

### 職種分類が不正確

対処法:
- [analysis_rules.md](references/analysis_rules.md) を参照して手動で修正
- 特にスキル実装タスクがプランナーに分類されていないか確認

### 開発期間が長すぎる

対処法:
- タスク作成日ではなく、最も早い期限日が使用されているか確認
- スクリプトの`calculate_date_range()`関数を確認

## よくある質問

**Q: スクリプトだけで完全なレポートが生成されますか？**

A: スクリプトは基本構造を生成しますが、タイムライン、詳細分析、リスクと対応、総括などは手動で詳細化することを推奨します。

**Q: QA担当者がレポートに含まれません**

A: QA期間タスクの担当者は開発メンバー全員の可能性があるため、意図的にQA専任メンバーとして記載していません。これは正しい動作です。

**Q: 職種分類をカスタマイズしたい**

A: `scripts/analyze_tasks.py` の `classify_role()` 関数を編集してください。プレフィックスやキーワードのマッピングを変更できます。
