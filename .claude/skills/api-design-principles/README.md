# API設計原則ガイド

API設計書を作成する際に、設計思想を注入し、最適な設計判断を支援するスキルです。

## 概要

このスキルは、以下の目的で使用されます:

- ゲーム体験仕様書からAPI設計書を作成する際の設計指針の提供
- データベース設計における慎重な判断の支援
- 既存実装の流用可能性の検討支援
- コスト意識を持った設計判断の促進

## ディレクトリ構成

```
api-design-principles/
├── SKILL.md                    # スキルのエントリーポイント
├── README.md                   # このファイル
├── principles/                 # 設計原則ドキュメント
│   ├── database-design.md     # データベース設計の慎重性
│   ├── specification-review.md # 仕様書の批判的検討
│   └── mission-reuse.md       # ミッション実装のコスト意識
└── templates/                  # テンプレート
    └── api-design-template.md # API設計書テンプレート
```

## 主要な設計原則

### 1. データベース設計の慎重性

**原則**: ユーザーデータの管理テーブルや列は、必須ではない限り無闇に増やさない。

**詳細**: [principles/database-design.md](principles/database-design.md)

**主なポイント**:
- 本当に永続化が必要か？
- 既存テーブルで代替できないか？
- 将来の拡張性を考慮しているか？
- 汎用的なKey-Value型テーブルで対応できないか？

---

### 2. 仕様書の批判的検討

**原則**: 仕様書の内容をそのまま実装するのではなく、既存実装での対応可能性を深く検討する。

**詳細**: [principles/specification-review.md](principles/specification-review.md)

**主なポイント**:
- そもそも対応が必要な要件なのか？
- 既存の実装で対応できるのではないか？
- 内容を既存のものに読み替えて流用できるか？
- 設計を汎用化できないか？

---

### 3. ミッション実装のコスト意識

**原則**: 新規ミッション実装は高コストであるため、既存の無理のない流用を最優先に考える。

**詳細**: [principles/mission-reuse.md](principles/mission-reuse.md)

**主なポイント**:
- ミッション分類の理解（デイリー/ウィークリー/通常/期間限定）
- 期間限定ミッションの流用を最優先
- マスタデータでの差別化を優先
- 新規実装の判断基準

---

## API設計書テンプレート

標準的なAPI設計書のフォーマットと各セクションの記載内容を定義しています。

**詳細**: [templates/api-design-template.md](templates/api-design-template.md)

**主なセクション**:
1. 仕様書（要点まとめ、仕様確認）
2. シーケンス図
3. エラー設計
4. API仕様
5. DB設計（マスター/オペレーション、ユーザー、ログ）
6. テーブル一覧

---

## 使用方法

### API設計書を作成する際

1. `SKILL.md` を参照して設計原則を確認
2. 該当する原則の詳細ドキュメントを読む
3. `templates/api-design-template.md` に従って設計書を作成
4. 各セクションで設計原則チェックリストを確認

### 新しい原則を追加する際

1. `principles/` 配下に新しいMarkdownファイルを作成
2. `SKILL.md` の「設計原則」セクションに項目を追加
3. `templates/api-design-template.md` の関連箇所に参照を追加
4. `README.md`（このファイル）に概要を追加

---

## 関連ドキュメント

### プロジェクト共通ルール

- **要件分類**: `domain/tasks/design/api/rules/ゲーム体験仕様書_要件分類ルール.md`
  - 仕様書の各項目をどの要件に分類すべきかの判断基準

- **サーバー要件判定**: `domain/tasks/design/api/rules/サーバー要件判定ルール.md`
  - サーバー要件として扱うべきかの判定ルール

- **サーバー実現方針**: `domain/tasks/design/api/rules/サーバー実現方針ルール.md`
  - どのような実現アプローチを取るかの検討指針

### API設計書参考フォーマット

- **参考フォーマット**: `domain/tasks/design/api/templates/API設計書_参考フォーマット.md`
  - 実際の設計書の構成例

---

## スキルのメンテナンス

### バージョン管理

- 現在のバージョン: `1.0.0`
- ステータス: `stable`
- 最終更新日: `2025-02-07`

### 更新履歴

- **2025-02-07**: 初回作成
  - データベース設計の慎重性
  - 仕様書の批判的検討
  - ミッション実装のコスト意識

---

## 今後の拡張予定

このスキルは、運用を通じて新しい設計原則を追加していくことを想定しています。

### 追加候補の原則例

- パフォーマンス最適化の指針
- セキュリティ設計の原則
- API互換性維持のガイドライン
- テスト設計の考え方
- 運用・監視の設計指針

新しい原則を追加する際は、`principles/` 配下に新しいファイルを作成し、本READMEと `SKILL.md` を更新してください。
