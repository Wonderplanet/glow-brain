---
description: 要件から新しいカスタムコマンドを対話的に生成
argument-hint: [コマンドの要件説明]
---

# カスタムコマンド自動生成

あなたは、claude-code custom slash commandのエキスパートです。
ユーザーから提供された要件に基づいて、ベストプラクティスに沿った高品質なカスタムコマンドを生成します。

## ユーザーの要件

```
$ARGUMENTS
```

## あなたのタスク

以下のステップで、新しいカスタムコマンドを作成してください：

### 1. 要件の分析

まず、ユーザーの要件を分析し、以下を明確にします：
- コマンドの目的と主な機能
- 必要な引数の数と種類
- 使用するツール（Bash, ファイル参照など）
- 対象とするディレクトリ（general, backend, frontend など）

### 2. 詳細の確認（AskUserQuestionを使用）

AskUserQuestionツールを使って、以下を確認してください：

**質問1: コマンド名**
- header: "コマンド名"
- question: "このコマンドの名前は何にしますか？（小文字とハイフンを使用、例: fix-issue, code-review）"
- options:
  - ユーザーの要件から適切な名前を2-3個提案
  - multiSelect: false

**質問2: 配置ディレクトリ**
- header: "配置場所"
- question: "どのカテゴリに配置しますか？"
- options:
  - general: 汎用的なコマンド（推奨）
  - backend: バックエンド固有
  - frontend: フロントエンド固有
  - 新しいカテゴリを作成
  - multiSelect: false

**質問3: 引数の有無**
- header: "引数"
- question: "このコマンドは引数を受け取りますか？"
- options:
  - 引数なし: シンプルなコマンド
  - 1つの引数: 対象を指定（推奨）
  - 複数の引数: 詳細な設定が必要
  - すべての引数を一括: $ARGUMENTSを使用
  - multiSelect: false

**質問4: Bashツール許可**
- header: "Bashツール"
- question: "Bashコマンドの実行を許可しますか？"
- options:
  - 不要: プロンプトのみ（推奨）
  - Git操作のみ: git status, git diffなど
  - ビルドツール: npm, yarn, pnpmなど
  - データベース: mysqlなど
  - 包括的: 複数のツールを許可
  - multiSelect: true

### 3. コマンドの生成

ベストプラクティスに従って、以下の構造でコマンドファイルを生成してください：

#### テンプレート構造

```markdown
---
description: [コマンドの簡潔な説明（30文字以内）]
[引数がある場合]
argument-hint: [引数のヒント、例: [issue-number] [priority]]
[/引数がある場合]
[Bashツールが必要な場合]
allowed-tools: [許可するツールのリスト]
[/Bashツールが必要な場合]
---

# [コマンドのタイトル]

[コマンドの目的と概要の説明]

[引数がある場合、引数の説明]

## タスク

[構造化されたステップバイステップの指示]

1. **[ステップ1のタイトル]**
   - [詳細な手順]
   - [期待される動作]

2. **[ステップ2のタイトル]**
   - [詳細な手順]
   - [期待される動作]

[必要に応じて追加のセクション]

## 注意事項

[重要な注意点やベストプラクティス]

## 出力形式

[期待される出力の形式や構造]
```

### 4. ファイルの作成

Writeツールを使って、以下のパスにコマンドファイルを作成してください：

```
.claude/commands/[カテゴリ]/[コマンド名].md
```

例:
- `.claude/commands/general/fix-issue.md`
- `.claude/commands/backend/database-migration.md`
- `.claude/commands/frontend/component-test.md`

### 5. 確認と完了

コマンドファイルが正しく作成されたことを確認し、以下の情報をユーザーに提供してください：

1. 作成されたコマンドのパス
2. 使用方法の例
3. 引数がある場合の例

## ベストプラクティスチェックリスト

生成するコマンドは、以下のベストプラクティスに従っていることを確認してください：

- [ ] コマンド名は小文字とハイフンのみを使用
- [ ] descriptionは30文字以内で明確
- [ ] 引数を使う場合、argument-hintを記載
- [ ] Bashツールを使う場合、allowed-toolsで明示的に許可
- [ ] プロンプトは構造化され、明確なステップを含む
- [ ] 期待される動作と出力形式が明確
- [ ] 注意事項やエッジケースへの対応が記載されている
- [ ] ファイルパスと行番号の参照には `file_path:line_number` 形式を使用
- [ ] ユーザーとのコミュニケーションは直接的で簡潔

## 参考: ベストプラクティス例

### シンプルなコマンドの例

```markdown
---
description: コードをセキュリティの観点からレビュー
---

# セキュリティレビュー

このコードをセキュリティの観点から包括的にレビューしてください。

## チェック項目

1. **認証と認可**
   - ユーザー認証が適切か
   - 権限チェックは十分か

2. **データ保護**
   - SQLインジェクションリスクはないか
   - XSS脆弱性はないか
   - 機密データが露出していないか

3. **入力検証**
   - ユーザー入力が適切に検証されているか
   - サニタイズされているか

## 出力形式

各問題について以下の形式で報告してください：

- **リスクレベル**: [高/中/低]
- **ファイル**: [file_path:line_number]
- **説明**: [問題の詳細]
- **修正提案**: [具体的な修正案]
```

### 引数を使うコマンドの例

```markdown
---
description: 指定したイシューを修正
argument-hint: [issue-number] [component]
allowed-tools: Bash(git status:*), Bash(git diff:*)
---

# Issue修正

Issue #$1 を $2 コンポーネント内で修正します。

## 引数

- `$1`: 修正するイシュー番号
- `$2`: 対象のコンポーネント名

## タスク

1. **イシューの理解**
   - Issue #$1 の内容を確認
   - 期待される動作を明確にする

2. **関連コードの特定**
   - $2 コンポーネント内の関連ファイルを検索
   - 現在の実装を理解する

3. **修正の実装**
   - 根本原因に対処した修正を実装
   - コーディング規約に従う

4. **テストの追加**
   - 修正内容に対するテストを作成
   - エッジケースも考慮する

5. **PRの準備**
   - コミットメッセージを作成
   - PR説明文を準備

## 注意事項

- 修正は最小限に留める
- 関連しない変更は含めない
- テストが必須
```

### Bash実行を含むコマンドの例

```markdown
---
description: 適切なgit commitを作成
allowed-tools: Bash(git status:*), Bash(git diff:*), Bash(git log:*), Bash(git add:*), Bash(git commit:*)
---

# インテリジェントGitコミット

現在の変更内容を分析し、適切なコミットメッセージを作成してコミットします。

## 現在の状態確認

以下のコマンドを実行して、現在の状態を確認してください：

- ステージング状態: `git status --short`
- 変更差分: `git diff HEAD`
- 最近のコミット: `git log --oneline -10`

## タスク

1. **変更内容の分析**
   - どのファイルが変更されたか
   - 変更の性質（新機能、バグ修正、リファクタリングなど）
   - 関連性のない変更が混在していないか

2. **コミットメッセージの作成**
   - 簡潔なタイトル（50文字以内）
   - 詳細な説明（必要に応じて）
   - 既存のコミットメッセージスタイルに従う

3. **コミットの実行**
   - 適切なファイルをステージング
   - コミットを作成
   - 結果を確認

## 出力形式

```
[type]: [subject]

[body]

🤖 Generated with Claude Code
```
```

---

それでは、上記のタスクを実行して、高品質なカスタムコマンドを生成してください！
