# マスターデータテーブル調査プロンプト（汎用版）

glow-clientのコードを調査して、[テーブル名] テーブルがどのように使われているかを以下の観点でまとめてください：

## 調査項目

### 1. データ構造
- テーブルの各列がどのように定義されているか
- 対応するマスターデータクラス（MstXxxData）の構造
- ドメインモデル（MstXxxModel）への変換方法

### 2. 読み込みと参照
- データの取得方法（Repository、Translator）
- どのクラスから参照されているか
- 実行時にどのように変換・拡張されるか

### 3. 他テーブルとの関連
- 関連するマスターデータテーブルとの紐付け
- ステージ/クエスト/バトルとの関連フロー
- データフロー図（テーブル間の関係）

### 4. ゲーム内での使用フロー
- 初期化処理の呼び出しフロー
- 実行時の更新・削除フロー
- プレゼンテーション層（View）での利用方法

### 5. 各列の具体的な使われ方
- 各フィールドがどのタイミングで参照されるか
- 値の変換や計算処理
- 特殊な制約や仕様

### 6. 実例
- 実際のマスターデータの例
- 具体的なコード箇所（ファイルパス:行番号）

## 出力形式

- マークダウン形式で構造化
- コードブロックで実装例を提示
- フロー図は矢印（→, ↓）で表現
- 重要なファイルパスは絶対パスで記載
- 各セクションに見出しを付ける

調査対象: projects/glow-client/ ディレクトリ内

---

## 使用例

### 敵キャラクター系テーブル
```
glow-clientのコードを調査して、mst_enemy_stage_parameter テーブルがどのように使われているかを以下の観点でまとめてください：

1. データ構造と各パラメータの意味
2. MstEnemyCharacter との関連
3. ステージごとの敵配置の仕組み
4. AutoPlayerSequence での召喚フロー
5. InGame での敵生成処理
6. ボス判定やレアリティの使われ方

調査対象: projects/glow-client/
```

### アイテム・報酬系テーブル
```
glow-clientのコードを調査して、mst_reward テーブルがどのように使われているかを以下の観点でまとめてください：

1. 報酬タイプ（RewardType）の種類と各タイプの処理
2. ステージクリア報酬との紐付け
3. 報酬獲得演出のフロー
4. ユーザーデータへの反映方法
5. サーバーとの連携（あれば）

調査対象: projects/glow-client/
```

### ギミック系テーブル
```
glow-clientのコードを調査して、mst_in_game_gimmick_objects テーブルがどのように使われているかを以下の観点でまとめてください：

1. データ構造（Id, AssetKey等）
2. 読み込みと変換（Translator, Repository）
3. AutoPlayerSequence との紐付け
4. ステージとの関連（MstInGame, MstStage経由）
5. 初期化フロー（Initializer, Factory）
6. View生成とアセット読み込み
7. 全体で使われるのか、ステージ固有なのか

調査対象: projects/glow-client/
```

---

## プロンプト作成のベストプラクティス

### 再現性を高めるための要素

#### ✅ 必須要素
1. **対象を明確に指定**: テーブル名、クラス名、機能名
2. **調査観点をリスト化**: 箇条書きで具体的に
3. **調査範囲を限定**: ディレクトリパスを指定
4. **出力形式を指定**: マークダウン、コードブロック、フロー図など
5. **具体例を要求**: 実際のデータ例、コード箇所

#### 🎨 出力品質を上げるコツ
- 「構造化して」「見出し付きで」と指定
- 「ファイルパス:行番号」形式を要求
- フロー図の書き方を指定（矢印、階層）
- コードブロックの言語を指定（csharp, csv等）
- 表形式での整理を依頼

#### 🔍 深掘りのための追加質問例
- 「この結果を踏まえて、[関連テーブル]との紐付けを調査して」
- 「[特定の列]の値がどのように使われるか、具体的なコード箇所を示して」
- 「[機能]の実装フローを、呼び出し順に沿って詳細に追跡して」
- 「全体で使われるのか、個別設定なのか、紐付けの仕組みを明確にして」

---

## テンプレートのカスタマイズ方法

### 基本テンプレート
```
glow-clientのコードを調査して、[テーブル名] テーブルがどのように使われているかを以下の観点でまとめてください：

[調査項目1]
[調査項目2]
...

調査対象: projects/glow-client/
```

### カスタマイズポイント
1. **[テーブル名]**: 調査対象のマスターデータテーブル名を入れる
2. **調査項目**: テーブルの特性に応じて追加・削除
3. **出力形式**: プロジェクトの規約に合わせて調整
4. **調査範囲**: glow-server, glow-masterdata も含める場合は追加

### よくある調査パターン

#### パターン1: データ定義中心
- データ構造の詳細
- 各列の型と制約
- デフォルト値や必須項目

#### パターン2: フロー中心
- 初期化からView生成まで
- 更新・削除の流れ
- イベントトリガー

#### パターン3: 関連性中心
- 他テーブルとのリレーション
- ステージ/クエストとの紐付け
- 動的/静的な設定の区別
