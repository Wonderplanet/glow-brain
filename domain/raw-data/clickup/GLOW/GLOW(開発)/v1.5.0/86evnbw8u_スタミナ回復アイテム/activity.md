# スタミナ回復アイテム - Activity

**コメント #1** by Junki Mizutani 
(2026-01-30 15:32:40)

(PRからの自動投稿です)

## 実装内容について

### 影響範囲
- 21-1_ヘッダー

### QA連絡事項
サーバー観点で下記の確認もお願いできますと幸いです。
- 下記のような条件内で、1度に複数個のスタミナ回復アイテムを消費し、その分回復できること。消費個数が多すぎる場合は、回復できないこと。
  - 例：スタミナが50/180の場合（アイテム1個で+90回復）
    - 1個目使用: 50+90=140（< 180なので、まだ2個目も使用可能）
    - 2個目使用: 140+90=230（> 180だが、230まで回復OK）
    - 2個目使用後は「現在スタミナ230」>「スタミナ上限180」なので、3個目は使用不可

---

PR: [#2186 1.5.0 → STAGING デプロイPR](https://github.com/Wonderplanet/glow-server/pull/2186)


**コメント #2** by Kazuya Adachi 
(2026-01-20 16:13:13)

1/20 安達
スタミナドリンク、およびスタミナボトルに関する表示、各動作について
問題がないことを確認いたしました。

※検証内容の詳細については下記項目書を参照

【v1.5.0】スタミナ回復アイテム検証_項目書
docs.google.com/spreadsheets/d/1RPxtUOYo63bJ2Tl8L-I7xC7uulWddCW_VCiTpN28lvI/edit?gid=684778255#gid=684778255 
  

確認ビルド：iOS#27(569)、AOS#27(570)
確認環境：develop
確認端末：iPhoneSE3(iOS:18.6)
　　　　　ZenFone6(AOS:9.0)



**コメント #3** by Junki Mizutani 
(2026-01-19 17:55:17)

(PRからの自動投稿です)

## 実装内容について

### 影響範囲
- 21-1_ヘッダー

### QA連絡事項
サーバー観点で下記の確認もお願いできますと幸いです。
- 下記のような条件内で、1度に複数個のスタミナ回復アイテムを消費し、その分回復できること。消費個数が多すぎる場合は、回復できないこと。
  - 例：スタミナが50/180の場合（アイテム1個で+90回復）
    - 1個目使用: 50+90=140（< 180なので、まだ2個目も使用可能）
    - 2個目使用: 140+90=230（> 180だが、230まで回復OK）
    - 2個目使用後は「現在スタミナ230」>「スタミナ上限180」なので、3個目は使用不可

---

PR: [#2156 v1.5.0 QAデプロイ](https://github.com/Wonderplanet/glow-server/pull/2156)


**コメント #4** by Keisuke Isayama 
(2026-01-09 11:08:09)

undefinedビルド番号
ios:#722
android:#698



**コメント #5** by Junki Mizutani 
(2025-12-18 12:18:50)

## 実装内容について

### 影響範囲
- 21-1_ヘッダー：スタミナ購入周り全て（広告視聴、プリズム消費 でのスタミナ回復も含む）

### QA連絡事項
サーバー観点で下記の確認もお願いできますと幸いです。
- プリズム消費、広告視聴、アイテム 全てにおいて下記の挙動になること
  - 回復前に999だった場合は、回復できない
  - 回復前に999未満だった場合は、回復できる
- アイテム回復において、下記の挙動になること
  - 回復前に999未満で、アイテムを複数消費した際に、完全に破棄されるアイテムがある場合は、回復できない
    - 例：回復前に800で、100回復アイテムを、3つ消費しようとした場合は、回復できない
      - 2個分は切り捨てありで正常に回復できる：800 + 100 + 99(999を超えないように1は切り捨て)
      - 残りの1個は、完全に切り捨てになるため
      - ユーザーに無駄な消費をさせないために、回復できない
    - 個数選択ダイアログで、上記ケースができない状態であれば問題ないです

---

PR: [#2100 スタミナ回復アイテム：固定値回復アイテム追加とシステム上限チェックの対応](github.com/Wonderplanet/glow-server/pull/2100 
  )



**コメント #6** by Junki Mizutani 
(2025-12-15 12:27:26)

2025/12/15 12:00 mtgで、話したことメモ（slack）
サーバー実装の割合回復の実装は残しておく
プリズム、広告視聴のスタミナ回復の上限もシステム上限999に変更
システム上限を超えるか超えないかで、回復ボタンを押せるか押せないか について
一部回復できて、一部切り捨てのケースでは、回復はできる
例：901 + 100 の回復はできるが、999になる。2は切り捨て。
全て切り捨てのケースでは、回復不可。サーバーエラーを出して、エラーダイアログ出す。




**コメント #7** by Ryosuke Goto 
(2025-12-06 12:03:46)

仕様要件書は以下です
docs.google.com/presentation/d/1tBpInDJcKFMsXyQ0u7Ig4uI9l1FG4fBB7n_5DoWiRHg/edit?slide=id.g3ae01cfc717_0_231#slide=id.g3ae01cfc717_0_231 
 



**コメント #8** by Junki Mizutani 
(2025-12-03 14:40:01)

仕様変更前の内容なので、コメントアウト
---


(PRからの自動投稿です)

## 実装内容について

### 影響範囲
- 21-1_ヘッダー

### QA連絡事項
サーバー観点で下記の確認もお願いできますと幸いです。
- 下記のような条件内で、1度に複数個のスタミナ回復アイテムを消費し、その分回復できること。消費個数が多すぎる場合は、回復できないこと。
  - 例：スタミナが50/180の場合（アイテム1個で+90回復）
    - 1個目使用: 50+90=140（< 180なので、まだ2個目も使用可能）
    - 2個目使用: 140+90=230（> 180だが、230まで回復OK）
    - 2個目使用後は「現在スタミナ230」>「スタミナ上限180」なので、3個目は使用不可

---

PR: [#2048 スタミナ回復アイテムの新規実装](https://github.com/Wonderplanet/glow-server/pull/2048)



**コメント #9** by Junki Mizutani 
(2025-12-02 13:11:21)

仕様確認した内容を記載します：slack
スタミナ回復アイテム消費時の、回復量の計算式について
(ユーザーのスタミナ上限値 × 50%) の小数点を切り捨てした値 を回復量とする
※ 既存のプリズムや広告視聴での回復量計算でも同様
既存のプリズム・広告視聴によるスタミナ回復のUIとは異なり、個数選択をできるようにする
スタミナ上限を超えない限り、スタミナ回復アイテムを1度に2つ以上消費して、回復可能
例：スタミナが50/180の場合
アイテム1つ消費で+90(=140)で、まだスタミナ上限の180には届かないので、さらにもう1つ消費して、回復可能
→ 1回で2つ消費して+180回復OK
180を超えたあとは、追加で回復はできない（3つ消費で回復はできない）



