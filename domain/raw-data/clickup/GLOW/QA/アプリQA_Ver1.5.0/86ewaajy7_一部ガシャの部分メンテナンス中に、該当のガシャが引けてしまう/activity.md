# 一部ガシャの部分メンテナンス中に、該当のガシャが引けてしまう - Activity

**コメント #1** by Hiroto Kikuchi 
(2026-01-26 12:54:54)

メンテナンス中の該当ガシャ画面で、
「広告」「1回」「10回」それぞれのボタンをタップ時、
メンテナンスの確認ダイアログが表示され、
ガシャが引けないことを確認いたしました。

確認ビルド：iOS #37(580)、aOS #37(581)
確認環境：develop
確認端末：iPhone SE2 (iOS:18.1.1)
　　　　　ELE-L29(HUAWEI P30) (aOS:10.0.0)



**コメント #2** by hiroki fujita 
(2026-01-23 19:35:34)

こちら設定に不備がありましたので、再度設定を行いました。
・環境：develop環境
・該当フェスガシャ：幼稚園WARS
・期間：2026/2/4 10:00 ~ 2026/2/6 10:00
※開始/終了期間は変更しておりません。

期間中に「広告」「1回」「10回」のいずれかをタップすると、メンテナンスダイアログが表示される、という動作になりますので、改めてご確認をよろしくお願い致します。



**コメント #3** by Toshikazu Takahashi 
(2026-01-22 18:59:21)

■ 調査方針・解決策の提案

ご報告の「一部ガシャの部分メンテナンス中に、該当のガシャが引けてしまう」件、現時点では過去タスクに明示的に同様の「部分メンテナンス中ガシャが引けてしまう」現象の対応実績は見受けられませんでした。ただし、「開催期間外のガシャへの遷移・ボタン表示・挙動」や、開催期間管理に関する類似タスクは複数存在しております。

### 想定される論点
- メンテナンス中のガシャにアクセス制御処理が適切に入っていない
- ダイアログやボタン活性／非活性制御漏れ
- クライアント・サーバーいずれかの「部分メンテナンス」状態判定値の反映漏れ
- 「三つボタン」の個別制御の問題

### 過去類似対応の抜粋（※引用／参考例）

- 「開催期間を超えた状態でガシャを引いた時の遷移先が資料と相違している」  
  https://app.clickup.com/t/86ew90d8r  
　→ 開催期間外でダイアログ表示・遷移先を制御した事例あり  
- 「開催期間を超えたガシャのダイアログ表示・ガシャ画面のボタン制御」  
  近しいシナリオで「確認ダイアログが表示され、ホーム画面に遷移する等の制御調整」実績有

---

## 初期調査・対応案

1. **部分メンテナンス状態に対するガシャ引くボタン制御の有無を確認**  
　- ガシャ管理データの「部分メンテナンス」フラグ取得・判定タイミングの設計を再確認
　- 上記フラグをガシャ単体／ボタン単体（広告/1回/10回）に正しく反映しているか確認

2. **ガシャ遷移画面とガシャ引くボタンの状態管理コードを重点レビュー**  
　- 一括でボタン非活性化/ダイアログ表示を行うロジックからの漏れを想定

3. **サーバー側のガシャ引きAPIでもメンテ期間をチェックしているかどうか確認**  
　- クライアントだけでなくAPI側バリデーションが必須かどうかを要調査

4. **既存の「開催期間外」制御処理との接続部／流用有無確認**  
　- 「開催期間外ガシャ」や「終了済みガシャ」の判定実装を流用して、部分メンテナンスも統一処理化できるか確認

---

### 担当アサイン提案

- 過去チケット「開催期間外ガシャ制御」などに複数対応している下記の担当者を推奨します。

  - **担当者案**：  
    - [竹島 大地 (daichi_takishima)](https://app.clickup.com/t/86ew7ceer)  
    - [山下 桐生 (Kiryu Yamashita)](https://app.clickup.com/t/86eurcfgx)  
    - [後藤 良介 (Ryosuke Goto)](https://app.clickup.com/t/86ew7tpkf)

  ※「ガシャ画面のUI/制御」「ガシャ周りの管理ID実装」系タスクを多く担当

---

## 関連・参照タスク

- 開催期間を超えた状態でガシャを引いた時の遷移先が資料と相違している  
  https://app.clickup.com/t/86ew90d8r

- ガシャ画面の切り替え演出中に他画面へ遷移すると、演出がガシャ画面に残る  
  https://app.clickup.com/t/86ew7ceer

- 【仕様確認】開催期限がないガシャの「期限なし」表記について  
  https://app.clickup.com/t/86ew7tpkf

- ガシャ一覧にて、表示条件のあるガシャが常に表示されている  
  https://app.clickup.com/t/86ew7cm2x

---

### 次アクション
1. 担当アサイン可否のご意見ください（上記担当で問題なければ本格調査へ移行します）
2. 仕様書・サーバー／クライアントの該当制御ロジックを重点的に洗い出し・調査
3. 必要に応じてAPI／DBにて「部分メンテ」フラグの運用状況も追加調査

何か他に参考になりそうな既存バグや想定外の挙動の類似例があれば、都度共有お願いいたします。


