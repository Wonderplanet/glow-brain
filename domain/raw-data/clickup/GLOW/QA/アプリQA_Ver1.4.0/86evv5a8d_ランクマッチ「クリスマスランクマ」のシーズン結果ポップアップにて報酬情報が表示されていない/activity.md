# ランクマッチ「クリスマスランクマ」のシーズン結果ポップアップにて報酬情報が表示されていない - Activity

**コメント #1** by Junki Mizutani 
(2025-12-15 15:12:50)

(PRからの自動投稿です)

## 実装内容について

### 影響範囲
- 12-4_メールBOX
- ランクマッチTOP

### QA連絡事項
※ QAチームに確認してもらいたい主要なテスト観点を記載してください。

---

PR: [#2095 QAデプロイ v1.4.0](https://github.com/Wonderplanet/glow-server/pull/2095)


**コメント #2** by Kazuya Adachi 
(2025-12-12 20:26:26)

12/12　齋藤
 「クリスマスランクマッチ」12/22~週、12/29~週に挑戦し、
 最終結果ポップアップにて報酬内容欄に各ランキング報酬、ランク報酬のアイテムアイコンが表示されていることを確認致しました。
 ご対応誠にありがとうございました。
 
確認ビルド：iOS #2546、AOS #2546
 確認環境：dev-qa2
 検証端末：iPhone11(OS:18.6.1)
 　　　　　Mi 10Lite 5G(OS:11.0)



**コメント #3** by Junki Mizutani 
(2025-12-12 17:05:33)

(PRからの自動投稿です)

## 実装内容について

### 影響範囲
- 12-4_メールBOX
- ランクマッチTOP

### QA連絡事項
※ QAチームに確認してもらいたい主要なテスト観点を記載してください。

---

PR: [#2091 年をまたぐPvPシーズン報酬配布のバグ修正](https://github.com/Wonderplanet/glow-server/pull/2091)


**コメント #4** by Toshikazu Takahashi 
(2025-12-12 11:20:25)

### 調査方針・解決策の提案

本事象「ランクマッチ『クリスマスランクマ』のシーズン結果ポップアップで報酬情報が表示されない」について、過去のランクマッチ報酬表示・配布まわりの類似事象を調査しました。

---

#### 1. 類似タスクの調査

##### 関連しそうな解決済みタスク
- **ランクマッチのシーズン結果未受け取りの場合にメールBOXへ報酬が送られないため資料と相違している**
  - [https://app.clickup.com/t/86euqmptt](https://app.clickup.com/t/86euqmptt)
  - 担当：Daiki Kawasaki
  - 対応方針：シーズン切替タイミング等で報酬付与、表示ロジックの見直し実施
- **ランクマッチの報酬を未受け取りの状態で、以降のシーズン報酬が受け取れる場合、一部のメール報酬が増加している**
  - [https://app.clickup.com/t/86euu6n9n](https://app.clickup.com/t/86euu6n9n)
  - 未アサイン
- **ランクマッチの報酬を未受け取りの状態で、以降のシーズンで同じ報酬を獲得すると、受取済みのメールに報酬が追加される**
  - [https://app.clickup.com/t/86euredga](https://app.clickup.com/t/86euredga)
  - 担当：Daiki Kawasaki, Shun Endo
- **ランクマッチ「特別ルール」の体力ステータスn倍が未適用**（特別ルール関連の不整合含む）
  - [https://app.clickup.com/t/86evreahu](https://app.clickup.com/t/86evreahu)
  - 担当：Hirano Kento

---

#### 2. 過去事例から得られる着眼点

これまでのランクマッチ関連不具合では、シーズン切替・報酬配布トリガーや、報酬データ取得・表示処理のタイミング/取得元の違いが主な原因となっています。  
今回も、**「報酬は正常にメールBOXで配布されているが、ポップアップ表示側が空欄」**という状態のため、下記のような観点で調査を進めるのが有効です。

- 報酬ポップアップの表示ロジックと報酬配布（サーバー側の送信）で参照しているデータの差異有無
- イベント固有（クリスマスランクマッチ）のマスター設定やシーズン情報の不整合
- 他開催回ランクマッチ（通常開催など）で同様の問題発生有無

---

#### 3. 解決策の提案

1. **「ランクマッチシーズン結果ポップアップ」の報酬データ取得先、表示条件をソース上で確認**
    - シーズンIDやイベントIDごとのハンドリング分岐、データの取得元（キャッシュ or サーバーAPIレスポンス or DB参照）を調査
2. **クリスマスランクマのマスター設定が通常開催と差分が無いか比較**
    - 報酬リスト、配布ロジックに「クリスマスランクマ」特有の設定ミス/抜けがないかを重点チェック
3. **過去類似案件で対応経験のあるDaiki Kawasaki氏をメインアサインとしてアサイン提案**
    - 長期的にランクマッチシステムの修正・調査を担当されているため、知見が活かせます。
4. **ポップアップ用の報酬データ生成工程・参照キーの監査**
    - メールBOX付与は正常＝データ自体は存在するため、UI表示までの参照経路に限定して原因箇所を絞る

---

#### 4. 担当者アサイン提案

- **メインアサイン**：Daiki Kawasaki  
　※過去ランクマッチ報酬・表示絡み修正経験あり
- **必要に応じてサブでHirano Kento（特別ルール系）、Junki Mizutani（データ整合性）ご相談**

---

#### 5. 関連タスクまとめ

- ランクマッチのシーズン結果未受け取りの場合にメールBOXへ報酬が送られないため資料と相違している  
  [https://app.clickup.com/t/86euqmptt](https://app.clickup.com/t/86euqmptt)
- ランクマッチの報酬を未受け取りの状態で、以降のシーズンで同じ報酬を獲得すると、受取済みのメールに報酬が追加される  
  [https://app.clickup.com/t/86euredga](https://app.clickup.com/t/86euredga)
- ランクマッチ「クリスマスランクマ」にて特別ルールの体力ステータスn倍が適用されていない  
  [https://app.clickup.com/t/86evreahu](https://app.clickup.com/t/86evreahu)

---

#### 6. 補足

- 「メールBOXで報酬は配布されているため、UI側のみの問題」である可能性高いです。
- シーズンスケジュールやイベント設計等の複数要素が絡むため、**設計/マスター/フロント連携の観点**も含めて調査をお願いします。

---

以上、ご確認のほどよろしくお願いいたします。


