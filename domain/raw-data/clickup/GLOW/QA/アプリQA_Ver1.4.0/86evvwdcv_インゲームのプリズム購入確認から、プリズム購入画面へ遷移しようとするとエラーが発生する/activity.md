# インゲームのプリズム購入確認から、プリズム購入画面へ遷移しようとするとエラーが発生する - Activity

**コメント #1** by Kazuya Adachi 
(2025-12-15 14:03:26)

12/15 安達
インゲームでコンティニュー時にプリズムを不足していた際、
プリズム購入確認ダイアログで「購入」ボタンを押してもエラーが発生せず、
正常にプリズムショップへ遷移できることを確認しました。

確認ビルド：iOS#2551、AOS#2551
確認環境：dev-qa2、qa
確認端末：iPhoneSE3(iOS:18.6)
　　　　　ZenFone6(AOS:9.0)



**コメント #2** by daichi_takishima 
(2025-12-15 13:20:16)

確認可能ビルド
android: 2551
ios: 2551



**コメント #3** by daichi_takishima 
(2025-12-15 12:38:49)

実装後確認シート
undefined



**コメント #4** by Toshikazu Takahashi 
(2025-12-15 12:03:44)

## 調査方針・解決策の提案

本件は【インゲームのプリズム購入確認ダイアログからプリズム購入画面へ遷移しようとするとエラーが発生する】という内容ですが、補足にて「以下タスクの再発と見受けられます」と記載がございます。  
しかし、手元の過去報告データでは、**該当の同種不具合タスクは見つかりませんでした**。

そのため、下記の方針で調査と解決を進めることを提案します。

---

### 1. 【再現調査】
- 本件の再現性、発生条件が明確なため、**手順通りにdev-qa2環境で再現確認**を行い、サーバーログ・クライアントログもあわせて取得してください。
- 特に「インゲーム⇒所持プリズム不足⇒購入確認ダイアログ経由で購入画面」パスでのみ発生しているか、他の遷移経路でも同様の問題が出ないか網羅的にチェックください。
- 発生しないパターン（例：スタミナ・ガシャのプリズム不足→購入画面へは正常遷移）との比較データも取得ください。

### 2. 【影響範囲・既存導線との比較】
- 仕様・設計書に基づき、各プリズム購入遷移導線に差分がないかコード・UIフローをレビューしてください。
- 過去の購入周りの修正・リファクタ履歴があれば、改修範囲を確認してください。

### 3. 【暫定・恒久対応策】
- 原因特定後、明確な該当条件が判明した場合は、**該当導線の遷移条件・パラメータ受け渡しの見直し修正**としてください（例：ダイアログからの遷移時にパラメータ不整合があれば正常値のセット等）。
- 他の経路で発生していれば共通購入画面のパラメータチェック、もしくはエラー時のリカバリガード強化（例：不正パラメータでエラー時はホーム遷移、ユーザーに再試行可な案内ダイアログ表示等）も検討ください。

### 4. 【共有・エスカレーション】
- 他環境や類似事例情報をプロジェクト内に共有し、万が一過去に同現象の修正チケットがないか情報提供を依頼するとなお良いかと存じます。

---

### アサイン候補

現状、**課金・購入導線の調査・修正経験が豊富な担当者**、および、**不具合再現・ログ解析可能なQA担当者**のセットアサインが望ましいです。  
プロジェクト過去チケットにおいて下記の担当者実績が複数ありますので、**Takishimaさん（QA/購入周りの調査・再現実績多数）**を主担当とし、必要に応じて**Sawadaさん**にも技術的レビュー依頼をお願いします。

- 例：[ガシャチケット詳細画面の不具合対応](https://app.clickup.com/t/86et2gxu8)（Takishimaさんアサイン）  
- 例：[課金関連バグ/パック購入まわり](https://app.clickup.com/t/86eurf763)（Yamashiroさんアサイン）

---

以上、ご確認いただき、着手や追加アサイン等ご指示お願いいたします。

---

#### 関連・類似過去タスク
- ガシャチケット詳細画面にて、複数のアイテム詳細の内容が実機と資料で相違している  
  https://app.clickup.com/t/86et2gxu8
- 課金検証ビルドで、「パス」を「スローテストカード」で購入して決済が完了した時、複数のバグが発生している  
  https://app.clickup.com/t/86eurf763


