# 原画・エンブレム マスタデータ作成プロンプト

## 概要

このプロンプトは、運営仕様書から原画・エンブレムのマスタデータを自動生成するためのものです。

## 使用方法

以下のプロンプトをAIに渡し、運営仕様書の該当箇所を入力として提供することで、マスタデータCSVを生成できます。

---

## プロンプト

```
あなたは、GLOWゲームプロジェクトの原画・エンブレムのマスタデータを作成する専門家です。

以下の運営仕様書から、原画・エンブレムのマスタデータを生成してください。

### 入力情報

運営仕様書から以下の情報を抽出してください:

**原画情報**:
- 原画ID
- 原画タイトル（最大40文字）
- 原画説明文（最大255文字）
- シリーズID（例: jig、osh、kai）
- レアリティ（N、R、SR、SSR、UR）
- 拠点追加HP（通常100）
- 欠片の数（通常16個）
- 欠片のドロップ設計（どのステージでどの欠片がドロップするか）

**エンブレム情報**:
- エンブレムID
- エンブレム名（最大255文字）
- エンブレム説明文（最大255文字）
- エンブレムタイプ（Event、Series）
- シリーズID
- 入手条件（イベント参加、降臨バトルランキング等）

### 出力要件

以下の7つのCSVファイルを生成してください:

1. **MstArtwork.csv**
   - カラム: ENABLE,id,mst_series_id,outpost_additional_hp,asset_key,sort_order,rarity,release_key

2. **MstArtworkI18n.csv**
   - カラム: ENABLE,release_key,id,mst_artwork_id,language,name,description

3. **MstArtworkFragment.csv**
   - カラム: ENABLE,release_key,id,mst_artwork_id,drop_group_id,drop_percentage,rarity,asset_num

4. **MstArtworkFragmentI18n.csv**
   - カラム: ENABLE,release_key,id,mst_artwork_fragment_id,language,name

5. **MstArtworkFragmentPosition.csv**
   - カラム: ENABLE,release_key,id,mst_artwork_fragment_id,position

6. **MstEmblem.csv**
   - カラム: ENABLE,id,emblemType,mstSeriesId,assetKey,release_key

7. **MstEmblemI18n.csv**
   - カラム: ENABLE,release_key,id,mst_emblem_id,language,name,description

### ID採番ルール

**原画ID**:
```
artwork_{category}_{series_id}_{連番4桁}
例: artwork_event_jig_0001
```

**欠片ID**:
```
artwork_fragment_{category}_{series_id}_{連番5桁}
例: artwork_fragment_event_jig_00001
連番ルール:
- 1つ目の原画: 00001~00016（欠片1~16）
- 2つ目の原画: 00101~00116（欠片1~16）
- 3つ目の原画: 00201~00216（欠片1~16）
```

**エンブレムID**:
```
emblem_{category}_{series_id}_{連番5桁}
例: emblem_event_jig_00001

降臨バトルエンブレムの場合:
emblem_adventbattle_{series_id}_{season}_{連番5桁}
例: emblem_adventbattle_jig_season01_00001
```

### 重要なルール

1. **ENABLEカラム**: すべての行で `e` を設定
2. **言語コード**: 日本語は `ja`
3. **16個の欠片**: 1つの原画につき必ず16個の欠片を作成
4. **欠片の配置**: asset_numとpositionは1~16の値で、すべて重複なく使用
5. **ドロップグループ**: 同じステージでドロップする欠片は同じdrop_group_idを設定
6. **ドロップ率**: 通常は100%
7. **拠点追加HP**: 通常は100
8. **レアリティの統一**: 原画と欠片は同じレアリティを設定することが多い
9. **降臨バトルエンブレム**: ランキング順位に応じて通常6個作成（1位、2位、3位、4~50位、51~300位、301~1,000位）
10. **エンブレム説明文**: 降臨バトルエンブレムの場合、開催年月とバトル名、順位を含める

### 欠片のドロップ設計例

通常、16個の欠片を6つのステージに分散配置します:

```
ステージ1 (drop_group_id: event_jig_a_0001): 欠片2個（例: asset_num 7, 5）
ステージ2 (drop_group_id: event_jig_a_0002): 欠片2個（例: asset_num 16, 11）
ステージ3 (drop_group_id: event_jig_a_0003): 欠片3個（例: asset_num 2, 9, 13）
ステージ4 (drop_group_id: event_jig_a_0004): 欠片3個（例: asset_num 8, 4, 3）
ステージ5 (drop_group_id: event_jig_a_0005): 欠片3個（例: asset_num 10, 14, 6）
ステージ6 (drop_group_id: event_jig_a_0006): 欠片3個（例: asset_num 12, 1, 15）
```

asset_numの順序はランダムで構いませんが、1~16のすべての数字を1回ずつ使用してください。

### 出力フォーマット

各CSVファイルは以下の形式で出力してください:

```csv
ENABLE,列名1,列名2,...
e,値1,値2,...
e,値1,値2,...
```

**注意事項**:
- 説明文に二重引用符（`"`）やカンマ（`,`）が含まれる場合は、CSV形式に従って適切にエスケープしてください
- 説明文全体をダブルクォートで囲み、内部の二重引用符は `""` にエスケープしてください

### 検証

生成後、以下を確認してください:

- [ ] 1つの原画につき16個の欠片が存在する
- [ ] asset_numとpositionは1~16の値がすべて重複なく存在する
- [ ] 欠片の3テーブル（MstArtworkFragment、MstArtworkFragmentI18n、MstArtworkFragmentPosition）で同じ欠片IDが存在する
- [ ] すべてのmst_artwork_idが対応するMstArtwork.idに存在する
- [ ] すべてのmst_artwork_fragment_idが対応するMstArtworkFragment.idに存在する
- [ ] 降臨バトルエンブレムはランキング順位に応じて複数作成されている

それでは、運営仕様書を入力してください。
```

---

## 具体例

### 入力例

```
【原画情報】
- タイトル: 必ず生きて帰る
- 説明: 死罪となった「がらんの画眉丸」は、死を目前に妻の言葉を思い出す。「人の心は、そんなに簡単に死なないわ」。里に残した妻がかけてくれた言葉だ。妻との「普通の暮らし」を手に入れるため、画眉丸は謎多き島・神仙郷へ向かう。そして心に強く誓う「必ず生きて帰る」と。
- シリーズID: jig（地獄楽）
- レアリティ: SSR
- リリースキー: 202601010
- 欠片ドロップ: ストーリークエスト「必ず生きて帰る」の6ステージに分散

【エンブレム情報】
- イベントエンブレム「神仙郷」
  - 説明: 仙薬探しのため、死罪人と打ち首執行人たちが上陸した秘境の島
- 降臨バトルエンブレム「罪人」（ランキング報酬）
  - バトル名: まるで 悪夢を見ているようだ
  - 開催: 2026年1月
  - ランキング区分: 1位、2位、3位、4~50位、51~300位、301~1,000位
```

### 出力例

#### MstArtwork.csv
```csv
ENABLE,id,mst_series_id,outpost_additional_hp,asset_key,sort_order,rarity,release_key
e,artwork_event_jig_0001,jig,100,event_jig_0001,01,SSR,202601010
```

#### MstArtworkI18n.csv
```csv
ENABLE,release_key,id,mst_artwork_id,language,name,description
e,202601010,artwork_event_jig_0001_ja,artwork_event_jig_0001,ja,必ず生きて帰る,"死罪となった""がらんの画眉丸""は、死を目前に妻の言葉を思い出す。「人の心は、そんなに簡単に死なないわ」。里に残した妻がかけてくれた言葉だ。妻との「普通の暮らし」を手に入れるため、画眉丸は謎多き島・神仙郷へ向かう。そして心に強く誓う「必ず生きて帰る」と。"
```

#### MstArtworkFragment.csv（一部）
```csv
ENABLE,release_key,id,mst_artwork_id,drop_group_id,drop_percentage,rarity,asset_num
e,202601010,artwork_fragment_event_jig_00001,artwork_event_jig_0001,event_jig_a_0001,100,SSR,7
e,202601010,artwork_fragment_event_jig_00002,artwork_event_jig_0001,event_jig_a_0001,100,SSR,5
e,202601010,artwork_fragment_event_jig_00003,artwork_event_jig_0001,event_jig_a_0002,100,SSR,16
...（全16個）
```

#### MstArtworkFragmentI18n.csv（一部）
```csv
ENABLE,release_key,id,mst_artwork_fragment_id,language,name
e,202601010,artwork_fragment_event_jig_00001_ja,artwork_fragment_event_jig_00001,ja,原画のかけら7
e,202601010,artwork_fragment_event_jig_00002_ja,artwork_fragment_event_jig_00002,ja,原画のかけら5
...（全16個）
```

#### MstArtworkFragmentPosition.csv（一部）
```csv
ENABLE,release_key,id,mst_artwork_fragment_id,position
e,202601010,artwork_fragment_event_jig_00001,artwork_fragment_event_jig_00001,7
e,202601010,artwork_fragment_event_jig_00002,artwork_fragment_event_jig_00002,5
...（全16個）
```

#### MstEmblem.csv
```csv
ENABLE,id,emblemType,mstSeriesId,assetKey,release_key
e,emblem_event_jig_00001,Event,jig,event_jig_00001,202601010
e,emblem_adventbattle_jig_season01_00001,Event,jig,adventbattle_jig_season01_00001,202601010
e,emblem_adventbattle_jig_season01_00002,Event,jig,adventbattle_jig_season01_00002,202601010
e,emblem_adventbattle_jig_season01_00003,Event,jig,adventbattle_jig_season01_00003,202601010
e,emblem_adventbattle_jig_season01_00004,Event,jig,adventbattle_jig_season01_00004,202601010
e,emblem_adventbattle_jig_season01_00005,Event,jig,adventbattle_jig_season01_00005,202601010
e,emblem_adventbattle_jig_season01_00006,Event,jig,adventbattle_jig_season01_00006,202601010
```

#### MstEmblemI18n.csv
```csv
ENABLE,release_key,id,mst_emblem_id,language,name,description
e,202601010,emblem_event_jig_00001_ja,emblem_event_jig_00001,ja,神仙郷,仙薬探しのため、死罪人と打ち首執行人たちが上陸した秘境の島
e,202601010,emblem_adventbattle_jig_season01_00001_ja,emblem_adventbattle_jig_season01_00001,ja,罪人(1位),"2026年1月開催降臨バトル『まるで 悪夢を見ているようだ』1位の証"
e,202601010,emblem_adventbattle_jig_season01_00002_ja,emblem_adventbattle_jig_season01_00002,ja,罪人(2位),"2026年1月開催降臨バトル『まるで 悪夢を見ているようだ』2位の証"
e,202601010,emblem_adventbattle_jig_season01_00003_ja,emblem_adventbattle_jig_season01_00003,ja,罪人(3位),"2026年1月開催降臨バトル『まるで 悪夢を見ているようだ』3位の証"
e,202601010,emblem_adventbattle_jig_season01_00004_ja,emblem_adventbattle_jig_season01_00004,ja,罪人(4~50位),"2026年1月開催降臨バトル『まるで 悪夢を見ているようだ』4~50位の証"
e,202601010,emblem_adventbattle_jig_season01_00005_ja,emblem_adventbattle_jig_season01_00005,ja,罪人(51~300位),"2026年1月開催降臨バトル『まるで 悪夢を見ているようだ』51~300位の証"
e,202601010,emblem_adventbattle_jig_season01_00006_ja,emblem_adventbattle_jig_season01_00006,ja,"罪人(301~1,000位)","2026年1月開催降臨バトル『まるで 悪夢を見ているようだ』301~1,000位の証"
```

---

## 応用例

### 複数の原画がある場合

2つ目の原画の欠片IDは以下のように採番します:

```
artwork_fragment_event_jig_00101  （2つ目の原画の欠片1）
artwork_fragment_event_jig_00102  （2つ目の原画の欠片2）
...
artwork_fragment_event_jig_00116  （2つ目の原画の欠片16）
```

### シリーズエンブレムの場合

```
emblem_series_jig_00001  （地獄楽シリーズエンブレム1）
emblem_series_jig_00002  （地獄楽シリーズエンブレム2）
```

### 異なる作品の場合

```
artwork_event_osh_0001  （推しの子イベント原画1）
emblem_event_kai_00001  （怪獣8号イベントエンブレム1）
```

---

## 注意事項

1. **欠片の数は必ず16個**: 4×4グリッドに対応するため、必ず16個作成してください
2. **asset_numとpositionの一致**: 通常は同じ値を設定します
3. **ドロップグループの設計**: 運営仕様書にドロップ設計がない場合は、6ステージに均等分散（2, 2, 3, 3, 3, 3）を推奨
4. **降臨バトルエンブレムの数**: ランキング区分に応じて通常6個作成しますが、仕様書の指定に従ってください
5. **テキストのエスケープ**: CSV形式に従って、二重引用符やカンマを適切にエスケープしてください
6. **文字数制限**: 原画名は最大40文字、説明文は最大255文字、エンブレム名・説明文は最大255文字
7. **リリースキー**: すべてのテーブルで同じリリースキーを使用してください

---

## トラブルシューティング

### 欠片が16個に満たない場合

原画1つにつき必ず16個の欠片を作成してください。asset_numは1~16のすべての数字を1回ずつ使用します。

### ドロップグループIDがわからない場合

運営仕様書に記載がない場合は、以下の命名規則を使用してください:

```
{event_id}_a_{ステージ連番4桁}

例:
event_jig_a_0001  （ステージ1）
event_jig_a_0002  （ステージ2）
event_jig_a_0003  （ステージ3）
```

### asset_numの順序

asset_numは1~16の値をランダムな順序で使用できますが、必ずすべての値を1回ずつ使用してください。実データの例を参考にすることを推奨します。

---

## 関連ドキュメント

- **手順書**: `原画・エンブレム_マスタデータ設定手順書.md`
- **マッピング分析**: `../../analysis/input-output-mapping.md`
- **DBスキーマ**: `projects/glow-server/api/database/schema/exports/master_tables_schema.json`
