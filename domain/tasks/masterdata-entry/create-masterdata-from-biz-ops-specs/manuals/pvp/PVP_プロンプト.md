# PVPマスタデータ作成プロンプト

## 作業内容

手順書（PVP_ランクマッチ_マスタデータ設定手順書.md）に従って、
添付したランクマッチ開催仕様書からマスタデータを作成してください。
ランクマッチ開催仕様書: {ファイル名を指定}

新規リソース情報など、データ作成に必要な追加情報があれば、追加情報ファイルとして追加します。
追加情報ファイル:
- {追加ファイル1}
- {追加ファイル2}

## 入力パラメータ

- release_key: {release_keyを指定（例: 202601010）}
- mst_series_id: {シリーズIDを指定（例: jig、osh、kai）}
- mst_pvp_id: {PVP IDを指定（例: 2026004、2026005）}
- pvp_name: {シーズン名を指定（例: 地獄楽1ランクマ、地獄楽2ランクマ）}
- mst_in_game_id: {インゲームIDを指定（例: pvp_jig_01、pvp_jig_02）}
- ranking_min_pvp_rank_class: {参加最低ランクを指定（例: Bronze、Silver、Gold、Platinum）}
- max_daily_challenge_count: {フリーチャレンジ回数（例: 10）}
- max_daily_item_challenge_count: {チケットチャレンジ回数（例: 10）}
- item_challenge_cost_amount: {チケットコスト（例: 1）}
- initial_battle_point: {初期BP（例: 1000）}
- stage_info: {ステージ構成（例: 3段ステージ）}
- koma_effect: {コマ効果（例: 毒コマ、突風コマ）}
- special_rule: {特別ルール（例: 全キャラHP3倍UP）}

## 出力形式

### 1. マスタデータ

- 手順書の「データ整合性のチェック」を満たしたデータになっていることを必ずチェックし、問題があれば修正完了してから出力する
- Markdown表形式で出力（スプレッドシートへのエクスポート・コピーボタンが正常に表示される形式）
- 以下の2シートを作成:
  1. MstPvp
  2. MstPvpI18n

### 2. 推測値レポート（必須）

作成したデータのうち、以下に該当するものを必ずレポートしてください：

- **添付ファイルにも手順書にも記載がなく、推測で決定したID値やパラメータ値**
- 手順書通りに作成したID値は対象外

**レポート形式:**
```
## 推測値レポート

### [テーブル名].[カラム名]
- 値: [設定した値]
- 理由: [推測した根拠]
- 確認事項: [ユーザーが確認すべき内容]
```

**推測値の例**:
- MstPvp.max_daily_challenge_count: フリーチャレンジ回数（仕様書に記載なし、推測値）
- MstPvp.max_daily_item_challenge_count: チケットチャレンジ回数（仕様書に記載なし、推測値）
- MstPvp.initial_battle_point: 初期BP（特別ルールから推測）
- MstPvpI18n.description: ルール説明文（仕様書から抽出・整形）

**重要:** このレポートを怠ると、データインポートエラーや本番不具合のリスクが高まります。推測で決定した値は必ず報告してください。

## 注意事項

### ID採番について

MstPvp.idは、以下の形式で採番してください：

```
YYYYNNN
```

**パラメータ**:
- YYYY: 年（例: 2026）
- NNN: シーズン連番（例: 004、005）

**採番例**:
```
2026004   (2026年シーズン4: 地獄楽1ランクマ)
2026005   (2026年シーズン5: 地獄楽2ランクマ)
```

**mst_in_game_idの採番**:
```
pvp_{series_id}_{連番2桁}
```

**採番例**:
```
pvp_jig_01   (地獄楽1ランクマ)
pvp_jig_02   (地獄楽2ランクマ)
```

### ルール説明文の構造について

MstPvpI18n.descriptionは、以下の構造で作成してください：

```
【基本情報】
（ステージ構成、リーダーP等の基本ルール）

【コマ効果情報】
（登場するコマ効果と対策）

【特別ルール情報】
（特別ルールの説明）
```

**作成例**:
```
【基本情報】
3段のステージで戦うぞ!
相手との距離があるので、リーダーPのバランスを考えてパーティを編成しよう!

【コマ効果情報】
突風コマが登場するぞ!
特性で突風コマ無効化を持っているキャラを編成しよう!

【特別ルール情報】
リーダーPが1,000溜まった状態でバトルが開始されるぞ!
さらに、全キャラの体力のステータス値が3倍UP!
```

**注意点**:
- 改行は`\n`で表現する
- 【基本情報】【コマ効果情報】【特別ルール情報】の3セクションを必ず含める
- プレイヤーが理解しやすい表現を心がける

### ranking_min_pvp_rank_class設定について

参加最低ランククラスは、以下の値から選択してください：

| ranking_min_pvp_rank_class | 説明 |
|----------|------|
| **Bronze** | ブロンズ（初心者ランク、参加最低ランク） |
| **Silver** | シルバー（中級者ランク） |
| **Gold** | ゴールド（上級者ランク） |
| **Platinum** | プラチナ（最上級ランク） |

**推奨**: 通常は`Bronze`を設定（誰でも参加可能）

### 挑戦回数設定について

以下の2種類の挑戦回数を設定してください：

1. **max_daily_challenge_count**（フリーチャレンジ）:
   - 通常: `10`回
   - リソースコストなし

2. **max_daily_item_challenge_count**（チケットチャレンジ）:
   - 通常: `10`回
   - item_challenge_cost_amount: `1`（ランクマッチチケット1枚）

### 初期BP設定について

initial_battle_pointは、バトル開始時のリーダーPです。

- **通常**: `0`（リーダーP0スタート）
- **特別ルール**: `1000`（リーダーP1000スタート）

**注意**: 特別ルール設定は、MstInGameSpecialRuleで行います。

### 関連設定について

PVP設定には、以下の関連設定が必要です（別途作成）：

**MstInGame**:
- id: pvp_{series_id}_{連番2桁}
- BGM、背景、ページID、敵配置ID等

**MstInGameSpecialRule**（特別ルールがある場合）:
- 初期BP設定（InitialBattlePoint: 1000）
- 全キャラHP補正（AllUnitHpRate: 300）
- 全キャラATK補正（AllUnitAtkRate: 300）

**MstPage / MstKomaLine**:
- ステージ構成（3段ステージ等）
- コマ効果（毒コマ、突風コマ等）

**MstAutoPlayerSequence**:
- PVP用オートプレイ設定

**注意**: これらの関連設定の詳細は、「クエスト・ステージ手順書」および「インゲーム手順書」を参照してください。

### I18n設定について

以下のI18nテーブルを作成してください：

**MstPvpI18n**:
- 最低でも日本語（ja）を設定
- name: 通常は空欄
- description: ルール説明文（3セクション構成）

### 外部キー整合性について

以下のリレーションが正しく設定されていることを必ず確認してください：
- MstPvp.mst_in_game_id → MstInGame.id
- MstPvpI18n.mst_pvp_id → MstPvp.id

### データ整合性のチェック

出力前に、以下の項目を必ず確認してください：

- [ ] ヘッダーの列順が正しいか
- [ ] すべてのIDが一意であるか
- [ ] ID採番ルールに従っているか（年月日形式: YYYYNNN）
- [ ] リレーションが正しく設定されているか
- [ ] enum値が正確に一致しているか（ranking_min_pvp_rank_class）
- [ ] 数値が妥当か（挑戦回数、初期BP等）
- [ ] description設定が完全か（3セクション構成）
- [ ] 改行が正しく表現されているか（\n）
- [ ] 関連設定（MstInGame等）の必要性を確認したか

## 出力例

### MstPvp

| ENABLE | id | release_key | ranking_min_pvp_rank_class | max_daily_challenge_count | max_daily_item_challenge_count | item_challenge_cost_amount | mst_in_game_id | initial_battle_point |
|--------|----|-----------|-----------------------------|---------------------------|--------------------------------|----------------------------|----------------|---------------------|
| e | 2026004 | 202601010 | Bronze | 10 | 10 | 1 | pvp_jig_01 | 1000 |
| e | 2026005 | 202601010 | Bronze | 10 | 10 | 1 | pvp_jig_02 | 1000 |

### MstPvpI18n

| ENABLE | id | release_key | mst_pvp_id | language | name | description |
|--------|----|-----------|-----------|----|------|------------|
| e | 2026004 | 202601010 | 2026004 | ja | | 【基本情報】\n3段のステージで戦うぞ!\n相手との距離があるので、リーダーPのバランスを考えてパーティを編成しよう!\n\n【コマ効果情報】\n毒コマが登場するぞ!\n特性で毒ダメージ軽減を持っているキャラを編成しよう!\n\n【特別ルール情報】\nリーダーPが1,000溜まった状態でバトルが開始されるぞ!\nさらに、全キャラの体力のステータス値が3倍UP! |
| e | 2026005 | 202601010 | 2026005 | ja | | 【基本情報】\n3段のステージで戦うぞ!\n相手との距離があるので、リーダーPのバランスを考えてパーティを編成しよう!\n\n【コマ効果情報】\n突風コマが登場するぞ!\n特性で突風コマ無効化を持っているキャラを編成しよう!\n\n【特別ルール情報】\nリーダーPが1,000溜まった状態でバトルが開始されるぞ!\nさらに、全キャラの体力のステータス値が3倍UP! |

## トラブルシューティング

### よくあるエラー

1. **IDの重複エラー**
   - 原因: 既存のPVP IDと重複している
   - 対策: 最新のシーズン連番を確認し、採番する

2. **外部キー整合性エラー**
   - 原因: mst_in_game_idが存在しない
   - 対策: MstInGameを先に作成し、IDを確認する

3. **enum値エラー**
   - 原因: ranking_min_pvp_rank_classの大文字小文字が一致していない
   - 対策: Bronze、Silver、Gold、Platinumのいずれかを正確に設定

4. **description改行エラー**
   - 原因: 改行が正しく表現されていない
   - 対策: 改行を`\n`で表現する

### 確認すべきポイント

- [ ] 手順書のID採番ルールに従っているか
- [ ] 関連設定（MstInGame等）が作成されているか
- [ ] ルール説明文が3セクション構成になっているか
- [ ] 挑戦回数やBPの設定が妥当か
- [ ] 他のランクマッチと設定が整合しているか
