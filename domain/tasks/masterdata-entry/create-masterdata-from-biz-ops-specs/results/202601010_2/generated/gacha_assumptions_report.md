# ガチャマスタデータ生成 - 推測値レポート

## 生成日時
2026-02-11

## リリースキー
202601010

## 生成対象ガチャ
- Pickup_jig_001: 地獄楽 いいジャン祭ピックアップガシャ A
- Pickup_jig_002: 地獄楽 いいジャン祭ピックアップガシャ B

## 推測値と根拠

### 1. OprGacha.csv

#### display_information_id, dev-qa_display_information_id
- **推測値**: 空文字列
- **根拠**: 過去データ（Pickup系ガチャ）では、UUIDが設定されているが、運営仕様書にはこれらの値が記載されていない。新規ガチャのため、後工程で設定される想定。

#### display_gacha_caution_id
- **推測値**: 空文字列
- **根拠**: 運営仕様書に注意文言のIDが明記されていないため、過去データのパターンから空文字列とした。

#### gacha_priority
- **推測値**:
  - Pickup_jig_001: 62
  - Pickup_jig_002: 61
- **根拠**: 過去データで最新のPickupガチャ（Pickup_osh_001）が61のため、その次の番号として62, 61を連番で割り当てた。優先度はAが高い想定。

### 2. OprGachaI18n.csv

#### banner_url
- **推測値**:
  - Pickup_jig_001: jig_00001
  - Pickup_jig_002: jig_00002
- **根拠**: 運営仕様書の「banner_URL」フィールドの値を使用。過去データのパターンと一致。

#### logo_asset_key, logo_banner_url
- **推測値**:
  - 両方とも: pickup_a_00001, pickup_b_00001
- **根拠**: 過去のピックアップガチャA/Bのパターンを踏襲。作品シリーズごとに異なるが、ピックアップタイプでは統一されている。

#### gacha_background_color
- **推測値**: Yellow
- **根拠**: 過去のピックアップガチャは全てYellowのため。

#### gacha_banner_size
- **推測値**: SizeL
- **根拠**: 過去のピックアップガチャは全てSizeLのため。

### 3. OprGachaUseResource.csv

#### id
- **推測値**: 69-74（連番）
- **根拠**: 過去データの最大ID（68）の次から連番で割り当て。

#### チケットID (ticket_glo_00003)
- **推測値**: ticket_glo_00003（ピックアップガシャチケット）
- **根拠**: 運営仕様書の「チケットID」フィールドに明記されている。

#### cost_priority
- **推測値**:
  - チケット: 2
  - 単発プリズム: 3
  - 10連プリズム: 3
- **根拠**: 過去のピックアップガチャのパターンを踏襲。チケットが優先度2、プリズムが優先度3。

### 4. OprGachaUpper.csv

#### id
- **推測値**: 17, 18
- **根拠**: 過去データの最大ID（16）の次から連番で割り当て。

#### count
- **推測値**: 100
- **根拠**: 運営仕様書の「天井回数」フィールドに100回目と明記されている。

### 5. OprGachaDisplayUnitI18n.csv

#### id
- **推測値**: 78-81
- **根拠**: 過去データの最大ID（77）の次から連番で割り当て。

#### description
- **推測値**: 運営仕様書の「キャラ訴求文言」を使用
- **根拠**:
  - Pickup_jig_001:
    - chara_jig_00401: 「③キャラ訴求文言」から取得
    - chara_jig_00501: 「③-1キャラ訴求文言」から取得
  - Pickup_jig_002:
    - chara_jig_00001: 「③キャラ訴求文言」から取得
    - chara_jig_00501: 「③-1キャラ訴求文言」から取得

### 6. OprGachaPrize.csv

#### id命名規則
- **推測値**: `{group_id}_{連番}`形式
- **根拠**: 過去データのパターンを踏襲。

#### weight（重み）
- **推測値**: 運営仕様書の「waight」列の値を使用
- **根拠**:
  - 通常枠: 設計書の「ラインナップ」セクションの値
  - 確定枠: 設計書の「SR確定枠確率ラインナップ」セクションの値
  - ピックアップUR: 7020（通常枠）、175500（確定枠）
  - UR: 1755（通常枠）、43875（確定枠）
  - ピックアップSSR: 14040（通常枠）、351000（確定枠）
  - SSR: 8840（通常枠）、221000（確定枠）
  - SR: 32760（通常枠）、2035800（確定枠）
  - R: 54080（通常枠のみ）

#### pickup フラグ
- **推測値**:
  - ピックアップキャラ（UR/SSR）: 1
  - その他: 0
- **根拠**:
  - chara_jig_00401（賊王 亜左 弔兵衛）: ガチャAのピックアップUR
  - chara_jig_00001（がらんの画眉丸）: ガチャBのピックアップUR
  - chara_jig_00501（山田浅ェ門 桐馬）: 両ガチャ共通のピックアップSSR

#### ガチャBでのchara_jig_00401の扱い
- **決定事項**: ガチャBのラインナップから除外
- **根拠**: 運営仕様書の「備考」欄に「ガシャAからはガシャBでピックアップしてる『がらんの画眉丸』はラインナップから抜く」と記載があるため、逆にガチャBからはガチャAのピックアップUR「賊王 亜左 弔兵衛」を除外する必要があると判断。

## 確認が必要な項目

### 高優先度
1. **display_information_id, dev-qa_display_information_id**: バナー表示情報のUUIDが必要
2. **gacha_priority**: 他のガチャとの優先度調整が必要な場合がある

### 中優先度
1. **banner_url, logo_asset_key**: アセットキーが実際のアセット名と一致しているか確認
2. **ガチャBのラインナップ**: chara_jig_00401の除外が正しいか確認（運営仕様書の備考の解釈）

### 低優先度
1. **gacha_background_color, gacha_banner_size**: デザイン仕様と一致しているか確認

## 生成統計

### ファイル別レコード数
- OprGacha.csv: 2レコード（ガチャA, ガチャB）
- OprGachaI18n.csv: 2レコード（ガチャA, ガチャB × 日本語）
- OprGachaUseResource.csv: 6レコード（ガチャ2つ × コスト3種類）
- OprGachaUpper.csv: 2レコード（ガチャA, ガチャB）
- OprGachaDisplayUnitI18n.csv: 4レコード（ガチャA 2キャラ + ガチャB 2キャラ）
- OprGachaPrize.csv: 152レコード
  - Pickup_jig_001 通常枠: 42レコード
  - Pickup_jig_001 確定枠: 33レコード
  - Pickup_jig_002 通常枠: 42レコード
  - Pickup_jig_002 確定枠: 33レコード

### 参照データ整合性
- 全てのunit_idは既存のMstUnit.csvに存在することを確認済み
- チケットID（ticket_glo_00003）は過去データで使用実績あり
- gacha_typeはPickupで、過去データと一致
- upper_typeはPickupで、天井100回は過去データと一致

## 注意事項

1. **MstGachaRateUp, MstGachaPickupテーブルについて**
   - タスク指示では生成対象に含まれていたが、過去データおよびDBスキーマに該当テーブルが存在しないため、生成対象から除外しました。
   - レートアップとピックアップの情報はOprGachaPrizeテーブルのpickupフラグとweightで表現されています。

2. **ガチャ設計書のweight値について**
   - 設計書内でweightとwaightの表記揺れがありますが、数値は正確に転記しました。
   - 確率計算の検証は行っていますが、合計が100.00%になるよう調整されています。

3. **新規ヒーローIDの使用**
   - chara_jig_00401（賊王 亜左 弔兵衛）
   - chara_jig_00501（山田浅ェ門 桐馬）
   これらは既にMstUnit.csvに生成済みであることを確認しています。
