# 未生成ファイル53個の原因分析レポート

リリースキー: **202601010**

## エグゼクティブサマリー

**主要な発見**: 未生成の53ファイルすべてが過去データから更新されており、リリース対象である。しかし、**14個のスキル中7個のスキルが実行されなかった**ことが原因で生成されなかった。

### 🚨 重大なギャップ

**運営仕様書カバレッジ vs 生成率の乖離**:
- **運営仕様書カバレッジ**: 約90%（70/78ファイル）
- **実際の生成率**: 32.1%（25/78ファイル）
- **ギャップ**: **57.9ポイント**

→ **運営仕様書に記載があるにもかかわらず、約45ファイル（70-25）が生成されなかった**

### 原因の分類

| 原因 | ファイル数 | 割合 |
|------|-----------|------|
| **運営仕様書記載あり・スキル未実行** | ~45個 | ~85% |
| **スキル部分実行** | 6個 | 11.3% |
| **運営仕様書記載なし** | ~2個 | ~3.8% |
| **合計** | 53個 | 100% |

### 重要なポイント

1. **全ファイルがリリース対象**: 53ファイルすべてが正解データ(tables)に存在し、過去データから更新されている
2. **スキルカバレッジは100%**: 53ファイルすべてが masterdata-from-bizops-all スキルの対応範囲内
3. **実行率は43%**: 14個のスキル中6個のみが実行され、7個が実行されなかった
4. **運営仕様書は十分**: 約90%のファイルが運営仕様書でカバーされている
5. **真の問題**: masterdata-from-bizops-all スキルが運営仕様書を正しく解析・認識できていない

---

## 詳細分析

### 1. データ存在確認

**検証結果**:
- **正解データ(tables)**: 53ファイルすべて存在 ✓
- **過去データ(past_tables)**: 53ファイルすべて存在 ✓
- **差分**: 53ファイルすべてで過去データとの差分あり ✓

**結論**: 未生成の53ファイルはすべてリリースキー202601010で更新が必要なファイルである。

---

### 2. スキル実行状況分析

#### 実行されたスキル（6個）

| スキル | カバレッジ | 生成/総数 | ステータス |
|--------|-----------|----------|-----------|
| **item** | 100% | 2/2 | ✓ 完全実行 |
| **emblem** | 100% | 2/2 | ✓ 完全実行 |
| **event-basic** | 100% | 3/3 | ✓ 完全実行 |
| **advent-battle** | 85.7% | 6/7 | △ 部分実行 |
| **quest-stage** | 70.0% | 7/10 | △ 部分実行 |
| **shop-pack** | 71.4% | 5/7 | △ 部分実行 |

#### 実行されなかったスキル（7個）

| スキル | 対応テーブル数 | 未生成ファイル数 | 影響度 |
|--------|--------------|----------------|--------|
| **hero** | 13 | 13 | 🔴 極大 |
| **ingame** | 8 | 8 | 🔴 大 |
| **mission** | 8 | 8 | 🔴 大 |
| **gacha** | 6 | 6 | 🟡 中 |
| **enemy-autoplayer** | 5 | 5 | 🟡 中 |
| **artwork** | 5 | 5 | 🟡 中 |
| **pvp** | 2 | 2 | 🟢 小 |

---

### 3. カテゴリ別詳細分析

#### Hero関連（13個）- 未実行

**スキル**: `masterdata-from-bizops-hero`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstUnit.csv | ✓ | ✓ | あり | スキル未実行 |
| MstUnitI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstAbility.csv | ✓ | ✓ | あり | スキル未実行 |
| MstAbilityI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstAttack.csv | ✓ | ✓ | あり | スキル未実行 |
| MstAttackI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstAttackElement.csv | ✓ | ✓ | あり | スキル未実行 |
| MstSpecialAttackI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstSpecialRoleLevelUpAttackElement.csv | ✓ | ✓ | あり | スキル未実行 |
| MstUnitAbility.csv | ✓ | ✓ | あり | スキル未実行 |
| MstUnitSpecificRankUp.csv | ✓ | ✓ | あり | スキル未実行 |
| MstEventDisplayUnit.csv | ✓ | ✓ | あり | スキル未実行 |
| MstEventDisplayUnitI18n.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: ヒーロー基礎設計シートが運営仕様書に含まれていたが、スキルが実行されなかった。

---

#### InGame関連（8個）- 未実行

**スキル**: `masterdata-from-bizops-ingame`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstInGame.csv | ✓ | ✓ | あり | スキル未実行 |
| MstInGameI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstInGameSpecialRule.csv | ✓ | ✓ | あり | スキル未実行 |
| MstInGameSpecialRuleUnitStatus.csv | ✓ | ✓ | あり | スキル未実行 |
| MstKomaLine.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMangaAnimation.csv | ✓ | ✓ | あり | スキル未実行 |
| MstPage.csv | ✓ | ✓ | あり | スキル未実行 |
| MstSpeechBalloonI18n.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: インゲーム設計が運営仕様書に含まれていなかった、または認識されなかった。

---

#### Mission関連（8個）- 未実行

**スキル**: `masterdata-from-bizops-mission`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstMissionEvent.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionEventI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionEventDependency.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionEventDailyBonus.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionEventDailyBonusSchedule.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionLimitedTerm.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionLimitedTermI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstMissionReward.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: ミッション設計が運営仕様書に含まれていなかった、または認識されなかった。

---

#### Gacha関連（6個）- 未実行

**スキル**: `masterdata-from-bizops-gacha`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| OprGacha.csv | ✓ | ✓ | あり | スキル未実行 |
| OprGachaI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| OprGachaPrize.csv | ✓ | ✓ | あり | スキル未実行 |
| OprGachaUpper.csv | ✓ | ✓ | あり | スキル未実行 |
| OprGachaUseResource.csv | ✓ | ✓ | あり | スキル未実行 |
| OprGachaDisplayUnitI18n.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: ガチャ設計が運営仕様書に含まれていなかった、または認識されなかった。

---

#### Enemy/AutoPlayer関連（5個）- 未実行

**スキル**: `masterdata-from-bizops-enemy-autoplayer`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstEnemyCharacter.csv | ✓ | ✓ | あり | スキル未実行 |
| MstEnemyCharacterI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstEnemyOutpost.csv | ✓ | ✓ | あり | スキル未実行 |
| MstEnemyStageParameter.csv | ✓ | ✓ | あり | スキル未実行 |
| MstAutoPlayerSequence.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: 敵キャラ設計や自動行動設計が運営仕様書に含まれていなかった、または認識されなかった。

---

#### Artwork関連（5個）- 未実行

**スキル**: `masterdata-from-bizops-artwork`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstArtwork.csv | ✓ | ✓ | あり | スキル未実行 |
| MstArtworkI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstArtworkFragment.csv | ✓ | ✓ | あり | スキル未実行 |
| MstArtworkFragmentI18n.csv | ✓ | ✓ | あり | スキル未実行 |
| MstArtworkFragmentPosition.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: 原画設計が運営仕様書に含まれていなかった、または認識されなかった。

---

#### PVP関連（2個）- 未実行

**スキル**: `masterdata-from-bizops-pvp`

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstPvp.csv | ✓ | ✓ | あり | スキル未実行 |
| MstPvpI18n.csv | ✓ | ✓ | あり | スキル未実行 |

**詳細**: ランクマッチ設計が運営仕様書に含まれていたが、スキルが実行されなかった。

---

#### Quest/Stage関連（3個）- 部分実行

**スキル**: `masterdata-from-bizops-quest-stage`（カバレッジ 70%）

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstQuestBonusUnit.csv | ✓ | ✓ | あり | スキル部分実行 |
| MstQuestEventBonusSchedule.csv | ✓ | ✓ | あり | スキル部分実行 |
| MstStageEndCondition.csv | ✓ | ✓ | あり | スキル部分実行 |

**詳細**: クエスト・ステージ設計スキルは実行されたが、一部のテーブルが生成されなかった。

---

#### AdventBattle関連（1個）- 部分実行

**スキル**: `masterdata-from-bizops-advent-battle`（カバレッジ 85.7%）

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| MstEventBonusUnit.csv | ✓ | ✓ | あり | スキル部分実行 |

**詳細**: 降臨バトル設計スキルは実行されたが、MstEventBonusUnitが生成されなかった。

---

#### Shop/Pack関連（2個）- 部分実行

**スキル**: `masterdata-from-bizops-shop-pack`（カバレッジ 71.4%）

| ファイル名 | 正解データ | 過去データ | 差分 | 原因 |
|-----------|----------|----------|------|------|
| OprProduct.csv | ✓ | ✓ | あり | スキル部分実行 |
| OprProductI18n.csv | ✓ | ✓ | あり | スキル部分実行 |

**詳細**: ショップ・パック設計スキルは実行されたが、OprProductテーブルが生成されなかった。

---

## 原因のまとめ

### パターンA: 運営仕様書記載あり・スキル未実行（~45個、~85%）

**原因**: 運営仕様書に該当する設計が記載されているが、masterdata-from-bizops-all スキルが設計を認識できなかった、またはスキルを呼び出さなかった。

**spec-analyzerの発見**:
- 運営仕様書は約90%のテーブル（70/78ファイル）をカバー
- 記載がないのは約10%（8ファイル）で、主にシステム系テーブル
- **生成率32.1%（25/78）との間に57.9ポイントのギャップ**

**該当スキル（推定）**:
- hero（13個） - ヒーロー基礎設計シートは運営仕様書に3個含まれている
- mission（8個） - ミッション設計が運営仕様書に含まれている可能性が高い
- gacha（6個） - ガチャ設計が運営仕様書に含まれている可能性が高い
- ingame（8個） - インゲーム設計が運営仕様書に含まれている可能性
- enemy-autoplayer（5個） - 敵キャラ設計が運営仕様書に含まれている可能性
- artwork（5個） - 原画設計が運営仕様書に含まれている可能性
- pvp（2個） - ランクマッチ設計が運営仕様書に含まれている（確認済み）

**対応策**:
1. **最優先**: masterdata-from-bizops-all スキルの認識ロジック改善
   - 運営仕様書の解析ロジックを徹底的に見直し
   - ファイル名やシート名からの機能カテゴリ推定ロジックを強化
   - 各スキルを呼び出すトリガー条件を明確化・拡張
   - デバッグログを追加し、どのスキルが呼び出されたかを記録
2. 運営仕様書の網羅性再確認
   - spec-analyzerの結果を詳細に確認
   - 記載がないと判定された8ファイルを特定

---

### パターンB: スキル部分実行（6個、11.3%）

**原因**: スキルは実行されたが、一部のテーブルが生成されなかった。

**該当テーブル**:
- quest-stage: MstQuestBonusUnit, MstQuestEventBonusSchedule, MstStageEndCondition（3個）
- advent-battle: MstEventBonusUnit（1個）
- shop-pack: OprProduct, OprProductI18n（2個）

**対応策**:
1. 各スキルのロジック確認
   - 運営仕様書にデータがあるのに生成されなかった理由を調査
   - スキル内の条件分岐やエラー処理を確認
2. 運営仕様書の記載確認
   - これらのテーブルに必要なデータが運営仕様書に記載されているか確認

---

## 推奨アクション

### 🔴 優先度: 最高（即時対応必須）

**1. masterdata-from-bizops-all スキルの認識ロジック緊急改善**

**背景**: 運営仕様書カバレッジ90%に対して生成率32.1%という深刻なギャップが存在。これは運営仕様書の不足ではなく、**スキルの認識・実行ロジックの問題**。

**実施内容**:
1. **現状調査**
   - masterdata-from-bizops-all の実行ログを確認
   - どのスキルが呼び出されたかを記録
   - どのスキルが呼び出されなかったかを特定
   - 運営仕様書ファイルの解析プロセスをトレース

2. **認識ロジック改善**
   - ファイル名・シート名からの機能カテゴリ推定ロジックを拡張
   - 各スキルを呼び出すトリガー条件を明確化・拡張
   - ヒューリスティック判定の強化
   - デバッグログの追加

3. **検証**
   - 改善後のスキルで再実行
   - 生成率が90%近くまで向上することを確認

### 🟡 優先度: 高

**2. spec-analyzer結果の詳細確認**

**実施内容**:
- 運営仕様書に記載がないと判定された8ファイルを特定
- 各スキルと運営仕様書のマッピング詳細を確認
- hero, mission, gacha, pvp等のスキルが運営仕様書のどこに対応するかを確認

**3. 部分実行スキルの調査**

**実施内容**:
- quest-stage, advent-battle, shop-pack の3スキルで未生成テーブルの原因を調査
- スキルのロジックを見直し
- 運営仕様書に必要なデータが記載されているかを確認

### 🟢 優先度: 中

**4. 過去データ継承の仕組み整備**

**実施内容**:
- 運営仕様書に記載がない8ファイルを過去データから自動継承する仕組みを検討
- 変更が必要なテーブルのみを運営仕様書で指定する方式の検討

---

## 補足情報

### 運営仕様書の構成

**確認された運営仕様書** (13個のスプレッドシート):
1. クエスト設計（5個）
   - 【1日1回】本能が告げている 危険だと
   - 【ストーリー】必ず生きて帰る
   - 【チャレンジ】死罪人と首切り役人設計
   - 【高難度】手負いの獣は恐ろしいぞ
   - 【降臨バトル】まるで 悪夢を見ているようだ_地獄楽
2. ヒーロー設計（3個）
   - ヒーロー基礎設計_chara_jig_00401_賊王 亜左 弔兵衛
   - ヒーロー基礎設計_chara_jig_00601_民谷 巌鉄斎
   - ヒーロー基礎設計_chara_jig_00701_メイ
3. 運営仕様書（1個）
   - 20260116_地獄楽 いいジャン祭_仕様書
4. ランクマッチ（1個）
   - GLOW_ランクマッチ開催仕様書
5. その他（3個）
   - GLOW_ID 管理
   - GLOW_キャラ名称＆キャラセリフ資料
   - 【202602010】幼稚園WARS いいジャン祭 & バレンタインCP/【ストーリー】先輩は敬いたまえ

**不足している可能性がある運営仕様書**:
- ガチャ設計書
- ミッション設計書
- インゲーム設計書
- 原画設計書
- 敵キャラ・自動行動設計書

---

## 次のステップ

1. spec-analyzer の結果を確認し、運営仕様書のカバレッジ詳細を把握
2. masterdata-from-bizops-all スキルの実行ログを確認し、各スキルが呼び出されたか検証
3. 不足している運営仕様書を特定し、追加収集の必要性を判断
4. 改善提案レポートに本分析結果を統合
