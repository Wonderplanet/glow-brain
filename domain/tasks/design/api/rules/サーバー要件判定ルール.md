# サーバー要件判定ルール（ゲームAPI開発向け）

本ドキュメントは、  
**要件分類された仕様項目を対象に、  
それが「サーバー要件として扱うべきか」を判定するための共通ルール**を定義する。

目的は以下の通り。

- サーバー開発者が集中すべき仕様項目のみを抽出する
- クライアント・他職種との責務境界を明確にする
- 「これはサーバーでやるのか？」という議論を減らす

---

## サーバー要件判定の全体マップ

```
サーバー要件判定
├─ サーバー要件（必須）
├─ サーバー関与要件（協調）
├─ 非サーバー要件（対象外）
└─ サーバー不要（明示的除外）
```

各仕様項目は、必ずこの4分類のいずれかに属する。

---

## 1. サーバー要件（必須）

### 定義
**サーバーが実装・判断・保証しなければ、  
ゲーム体験・整合性・安全性が成立しない要件**。

### 判定ルール
以下のいずれかに該当する場合、本分類とする。

- サーバー側で結果を確定する必要がある
- クライアントに任せると不正・破綻が起きる
- 永続化（DB更新）が発生する
- 判定ロジック・計算ロジックが存在する
- 冪等性・整合性・安全性を保証する必要がある

### 典型例
- ガチャ抽選・結果確定
- 報酬付与・消費処理
- 達成条件判定
- 不正検知・検証処理

---

## 2. サーバー関与要件（協調）

### 定義
**主導はクライアント・運営側だが、  
サーバー側の対応・前提が必要となる要件**。

### 判定ルール
以下に該当する場合、本分類とする。

- サーバーは状態・設定・値を提供するのみ
- 表示やUXはクライアント依存
- サーバーが判断ロジックを持たない

### 典型例
- 設定フラグ取得API
- イベント期間・状態の取得
- 表示条件に使う値の提供

---

## 3. 非サーバー要件（対象外）

### 定義
**サーバー処理がなくても成立し、  
他職種のみで完結する要件**。

### 判定ルール
以下に該当する場合、本分類とする。

- UI・演出・UXのみの話
- 見た目や体感に関する仕様
- サーバー状態に影響しない

### 典型例
- 画面遷移
- アニメーション
- SE・BGM
- 表示レイアウト

---

## 4. サーバー不要（明示的除外）

### 定義
**仕様書には存在するが、  
サーバー側では対応しないと明示すべき要件**。

### 判定ルール
以下に該当する場合、本分類とする。

- クライアント側で完結することが前提
- 運営マニュアル・手順レベルの内容
- サーバー対応が不要であることを合意済み

### 典型例
- クライアントのみで完結する表示条件
- 運営オペレーション手順
- 分析・集計手作業の説明

### 記載ルール
- 除外理由を必ず明記する
- サーバー要件書の末尾または備考にまとめる

---

## 判定の最重要質問（迷ったらこれ）

> **この仕様をサーバーが責任を持たないと、事故るか？**

- YES → サーバー要件（必須）
- NO  → 次の質問へ

> **サーバーは値や状態を提供するだけか？**

- YES → サーバー関与要件
- NO  → 非サーバー要件 / 明示的除外

---

## 要件分類との対応関係（参考）

| 元の要件分類 | サーバー要件になりやすさ |
|---|---|
| 機能要件 | 高 |
| 非機能要件 | 高 |
| 運用要件 | 中 |
| 制約条件 | 低 |
| 実装要件 | 中 |
| ビジネス要件 | 対象外 |

---

## 備考
- 1つの仕様項目に複数の観点が含まれることは珍しくない
- 本ドキュメントの目的は「混ぜないこと」と「責務を明確にすること」である
