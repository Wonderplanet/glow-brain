# ゲーム体験仕様書_要件分類ルール （ゲームAPI開発向け）

本ドキュメントは、ゲームAPI開発において  
**仕様書に記載された各項目をどの要件に分類すべきか**を判断するための共通定義です。  
AIによる自動分類・人間によるレビューの双方で利用することを想定しています。

---

## 要件分類 全体マップ

```
要件
├─ 機能要件（Functional Requirement）
├─ 非機能要件（Non-Functional Requirement）
├─ 運用要件（Operational Requirement）
├─ 制約条件（Constraint）
├─ 実装要件（Implementation Requirement）
└─ ビジネス要件（Business Requirement）
```

---

## 1. 機能要件（Functional Requirement）

### 定義
ユーザー体験・ゲーム仕様として
**「何が起きるか」「どう振る舞うか」**を定義する要件。

### 判定軸
- ユーザーが「できること」が変わるか
- ゲーム体験の意味・ルール・結果が変わるか

### 具体例
- ガチャを引ける
- 条件を満たすと特別演出になる
- ミッション達成時に報酬が付与される
- フラグON時に別フローが有効になる

### 注意点
- 実装差分が小さくても体験が変われば機能要件
- 「設定で切り替えられる」こと自体は機能要件ではない

---

## 2. 非機能要件（Non-Functional Requirement）

### 定義
機能の中身ではなく  
**性能・品質・安全性・信頼性**などの性質を定義する要件。

### 判定軸
- 体験の内容ではなく「質」の話か
- 遅い・落ちる・壊れる・危険を防ぐ条件か

### 具体例
- レスポンスxxxms以内
- 高負荷耐性
- 冪等性保証
- 二重付与防止
- セキュリティ対策

---

## 3. 運用要件（Operational Requirement）

### 定義
**運営・現場がどう操作・制御できるか**を定義する要件。

### 判定軸
- 運営が「どう触れるか」の話か
- デプロイ不要・即時反映などが主題か

### 具体例
- 設定テーブルでON/OFF切り替え可能
- 管理画面から変更可能
- 即時反映
- ロールバック容易

### 補足
- 非機能要件に含められることも多いが、分離した方が混乱しにくい

---

## 4. 制約条件（Constraint）

### 定義
**設計や実装の選択肢を縛る前提条件**。

### 判定軸
- 「こうしなければならない」という縛りか
- 技術・構造・互換性などの前提か

### 具体例
- 既存テーブルを使用する
- 既存APIを変更しない
- 後方互換を維持する
- ECS on Fargate 上で動かす
- Laravelを使用する

---

## 5. 実装要件（Implementation Requirement）

### 定義
**設計・実装レベルでの実現方針**。

### 判定軸
- 「どう作るか」「どう実装するか」の話か
- コード構造・設計判断が主語か

### 具体例
- 既存機能の組み合わせで実装
- 新UseCaseは作らない
- オーケストレーションのみ変更
- Feature Flag方式を採用

---

## 6. ビジネス要件（Business Requirement）

### 定義
**なぜそれをやるのか、何を達成したいのか**を定義する要件。

### 判定軸
- 技術ではなく目的・背景・KPIの話か

### 具体例
- 売上向上
- イベント施策
- 運営コスト削減
- 不正リスク低減
- 継続率改善

---

## 即判定チェックリスト

| 質問 | 分類 |
|---|---|
| 体験の意味が変わる？ | 機能要件 |
| 品質・安全・速さ？ | 非機能要件 |
| 運営がどう触れる？ | 運用要件 |
| 縛り・前提？ | 制約条件 |
| 作り方の話？ | 実装要件 |
| 目的・背景？ | ビジネス要件 |

---

## 備考
- 1つの仕様項目に複数の要件が含まれることは珍しくない
- 分類の目的は「混ぜないこと」
